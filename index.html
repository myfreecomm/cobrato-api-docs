<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Cobrato</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["Shell"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="Shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li>Este projeto é mantido por</li>
            <li><a href='#'>Myfreecomm</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="informaçães-básicas">Informaçães básicas</h1>

<h2 id="autenticação">Autenticação</h2>

<p>Antes de acessar o Cobrato, você deve criar uma conta em: Cobrato. Se você já tiver uma, você precisa ter o seu API token, você pode conseguí-lo nas configurações de sua conta, o token é requerido em todas as requisições via API, o token é usado para identificá-lo.</p>

<p>Autenticação na API do Cobrato é realizada utilizando HTTP Basic, Porem você não vai usar sua senha e login como de costume, você terá que usar o token da API como sendo seu login e a senha em branco, (se o seu cliente HTTP requer uma senha, você pode digitar X).</p>
<pre class="highlight shell"><code>    Formato JSON

    EXEMPLO DE REQUISIÇÃO

      <span class="nv">$ </span>curl -i -u <span class="nv">$YOUR_API_TOKEN</span>:X <span class="se">\</span>
        -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
        -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
        -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
        -X GET https://app.cobrato.com/api/v1

    EXEMPLO DE RESPOSTA

    <span class="o">{</span>
      <span class="s2">"chave"</span>: <span class="s2">"valor"</span>
    <span class="o">}</span>

</code></pre>

<h2 id="formatos-de-requisição-e-resposta">Formatos de requisição e resposta</h2>

<aside class="notice">O único formato disponível para requisições e respostas é JSON.</aside>

<h2 id="fuso-horário">Fuso horário</h2>

<p>Todos os dados recebidos e enviados através da API do Cobrato é baseado no fuso horário UTC. No entanto um usuário pode ter uma preferência por outro. Este fuso horário vai ser utilizado para apresentar a resposta, isso não afeta o resultado da resposta da API</p>

<p>Formatos de data e hora</p>

<p>Todas as datas e horas são formatadas de acordo com ISO 8601 padrão, e sempre vai ser dada no fuso horário.</p>

<p>Você deve sempre fornecer os seus valores de data e hora no mesmo formato ISO 8601 e no fuso horário UTC.</p>

<table><thead>
<tr>
<th>Tipo</th>
<th>Formato</th>
<th>Exemplo</th>
</tr>
</thead><tbody>
<tr>
<td>Data</td>
<td>YYYY-mm-dd</td>
<td>2014-11-05</td>
</tr>
<tr>
<td>Data hora</td>
<td>YYYY-mm-ddTHH:MM:SSZ</td>
<td>2014-11-05T17:28:03Z</td>
</tr>
</tbody></table>

<h2 id="formato-numérico">Formato numérico</h2>

<aside class="notice">Todos os números são fornecidos tanto com números inteiros, ponto flutuante nativos para JSON.</aside>

<h2 id="formato-numérico">Formato numérico</h2>

<aside class="notice">Todos os números são fornecidos tanto com números inteiros, ponto flutuante nativos para JSON.</aside>

          <h1 id="beneficiário">Beneficiário</h1>
<pre class="highlight shell"><code>Beneficiário

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>É possível ter indeterminados beneficiários, e a eles que pertencem as contas bancárias, contas de cobrança, e as próprias cobranças do sistema. Podem ser tanto pessoas físicas como pessoas jurídicas.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>tipo de identificação nacional (&lsquo;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome completo do beneficiário</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>nome da cidade do domicílio do beneficiário</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>uf do estado do domicílio do beneficiário (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>bairro do domicílio do beneficiário</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>rua do domicílio do beneficiário</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>número da rua do domicílio do beneficiário</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>cep do domicílio do beneficiário</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>complemento para o endereço de domicilio do beneficiário</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links do beneficiário</td>
</tr>
</tbody></table>

<h2 id="informações-do-beneficiário">Informações do Beneficiário</h2>
<pre class="highlight shell"><code>Mostrar Beneficiário

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informações detalhadas do beneficiário informado em JSON.</p>

<h2 id="lista-de-todos-os-beneficiários">Lista de Todos os Beneficiários</h2>
<pre class="highlight shell"><code>Listar Beneficiários

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"payees"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações beneficiário 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações beneficiário 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todos os beneficiários pertencentes a sua Conta de Serviço.</p>

<h2 id="criação-de-beneficiário">Criação de Beneficiário</h2>
<pre class="highlight shell"><code>Criar Beneficiário

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payees <span class="se">\</span>
    -d <span class="s1">'{
        "name": "João Silva",
        "city": "Caxias do Sul",
        "national_identifier_type": "cpf",
        "national_identifier": "38031171513",
        "state": "RS",
        "street": "Rua Principal",
        "neighbourhood": "Centro",
        "number": "174",
        "zipcode": "95055-777"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"name"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"city"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"national_identifier_type"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não está incluído na lista"</span><span class="o">]</span>,
      <span class="s2">"state"</span>:[<span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não possui o tamanho esperado (2 caracteres)"</span><span class="o">]</span>,
      <span class="s2">"neighbourhood"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"street"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"number"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"zipcode"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo beneficiário, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do beneficiário</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> nome da cidade do domicílio do beneficiário</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> uf do estado do domicílio do beneficiário (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do domicílio do beneficiário</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> rua do domicílio do beneficiário</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número da rua do domicílio do beneficiário</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do domicílio do beneficiário</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional)  complemento para o endereço de domicilio do beneficiário</td>
</tr>
</tbody></table>

<h2 id="atualização-de-beneficiário">Atualização de Beneficiário</h2>
<pre class="highlight shell"><code>Atualizar Beneficiário

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/payees/:payee_id
  PATCH https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/payees/:payee_id <span class="se">\</span>
    -d <span class="s1">'{
        "city": "Farroupilha",
        "state": "RS"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

    <span class="o">{</span>
      <span class="s2">"errors"</span>:<span class="o">{</span>
        <span class="s2">"national_identifier_type"</span>:[<span class="s2">"não está incluído na lista"</span><span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>

</code></pre>

<p>Atualiza o beneficiário determinado, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do beneficiário</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> nome da cidade do domicílio do beneficiário</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> uf do estado do domicílio do beneficiário (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do domicílio do beneficiário</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> rua do domicílio do beneficiário</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número da rua do domicílio do beneficiário</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do domicílio do beneficiário</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional)  complemento para o endereço de domicilio do beneficiário</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-beneficiário">Exclusão de Beneficiário</h2>
<pre class="highlight shell"><code>Excluir Beneficiário

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found
</code></pre>

<p>Exclui determinado beneficiário e junto a ele todas suas contas de cobrança, contas bancárias e as cobranças. As mudanças são irreversíveis.</p>

          <h1 id="conta-bancária">Conta Bancária</h1>
<pre class="highlight shell"><code>Conta Bancária

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"payee_id"</span>:<span class="s2">"1"</span>,
    <span class="s2">"bank_code"</span>:<span class="s2">"001"</span>,
    <span class="s2">"agency"</span>:<span class="s2">"1606"</span>,
    <span class="s2">"agency_digit"</span>:<span class="s2">"3"</span>,
    <span class="s2">"account"</span>:<span class="s2">"91000"</span>,
    <span class="s2">"account_digit"</span>:<span class="s2">"7"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>As Contas Bancárias, pertencem aos seus beneficiários, sendo assim é necessário que sempre haja ao menos um beneficiário para criação de conta bancária.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td>identificador do beneficiários no Cobrato</td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td>código do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td>agência da conta bancária</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td>dígito da agência da conta bancária (apenas utilizado pelo Banco do Brasil - 001)</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td>número da conta bancária</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td>dígito do número da conta bancária (apenas não utilizado pelo HSBC - 399)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da conta bancária e de seu beneficiários</td>
</tr>
</tbody></table>

<h2 id="informações-da-conta-bancária">Informações da Conta Bancária</h2>
<pre class="highlight shell"><code>Mostrar Conta Bancária

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"payee_id"</span>:<span class="s2">"1"</span>,
    <span class="s2">"bank_code"</span>:<span class="s2">"001"</span>,
    <span class="s2">"agency"</span>:<span class="s2">"1606"</span>,
    <span class="s2">"agency_digit"</span>:<span class="s2">"3"</span>,
    <span class="s2">"account"</span>:<span class="s2">"91000"</span>,
    <span class="s2">"account_digit"</span>:<span class="s2">"7"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas da conta bancária informada em JSON e também a referência ao seu beneficiário.</p>

<h2 id="lista-de-todas-as-contas-bancárias">Lista de Todas as Contas Bancárias</h2>
<pre class="highlight shell"><code>Listar Contas Bancárias

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"bank_accounts"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações conta bancária 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações conta bancária 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas bancárias em que seus beneficiários pertencentem a sua Conta de Serviço.</p>

<h2 id="criação-de-conta-bancária">Criação de Conta Bancária</h2>
<pre class="highlight shell"><code>Criar Conta Bancária

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/bank_accounts <span class="se">\</span>
    -d <span class="s1">'{
          "payee_id": "1",
          "bank_code": "001",
          "agency":"1606",
          "agency_digit":"3",
          "account":"91000",
          "account_digit":"7"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"payee_id"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>


</code></pre>

<p>Cria um nova conta bancária, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payee_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> identificador do beneficiário no Cobrato em que a conta bancária irá pertencer</td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> agência da conta bancária</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td><strong>(requerido apenas pelo Banco do Brasil - 001)</strong> dígito da agência da conta bancária</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> número da conta bancária</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC - 399)</strong> dígito do número da conta bancária</td>
</tr>
</tbody></table>

<h2 id="atualização-de-conta-bancária">Atualização de Conta Bancária</h2>
<pre class="highlight shell"><code>Atualizar Conta Bancária

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id
  PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id <span class="se">\</span>
    -d <span class="s1">'{
          "agency":"1606",
          "agency_digit":"3"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"não possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a conta bancária determinada, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p>Ao alterar campo &lsquo;bank_code&rsquo;, caso houvesse algum campo preenchido que de acordo com o novo banco deverá ficar em branco, o Cobrato fará automaticamente. Exemplo: ao alterar uma conta bancária (&#39;bank_code&rsquo;) do Banco do Brasil (001) para o Bradesco (327), o campo &#39;agency_digit&rsquo; receberá &#39;null&rsquo; como novo valor.</p>

<p>Alterações nos campos &#39;bank_code&rsquo;, &#39;agency&rsquo;, &#39;agency_digit&rsquo;, &#39;account&rsquo; ou &#39;account_digit&rsquo; colocará a conta de cobrança em homologação.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> agência da conta bancária</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td><strong>(requerido apenas pelo Banco do Brasil - 001)</strong> dígito da agência da conta bancária</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> número da conta bancária</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC - 399)</strong> dígito do número da conta bancária</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-conta-bancária">Exclusão de Conta Bancária</h2>
<pre class="highlight shell"><code>Excluir Conta Bancária

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta bancária e junto a ela todas suas contas de cobrança, e cobranças. As mudanças são irreversíveis.</p>

<h2 id="carteiras-disponíveis">Carteiras disponíveis</h2>
<pre class="highlight shell"><code>Listar carteiras disponíveis para Conta Bancária

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"portfolio_codes"</span>: <span class="o">[</span>
      <span class="s2">"11"</span>,
      <span class="s2">"12"</span>,
      <span class="s2">"16"</span>,
      <span class="s2">"17"</span>,
      <span class="s2">"18"</span>,
      <span class="s2">"31"</span>,
      <span class="s2">"51"</span>
    <span class="o">]</span>,
    <span class="s2">"_links"</span>: <span class="o">{</span>
      <span class="s2">"rel"</span>: <span class="s2">"bank_account"</span>,
      <span class="s2">"method"</span>: <span class="s2">"GET"</span>,
      <span class="s2">"href"</span>: <span class="s2">"https://sandbox.cobrato.com/api/v1/charges/1"</span>
    <span class="o">}</span>
  <span class="o">}</span>

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Retorna todas as carteiras disponíveis do banco de uma Conta Bancária.</p>

          <h1 id="conta-de-cobrança">Conta de Cobrança</h1>
<pre class="highlight shell"><code>Conta de Cobrança

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"portfolio_code"</span>: <span class="s2">"17"</span>,
    <span class="s2">"agreement_code"</span>: <span class="s2">"12345678"</span>,
    <span class="s2">"agreement_code_digit"</span>: <span class="s2">"1"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Conta Cobrança"</span>,
    <span class="s2">"initial_number"</span>: 1,
    <span class="s2">"current_number"</span>: 1,
    <span class="s2">"end_number"</span>: 1000,
    <span class="s2">"status"</span>: <span class="s2">"pending"</span>,
    <span class="s2">"registered_charges"</span>: <span class="nb">true</span>,
    <span class="s2">"agreement_number"</span>: 4576361,
    <span class="s2">"remittance_cnab_pattern"</span>: 400,
    <span class="s2">"initial_remittance_number"</span>: 1,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>As Contas de Cobranças, pertencem as suas contas bancárias, sendo assim é necessário que sempre haja ao menos uma conta bancária para criação de conta de cobrança. As validações nas contas de cobranças são de acordo com o banco, de sua conta bancária.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>bank_account_id</td>
<td>integer</td>
<td>identificador da conta bancária desta conta de cobrança no Cobrato</td>
</tr>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td>código de portfólio</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td>código de convênio ou do beneficiário, de acordo com o banco. No caso do Itaú deve ser igual ao campo &lsquo;account&rsquo; da conta bancária</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td>verificador do código de convênio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome que identifica esta conta de cobraça</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td>número inicial do nosso número, sendo atribuído automaticamente e sequencialmente as cobranças</td>
</tr>
<tr>
<td>current_number</td>
<td>integer</td>
<td>nosso número atribuído a última cobrança criada a partir desta conta de cobrança</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>caso for &#39;pending&rsquo; a conta ainda não está homologada caso for &#39;ok&rsquo; a conta já consta como homologada</td>
</tr>
<tr>
<td>registered_charges</td>
<td>boolean</td>
<td>informa se a conta de cobrança utiliza boletos registrados ou não, sendo false por padrão</td>
</tr>
<tr>
<td>agreement_number</td>
<td>integer</td>
<td>número do convênio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>padrão utilizado no arquivo CNAB de remessa</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>número inicial de remessa, ou seja, qual foi o último número sequencial de remessa enviado para o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da conta de cobrança e de sua conta bancária</td>
</tr>
</tbody></table>

<h2 id="informações-da-conta-de-cobrança">Informações da Conta de Cobrança</h2>
<pre class="highlight shell"><code>Mostrar Conta de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"portfolio_code"</span>: <span class="s2">"17"</span>,
    <span class="s2">"agreement_code"</span>: <span class="s2">"12345678"</span>,
    <span class="s2">"agreement_code_digit"</span>: <span class="s2">"1"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Conta Cobrança"</span>,
    <span class="s2">"initial_number"</span>: 1,
    <span class="s2">"current_number"</span>: 1,
    <span class="s2">"end_number"</span>: 1000,
    <span class="s2">"status"</span>: <span class="s2">"pending"</span>,
    <span class="s2">"registered_charges"</span>: <span class="nb">true</span>,
    <span class="s2">"agreement_number"</span>: 4576361,
    <span class="s2">"remittance_cnab_pattern"</span>: 400,
    <span class="s2">"initial_remittance_number"</span>: 1,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas da conta de cobrança informada em JSON e também a referência a sua conta bancária.</p>

<h2 id="lista-de-todas-as-contas-de-cobrança">Lista de Todas as Contas de Cobrança</h2>
<pre class="highlight shell"><code>Listar Contas de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charge_accounts"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações conta de cobrança 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações conta de cobrança 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas de cobranças que pertencem a sua Conta de Serviço.</p>

<h2 id="criação-de-conta-de-cobrança">Criação de Conta de Cobrança</h2>
<pre class="highlight shell"><code>Criar Conta de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charge_accounts <span class="se">\</span>
    -d <span class="s1">'{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobrança",
          "initial_number": "1",
          "end_number": "1000",
          "registered_charges": "true",
          "agreement_number": "4576361",
          "remittance_cnab_pattern": "400",
          "initial_remittance_number": "1"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"name"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"portfolio_code"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"agreement_code"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"agreement_code_digit"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um nova conta de cobrança, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_account_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da conta bancária em que a conta de cobrança irá pertencer</td>
</tr>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de portfólio, validação conforme o banco</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td><strong>(requerido, com exceção do Itaú onde é preenchido automaticamente)</strong> código de convênio ou do beneficiário, de acordo com o banco</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC e Itaú, sendo preenchido automaticamente para o último)</strong> verificador do código de convênio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta conta de cobraça</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td><strong>(requerido)</strong> número inicial do nosso número, sendo atribuído automaticamente e sequencialmente às cobranças</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>(opcional) número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</td>
</tr>
<tr>
<td>registered_charges</td>
<td>boolean</td>
<td>(opcional) informa se a conta de cobrança utiliza boletos registrados ou não, sendo false por padrão</td>
</tr>
<tr>
<td>agreement_number</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) número do convênio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) padrão utilizado no arquivo CNAB de remessa. Os valores permitidos são 240 ou 400</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>(opcional) número inicial de remessa, ou seja, qual foi o último número sequencial de remessa enviado para o banco (apenas para o Bradesco). Por padrão o valor é 1</td>
</tr>
</tbody></table>

<h2 id="atualização-de-conta-de-cobrança">Atualização de Conta de Cobrança</h2>
<pre class="highlight shell"><code>Atualizar Conta de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
  PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id <span class="se">\</span>
    -d <span class="s1">'{
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Novo Nome"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"não possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a conta de cobrança determinada, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de portfólio, validação conforme o banco</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td><strong>(requerido, com exceção do Itaú onde é preenchido automaticamente)</strong> código de convênio ou do beneficiário, de acordo com o banco</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC e Itaú, sendo preenchido automaticamente para o último)</strong> verificador do código de convênio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta conta de cobraça</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td><strong>(requerido)</strong> número inicial do nosso número, sendo atribuído automaticamente e sequencialmente às cobranças</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>(opcional) número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</td>
</tr>
<tr>
<td>registered_charges</td>
<td>boolean</td>
<td>(opcional) informa se a conta de cobrança utiliza boletos registrados ou não, sendo false por padrão</td>
</tr>
<tr>
<td>agreement_number</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) número do convênio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) padrão utilizado no arquivo CNAB de remessa. Os valores permitidos são 240 ou 400</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>(opcional) número inicial de remessa, ou seja, qual foi o último número sequencial de remessa enviado para o banco (apenas para o Bradesco). Por padrão o valor é 1</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-conta-de-cobrança">Exclusão de Conta de Cobrança</h2>
<pre class="highlight shell"><code>Excluir Conta de Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta de cobrança e junto a ela todas suas cobranças. As mudanças são irreversíveis.</p>

<h2 id="métodos-de-pagamentos-disponíveis">Métodos de Pagamentos Disponíveis</h2>
<pre class="highlight shell"><code>Métodos de Pagamentos Disponíveis

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts/available_payment_methods

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_accounts/available_payment_methods

EXEMPLO DE ESTADO DA RESPOTA

  200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"payment_methods"</span>:
    <span class="o">[</span>
      <span class="s2">"billet"</span>,
      <span class="s2">"cnab"</span>
    <span class="o">]</span>
  <span class="o">}</span>


</code></pre>

<p>Mostra todos os métodos de pagamentos disponíveis pelo Cobrato.</p>

          <h1 id="cobrança">Cobrança</h1>
<pre class="highlight shell"><code>Cobrança

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"due_date"</span>:<span class="s2">"2015-02-14"</span>,
    <span class="s2">"document_kind"</span>:<span class="s2">"DV"</span>,
    <span class="s2">"document_date"</span>:null,
    <span class="s2">"document_number"</span>:null,
    <span class="s2">"custom_our_number"</span>: <span class="s2">"true"</span>,
    <span class="s2">"our_number"</span>:<span class="s2">"0"</span>,
    <span class="s2">"our_number_digit"</span>:null,
    <span class="s2">"total_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"instructions"</span>:<span class="s2">"Pagável em qualquer agência até data do vencimento."</span>,
    <span class="s2">"demonstrative"</span>:<span class="s2">"Não receber após o vencimento."</span>,
    <span class="s2">"payer_emails"</span>:[<span class="s2">"myemail@gmail.com"</span><span class="o">]</span>,
    <span class="s2">"payer_info"</span>:<span class="s2">"Empresa A - CNPJ X"</span>,
    <span class="s2">"received"</span>:true,
    <span class="s2">"received_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"received_at"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"processing_date"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"for_homologation"</span>:true,
    <span class="s2">"has_cnab_remittance"</span>:false,
    <span class="s2">"registered"</span>: <span class="nb">true</span>,
    <span class="s2">"payer_national_identifier_type"</span>: <span class="s2">"cpf"</span>,
    <span class="s2">"payer_national_identifier"</span>: <span class="s2">"12345678909"</span>,
    <span class="s2">"payer_name"</span>: <span class="s2">"Jonh Doe"</span>,
    <span class="s2">"payer_number"</span>: <span class="s2">"43"</span>,
    <span class="s2">"payer_complement"</span>: <span class="s2">"8 andar"</span>,
    <span class="s2">"payer_street"</span>: <span class="s2">"Rua do Carmo"</span>,
    <span class="s2">"payer_neighbourhood"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"payer_zipcode"</span>: <span class="s2">"22230062"</span>,
    <span class="s2">"payer_city"</span>: <span class="s2">"Rio de Janeiro"</span>,
    <span class="s2">"payer_state"</span>: <span class="s2">"RJ"</span>,
    <span class="s2">"status"</span>: <span class="s2">"not_generated_remittance"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"receive"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/receive"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"deliver"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/deliver_billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"charge_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"billet"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/billet"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>As Cobranças, pertencem as suas contas de cobrança, sendo assim é necessário que sempre haja ao menos uma conta de cobrança homologada para a criação de cobranças. Ao criar uma conta de cobrança é automaticamente gerada uma cobrança para homologar a conta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>charge_account_id</td>
<td>integer</td>
<td>identificador da conta de cobrança a qual esta cobraça pertece</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>data de vencimento da cobranca</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>data de emissão do documento</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td>número do documento, também chamado de &ldquo;seu número&rdquo;, é o número utilizado e controlado pelo beneficiário para identificar o título de cobrança</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>nosso número</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>indica se a cobrança utiliza um &ldquo;nosso número&rdquo; customizado. O valor padrão é false, mas caso definido true, o campo &lsquo;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td>valor total do boleto</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>instruções de pagamento do boleto, por padrão &ldquo;Pagável em qualquer agência até data do vencimento.&rdquo;</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>demonstrativo do Boleto, por padrão &ldquo;Não receber após o vencimento.&rdquo;</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>emails de quem irá pagar o boleto</td>
</tr>
<tr>
<td>payer_info</td>
<td>string</td>
<td>informações gerais de quem irá pagar a cobraça (p.ex. nome, documento, endereço)</td>
</tr>
<tr>
<td>received</td>
<td>boolean</td>
<td>indica se a cobrança foi recebida</td>
</tr>
<tr>
<td>received_amount</td>
<td>decimal</td>
<td>valor recebido</td>
</tr>
<tr>
<td>received_at</td>
<td>date</td>
<td>dia em que a cobraça foi recebida</td>
</tr>
<tr>
<td>processing_date</td>
<td>date</td>
<td>data de geração do boleto</td>
</tr>
<tr>
<td>for_homologation</td>
<td>boolean</td>
<td>indica se é uma cobrança gerada automaticamente pelo sistema para ser utilizada na homologação da conta de cobrança</td>
</tr>
<tr>
<td>has_cnab_remittance</td>
<td>boolean</td>
<td>para cobranças onde o &ldquo;payment_method&rdquo; é &ldquo;cnab&rdquo;, identifica se o arquivo de remessa já foi gerado</td>
</tr>
<tr>
<td>registered</td>
<td>boolean</td>
<td>indica se a cobrança é registrada ou não. Por padrão é <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td>tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td>documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td>nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>número do endereço do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>complemento do endereço do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>rua do endereço do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>bairro do endereço do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>cep do endereço do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>cidade do endereço do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>status em que a cobrança se encontra (not_generated_remittance, generated_remittance, registered)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionados à cobraça</td>
</tr>
</tbody></table>

<h2 id="informações-da-cobrança">Informações da Cobrança</h2>
<pre class="highlight shell"><code>Mostrar Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"due_date"</span>:<span class="s2">"2015-02-14"</span>,
    <span class="s2">"document_kind"</span>:<span class="s2">"DV"</span>,
    <span class="s2">"document_date"</span>:null,
    <span class="s2">"document_number"</span>:null,
    <span class="s2">"custom_our_number"</span>: <span class="s2">"true"</span>,
    <span class="s2">"our_number"</span>:<span class="s2">"0"</span>,
    <span class="s2">"our_number_digit"</span>:null,
    <span class="s2">"total_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"instructions"</span>:<span class="s2">"Pagável em qualquer agência até data do vencimento."</span>,
    <span class="s2">"demonstrative"</span>:<span class="s2">"Não receber após o vencimento."</span>,
    <span class="s2">"payer_emails"</span>:[<span class="s2">"myemail@gmail.com"</span><span class="o">]</span>,
    <span class="s2">"payer_info"</span>:<span class="s2">"Empresa A - CNPJ X"</span>,
    <span class="s2">"received"</span>:true,
    <span class="s2">"received_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"received_at"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"processing_date"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"for_homologation"</span>:true,
    <span class="s2">"has_cnab_remittance"</span>:false,
    <span class="s2">"registered"</span>: <span class="nb">true</span>,
    <span class="s2">"payer_national_identifier_type"</span>: <span class="s2">"cpf"</span>,
    <span class="s2">"payer_national_identifier"</span>: <span class="s2">"12345678909"</span>,
    <span class="s2">"payer_name"</span>: <span class="s2">"Jonh Doe"</span>,
    <span class="s2">"payer_number"</span>: <span class="s2">"43"</span>,
    <span class="s2">"payer_complement"</span>: <span class="s2">"8 andar"</span>,
    <span class="s2">"payer_street"</span>: <span class="s2">"Rua do Carmo"</span>,
    <span class="s2">"payer_neighbourhood"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"payer_zipcode"</span>: <span class="s2">"22230062"</span>,
    <span class="s2">"payer_city"</span>: <span class="s2">"Rio de Janeiro"</span>,
    <span class="s2">"payer_state"</span>: <span class="s2">"RJ"</span>,
    <span class="s2">"status"</span>: <span class="s2">"not_generated_remittance"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"receive"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/receive"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"deliver"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/deliver_billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"charge_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"billet"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/billet"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informações detalhadas da cobrança informada em JSON e também a referência a sua conta de cobrança.</p>

<aside class="notice">
  O conteúdo do nó &ldquo;_links&rdquo; irá variar de acordo com o status da cobrança. Além dos itens básicos mostrados no exemplo de resposta ao lado, se a cobraça tiver sido recebida, irá conter o seguinte link:

  <br><br>
  <p>
    <code>
    {"rel":"receive","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/receive"}
    </code>
  </p>

  <p>Caso contrário, irá conter este link:</p>

  <p>
    <code>
    {"rel":"undo_receive","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/undo_receive"}
    </code>
  </p>
</aside>

<h2 id="lista-de-todas-as-cobrança">Lista de Todas as Cobrança</h2>
<pre class="highlight shell"><code>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações cobrança 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações cobrança 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as cobranças que pertencem a sua Conta de Serviço.</p>

<h2 id="criação-de-cobrança">Criação de Cobrança</h2>
<pre class="highlight shell"><code>Criar Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges <span class="se">\</span>
    -d <span class="s1">'{
          "charge_account_id": 1,
          "due_date":"2015-02-14",
          "document_kind":"DV",
          "our_number":"12345678",
          "total_amount":"10.07",
          "payer_emails":["myemail@gmail.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"charge_account_id"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"our_number"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"total_amount"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"document_kind"</span>:[<span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não está incluído na lista"</span><span class="o">]</span>,
        <span class="s2">"due_date"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um nova cobrança, caso haja sucesso retornará as informações da mesma e será gerado seu boleto. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charge_account_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da conta bancária em que a conta de cobrança irá pertencer</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobrança</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td><strong>(requerido)</strong> espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor total do boleto</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td><strong>(requerido)</strong> número do documento, também chamado de &ldquo;seu número&rdquo;, é o número utilizado e controlado pelo beneficiário para identificar o título de cobrança</td>
</tr>
<tr>
<td>payer_info</td>
<td>string</td>
<td><strong>(requerido)</strong> nome, documento e endereço de quem irá pagar a cobraça (pode ser 3 linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(opcional) emails de quem irá pagar o boleto</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>(opcional) data de emissão do documento</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>(opcional) nosso número. Caso não informado, é atribuído automaticamente pelo sistema</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>(opcional) digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança utiliza um &ldquo;nosso número&rdquo; customizado. O valor padrão é false, mas caso definido true, o campo &#39;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>(opcional) instruções de pagamento do boleto, por padrão &ldquo;Pagável em qualquer agência até data do vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>(opcional) demonstrativo do Boleto, por padrão &ldquo;Não receber após o vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>registered</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança é registrada ou não. Por padrão é <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) número do endereço do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) complemento do endereço do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) rua do endereço do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) bairro do endereço do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cep do endereço do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cidade do endereço do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="atualização-de-cobrança">Atualização de Cobrança</h2>
<pre class="highlight shell"><code>Atualizar Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charges/:charge_id
  PATCH https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charges/:charge_id <span class="se">\</span>
    -d <span class="s1">'{
          "document_date":"2015-02-02",
          "document_number":"123456789",
          "payer_emails":["myemail@gmail.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span><span class="s2">"document_kind"</span>:[<span class="s2">"não está incluído na lista"</span><span class="o">]}</span>
  <span class="o">}</span>

Exclusão de Cobrança

Exclui determinada cobrança. As mudanças são irreversíveis, e não será mais possível receber o boleto da cobrança excluída!


</code></pre>

<p>Atualiza a cobrança determinada, caso haja sucesso retornará as informações da mesma e será gerado um novo boleto sobrescrevendo o anterior. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<aside class="warning">
Não é possível atualizar uma cobrança após seu recebimento, para isso é necessário desfazer o recebimento da mesma!
</aside>

<aside class="notice">
Os campos 'received&rsquo;, 'received_at&rsquo; e 'received_amount&rsquo;, não são alterados via atualização de cobrança, apenas no recebimento ou desfazendo o recebimento da mesma.
</aside>

<aside class="notice">
O campo 'has_cnab_remittance&rsquo; é alterado, apenas em cobranças em que o 'payment_method&rsquo; é 'cnab&rsquo;, quando a gerado o arquivo de remessa para a cobrança.
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobrança</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td><strong>(requerido)</strong> espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor total do boleto</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td><strong>(requerido)</strong> número do documento, também chamado de &ldquo;seu número&rdquo;, é o número utilizado e controlado pelo beneficiário para identificar o título de cobrança</td>
</tr>
<tr>
<td>payer_info</td>
<td>string</td>
<td><strong>(requerido)</strong> nome, documento e endereço de quem irá pagar a cobraça (pode ser 3 linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(opcional) emails de quem irá pagar o boleto</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>(opcional) data de emissão do documento</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>(opcional) nosso número. Caso não informado, é atribuído automaticamente pelo sistema</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>(opcional) digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança utiliza um &ldquo;nosso número&rdquo; customizado. O valor padrão é false, mas caso definido true, o campo &#39;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>(opcional) instruções de pagamento do boleto, por padrão &ldquo;Pagável em qualquer agência até data do vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>(opcional) demonstrativo do Boleto, por padrão &ldquo;Não receber após o vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>registered</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança é registrada ou não. Por padrão é <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) número do endereço do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) complemento do endereço do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) rua do endereço do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) bairro do endereço do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cep do endereço do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cidade do endereço do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-cobrança">Exclusão de Cobrança</h2>
<pre class="highlight shell"><code>Excluir Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada cobrança. As mudanças são irreversíveis, e não será mais possível receber o boleto da cobrança excluída!</p>

<h2 id="recebimento-de-cobrança">Recebimento de Cobrança</h2>
<pre class="highlight shell"><code>Receber Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/receive

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/receive <span class="se">\</span>
    -d <span class="s1">'{
         "received_at": "2015-02-06",
         "received_amount": "9.57"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"received_at"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"received_amount"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Marca determinada cobrança como recebida, retornando JSON contendo as informações da cobrança em caso de sucesso ou os erros, caso haja algum.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>received_at</td>
<td>date</td>
<td><strong>(requerido)</strong> data de pagamento da cobrança</td>
</tr>
<tr>
<td>received_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor recebido da cobrança</td>
</tr>
</tbody></table>

<h2 id="desfazer-recebimento-de-cobrança">Desfazer Recebimento de Cobrança</h2>
<pre class="highlight shell"><code>Desfazer Recebimento de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/undo_receive

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/undo_receive

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"received"</span>: <span class="o">[</span>
        <span class="s2">"Impossível cancelar o recebimento de uma cobrança não recebida!"</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Marca determinada cobrança como não recebida, retornando JSON contendo as informações da cobrança em caso de sucesso ou os erros, caso haja algum.</p>

<h2 id="boleto-da-cobrança">Boleto da Cobrança</h2>
<pre class="highlight shell"><code>Mostrar Boleto da Cobrança <span class="o">(</span>URL<span class="o">)</span>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges/:charge_id/billet

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges/:charge_id/billet

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/billets/1/6186_08033_1445001056.pdf?Expires=1445034829"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do boleto de determinada cobraça</p>

<aside class="warning">
As URLs disponibilizadas são válidas por apenas 60 minutos. Sendo assim, não armazene o retorno e sempre que for necessário realize uma nova chamada à API.
</aside>

<h2 id="envio-de-boleto-da-cobrança">Envio de Boleto da Cobrança</h2>
<pre class="highlight shell"><code>Enviar Boleto da Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/deliver_billet

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/deliver_billet <span class="se">\</span>
    -d <span class="s1">'{
         "to": ["email1@host.com","email1@host.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM EMAIL NÃO CADASTRADO E NÃO INFORMADO

      422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"payer_emails"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Envia o boleto da cobrança por email, gerando o mesmo caso necessário. É enviado para os emails informados, ou então os cadastrados na cobrança.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>to</td>
<td>array of string</td>
<td><strong>(requerido)</strong> emails que receberão o boleto ao invés dos emails cadastrados na cobrança</td>
</tr>
</tbody></table>

          <h1 id="cnab-de-remessa">CNAB de Remessa</h1>
<pre class="highlight shell"><code>CNAB de Remessa

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1/file"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charges"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"http://localhost:3000/api/v1/remittance_cnabs/1/charges"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Os Arquivos CNAB de Remessa são arquivos enviados para o banco com o objetivo de registrar novos títulos, podendo ser gerado a partir de uma ou mais Cobranças. Se forem enviadas Cobranças de Contas de Cobranças diferentes, será gerado um CNAB de remessa para cada Conta de Cobrança.</p>

<aside class="warning">
A utilização desta API não é autorizada a contas com o plano <strong>Gratuito</strong>, resultando na resposta com o estado <strong>403 Forbidden</strong>!
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>identificador do CNAB de remessa</td>
</tr>
<tr>
<td>charge_account_id</td>
<td>string</td>
<td>identificador da conta de cobrança no Cobrato</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>situação da remessa, podendo ser &ldquo;processing&rdquo; (processando), &ldquo;processed&rdquo; (processado) e &ldquo;processing_error&rdquo; (erro de processamento)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionado CNAB de remessa</td>
</tr>
</tbody></table>

<h2 id="informações-do-cnab-de-remessa">Informações do CNAB de Remessa</h2>
<pre class="highlight shell"><code>Mostrar CNAB de Remessa

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA 

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1/file"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charges"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"http://localhost:3000/api/v1/remittance_cnabs/1/charges"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas em JSON do CNAB de remessa informado.</p>

<h2 id="lista-de-todas-as-cnabs-de-remessa">Lista de Todas as CNABs de Remessa</h2>
<pre class="highlight shell"><code>Listar CNABs de Remessa

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"remittance_cnabs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de remessa 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de remessa 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os CNABs de remessa que pertencem a sua Conta de Serviço.</p>

<h2 id="criação-de-arquivo-cnab-de-remessa">Criação de Arquivo CNAB de Remessa</h2>
<pre class="highlight shell"><code>Criar Arquivo CNAB de Remessa

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/remittance_cnabs <span class="se">\</span>
    -D <span class="s1">'{
        "charge_ids": [12, 13, 15, 18]
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Criated

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"charge_ids"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria novo(s) Arquivo(s) CNAB de Remessa, retornando as informações do mesmo caso haja sucesso. Se houverem erros, eles serão informados no corpo da resposta. Pode ser gerado a partir de uma ou mais Cobranças. Se forem enviadas Cobranças de Contas de Cobranças diferentes, será gerado um CNAB de remessa para cada Conta de Cobrança.</p>

<p>Os Arquivos CNAB de Remessa podem ser criados a partir de uma ou mais cobraças que ainda não possuem boleto ou outro arquivo de remessa associado.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charge_ids</td>
<td>array of integers</td>
<td><strong>(requerido)</strong> Lista com os ids das cobranças que devem ser associadas ao Arquivo CNAB de Remessa</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-cnab-de-remessa">Exclusão de CNAB de Remessa</h2>
<pre class="highlight shell"><code>Excluir CNAB de Remessa

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CNAB DE REMESSA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado CNAB de remessa. A exclusão é irreversível.</p>

<h2 id="arquivo-do-cnab-de-remessa">Arquivo do CNAB de Remessa</h2>
<pre class="highlight shell"><code>Mostrar Arquivo <span class="k">do </span>CNAB de Remessa <span class="o">(</span>URL<span class="o">)</span>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/file

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/file

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CNAB DE REMESSA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/remittance_cnabs/cnabs/1/B425065A.RET?AWSAccessKeyId=AKIAIRJFH3YRXV5YRVTQ&amp;Expires=1452277155&amp;Signature=IJ1P%2Bc%2F9vC%2FKlBWuHGIBEl%2BAHKk%3D"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do arquivo de determinado CNAB de remessa.</p>

<aside class="warning">
As URLs disponibilizadas são válidas por apenas 60 minutos. Sendo assim, não armazene o remessa e sempre que for necessário realize uma nova chamada à API.
</aside>

<h2 id="lista-de-todas-as-cobrança-do-arquivo-de-remessa">Lista de Todas as Cobrança do Arquivo de Remessa</h2>
<pre class="highlight shell"><code>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/charges

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações cobrança 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações cobrança 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as cobranças que pertencem ao CNAB de remessa informado.</p>

          <h1 id="cnab-de-retorno">CNAB de Retorno</h1>
<pre class="highlight shell"><code>CNAB de Retorno

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 9,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"report"</span>: <span class="o">{</span>
      <span class="s2">"charges_not_found"</span>: 0,
      <span class="s2">"received_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 46,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/46"</span> <span class="o">}]</span>
      <span class="o">}]</span>,
      <span class="s2">"registered_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 45,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/45"</span> <span class="o">}]</span>
      <span class="o">}]</span>
    <span class="o">}</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1/file"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Os arquivos CNABs de retorno, pertencem a uma determinada conta de cobrança, contendo informações de uma ou mais cobranças desta conta.</p>

<aside class="warning">
A utilização desta API não é autorizada a contas com o plano <strong>Gratuito</strong>, resultando na resposta com o estado <strong>403 Forbidden</strong>!
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>identificador do CNAB de retorno</td>
</tr>
<tr>
<td>charge_account_id</td>
<td>string</td>
<td>identificador da conta de cobrança no Cobrato</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>situação do arquivo CNAB, podendo ser &ldquo;processing&rdquo; (processando), &ldquo;processed&rdquo; (processado) e &ldquo;processing_error&rdquo; (erro de processamento)</td>
</tr>
<tr>
<td>report</td>
<td>string</td>
<td>relatório de processamento do arquivo CNAB, os parâmetros do relatório se encontram na tabela abaixo</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionado CNAB de retorno</td>
</tr>
</tbody></table>

<p><strong>Parâmetros do Relatório de Processamento</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charges_not_found</td>
<td>integer</td>
<td>Quantidade de cobranças que estavam no CNAB, mas não foram localizadas no sistema</td>
</tr>
<tr>
<td>received_charges</td>
<td>array of objects</td>
<td>Informações das cobranças recebidas pelo CNAB, contendo o código identificador e link</td>
</tr>
<tr>
<td>registered_charges</td>
<td>array of objects</td>
<td>Informações das cobranças registradas pelo CNAB, contendo o código identificador e link</td>
</tr>
</tbody></table>

<h2 id="informações-do-cnab-de-retorno">Informações do CNAB de Retorno</h2>
<pre class="highlight shell"><code>Mostrar CNAB de Retorno

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA 

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 9,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"report"</span>: <span class="o">{</span>
      <span class="s2">"charges_not_found"</span>: 0,
      <span class="s2">"received_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 46,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/46"</span> <span class="o">}]</span>
      <span class="o">}]</span>,
      <span class="s2">"registered_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 45,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/45"</span> <span class="o">}]</span>
      <span class="o">}]</span>
    <span class="o">}</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1/file"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas em JSON do CNAB de retorno informado.</p>

<h2 id="lista-de-todas-as-cnabs-de-retorno">Lista de Todas as CNABs de Retorno</h2>
<pre class="highlight shell"><code>Listar CNABs de Retorno

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"regress_cnabs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de retorno 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de retorno 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os CNABs de retorno que pertencem a sua Conta de Serviço.</p>

<h2 id="criação-de-cnab-de-retorno">Criação de CNAB de Retorno</h2>
<pre class="highlight shell"><code>Criar CNAB de Retorno

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/regress_cnabs <span class="se">\</span>
    -d <span class="s1">'{
          "charge_account_id": 1,
          "cnabs": {
            "content":      "MDJSRVRPUk5PMDFDT0JSQU5DQSAgICAgICAzMTMwMDAyMjY5OTAgICA...",
            "content_type": "text/plain"
            "filename":     "example.RET"
          }
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    202 Accepted

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"charge_account_id"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"cnabs"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um CNAB de retorno inicia o processamento do arquivo.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charge_account_id</td>
<td>string</td>
<td><strong>(requerido)</strong> identificador da conta de cobrança em que o CNAB pertence</td>
</tr>
<tr>
<td>cnabs</td>
<td>object</td>
<td><strong>(requerido)</strong> dados do arquivo CNAB de retorno. O &ldquo;content&rdquo; deve ser uma string com o conteúdo do arquivo codificado em Base64</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-cnab-de-retorno">Exclusão de CNAB de retorno</h2>
<pre class="highlight shell"><code>Excluir CNAB de retorno

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado CNAB de retorno. A exclusão é irreversível.</p>

<h2 id="arquivo-do-cnab-de-retorno">Arquivo do CNAB de Retorno</h2>
<pre class="highlight shell"><code>Mostrar Arquivo <span class="k">do </span>CNAB de Retorno <span class="o">(</span>URL<span class="o">)</span>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/regress_cnabs/:id/file

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs/:id/file

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/regress_cnabs/cnabs/1/B425065A.RET?AWSAccessKeyId=AKIAIRJFH3YRXV5YRVTQ&amp;Expires=1452277155&amp;Signature=IJ1P%2Bc%2F9vC%2FKlBWuHGIBEl%2BAHKk%3D"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do arquivo de determinado CNAB de retorno.</p>

<aside class="warning">
As URLs disponibilizadas são válidas por apenas 60 minutos. Sendo assim, não armazene o retorno e sempre que for necessário realize uma nova chamada à API.
</aside>

          <h1 id="webhook">Webhook</h1>
<pre class="highlight shell"><code>Webhook

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"url"</span>: <span class="s2">"http://www.seusitema.com/cobrato"</span>,
    <span class="s2">"description"</span>: <span class="s2">"teste"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>É possível ter indeterminados webhooks, que enviarão requisições para uma determinada URL quando certas ações ocorrem no Cobrato (<a href="#payloads">Payloads</a>).</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td><strong>(requerido)</strong> URL na qual serão feitas as requisições GET e POST, esperando HTTP 200 como retorno</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição opcional do Webhook</td>
</tr>
</tbody></table>

<h2 id="informações-do-webhook">Informações do Webhook</h2>
<pre class="highlight shell"><code>Mostra Webhook

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"url"</span>: <span class="s2">"http://www.seusitema.com/cobrato"</span>,
    <span class="s2">"description"</span>: <span class="s2">"teste"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas do webhook em formato JSON.</p>

<h2 id="lista-de-todos-os-webhooks">Lista de Todos os Webhooks</h2>
<pre class="highlight shell"><code>
Listar Webhooks

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"webhooks"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações webhook 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações webhook 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todos os webhooks pertencentes a sua Conta de Serviço.</p>

<h2 id="criação-de-webhook">Criação de Webhook</h2>
<pre class="highlight shell"><code>Criar Webhook

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/webhooks <span class="se">\</span>
    -d <span class="s1">'{
        "url": "http://www.seusitema.com/cobrato",
        "description": "Webhook teste"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"url"</span>: <span class="o">[</span>
        <span class="s2">"não é válida"</span>,
        <span class="s2">"não pode ficar em branco"</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo webhook, retornando as informações do mesmo caso haja sucesso. Para realizar o cadastro é necessária que a URL informa aceite as requisições POST e GET, respondendo sempre com HTTP 200. Afim de verificação da URL, o Cobrato fará requisições testes a mesma</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td><strong>(requerido)</strong> URL na qual serão feitas as requisições GET e POST, esperando HTTP 200 como retorno</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição opcional do Webhook</td>
</tr>
</tbody></table>

<h2 id="atualização-de-webhook">Atualização de Webhook</h2>
<pre class="highlight shell"><code>Atualizar Webhook

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/webhooks/:webhook_id
  PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id <span class="se">\</span>
    -d <span class="s1">'{
        "descripction": "Webhook teste"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Atualiza a descrição do webhook. Não é possível alterar a URL de um Webhook. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição opcional do Webhook</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-webhook">Exclusão de Webhook</h2>
<pre class="highlight shell"><code>Excluir Webhook

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM WEBHOOK INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado webhook. A exclusão é irreversível.</p>

          <h1 id="payloads">Payloads</h1>

<p>São as requisições enviadas pelo webhook do Cobrato para uma determinada URL para notificar que certas ações ocorreram. Estas ações notificadas são as seguintes:</p>

<table><thead>
<tr>
<th>Objeto</th>
<th>Evento</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>charge</td>
<td>created</td>
<td>quando a cobrança é criada</td>
</tr>
<tr>
<td>charge</td>
<td>updated</td>
<td>quando a cobrança é atualizada</td>
</tr>
<tr>
<td>charge</td>
<td>destroyed</td>
<td>quando a cobrança é excluída</td>
</tr>
<tr>
<td>charge</td>
<td>received</td>
<td>quando a cobrança é recebida</td>
</tr>
<tr>
<td>charge</td>
<td>undone_receivement</td>
<td>quando a cobrança tem seu recebimento desfeito</td>
</tr>
<tr>
<td>charge_account</td>
<td>created</td>
<td>quando a conta de cobrança é criada</td>
</tr>
<tr>
<td>charge_account</td>
<td>updated</td>
<td>quando a conta de cobrança é atualizada</td>
</tr>
<tr>
<td>charge_account</td>
<td>destroyed</td>
<td>quando a conta de cobrança é excluída</td>
</tr>
</tbody></table>

<h2 id="cobrança-criada">Cobrança criada</h2>
<pre class="highlight shell"><code>Cobrança Criada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança é criada.</p>

<h2 id="cobrança-atualizada">Cobrança Atualizada</h2>
<pre class="highlight shell"><code>Cobrança Atualizada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança é atualizada.</p>

<h2 id="cobrança-excluida">Cobrança Excluida</h2>
<pre class="highlight shell"><code>Cobrança Excluida

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança é excluida.</p>

<h2 id="cobrança-recebida">Cobrança Recebida</h2>
<pre class="highlight shell"><code>Cobrança Recebida

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"received"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança é recebida.</p>

<h2 id="recebimento-de-cobrança-desfeito">Recebimento de Cobrança desfeito</h2>
<pre class="highlight shell"><code>Recebimento de Cobrança desfeito

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"undone_receivement"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança tem seu recebimento desfeito.</p>

<h2 id="conta-de-cobrança-criada">Conta de Cobrança criada</h2>
<pre class="highlight shell"><code>Conta de Cobrança Criada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_account"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges_accounts/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Conta de Cobrança é Criada.</p>

<h2 id="conta-de-cobrança-atualizada">Conta de Cobrança Atualizada</h2>
<pre class="highlight shell"><code>Conta de Cobrança Atualizada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_account"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>
</code></pre>

<p>Informações enviadas quando uma Conta de Cobrança é atualizada.</p>

<h2 id="conta-de-cobrança-excluida">Conta de Cobrança Excluida</h2>
<pre class="highlight shell"><code>Conta de Cobrança Excluida

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_account"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Conta de Cobrança é excluida.</p>

          <h1 id="tipos-de-cobrança">Tipos de cobrança</h1>

<p>Os tipos de cobrança implementados pelo Cobrato.</p>

<aside class="notice">Não é necessária autenticação.</aside>

<p><strong>bank_billets (Boletos bancários)</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td>código do banco</td>
</tr>
<tr>
<td>bank_name</td>
<td>string</td>
<td>nome do banco</td>
</tr>
<tr>
<td>portfolio_codes</td>
<td>array</td>
<td>lista de códigos de portfólio do banco</td>
</tr>
<tr>
<td>regress</td>
<td>array</td>
<td>indica quais layouts CNAB de retorno são suportados para o banco</td>
</tr>
<tr>
<td>remittance</td>
<td>array</td>
<td>indica quais layouts CNAB de remessa são suportados para o banco</td>
</tr>
</tbody></table>

<h2 id="lista-de-todos-os-tipos-de-cobrança">Lista de Todos os Tipos de Cobrança</h2>
<pre class="highlight shell"><code>Listar Tipos de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charging_types

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charging_types

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charging_types"</span>: <span class="o">{</span>
      <span class="s2">"bank_billets"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"bank_code"</span>: <span class="s2">"001"</span>,
          <span class="s2">"bank_name"</span>: <span class="s2">"BancoDoBrasil"</span>,
          <span class="s2">"portfolio_codes"</span>: <span class="o">[</span> <span class="s2">"11"</span>, <span class="s2">"12"</span>, <span class="s2">"16"</span>, <span class="s2">"17"</span>, <span class="s2">"18"</span>, <span class="s2">"31"</span>, <span class="s2">"51"</span> <span class="o">]</span>,
          <span class="s2">"regress"</span>: <span class="o">[</span>240],
          <span class="s2">"remittance"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações de outro banco
        <span class="o">}</span>
        ...
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna um objeto JSON contendo todos os tipos de cobraça implementados pelo Cobrato.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="Shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
