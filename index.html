<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Cobrato</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["Shell"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="Shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li>Este projeto √© mantido por</li>
            <li><a href='#'>Myfreecomm</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="informa„ß„£es-b„°sicas">Informa√ß√£es b√°sicas</h1>

<h2 id="autentica„ß„£o">Autentica√ß√£o</h2>

<p>Antes de acessar o Cobrato, voc√™ deve criar uma conta em: Cobrato. Se voc√™ j√° tiver uma, voc√™ precisa ter o seu API token, voc√™ pode consegu√≠-lo nas configura√ß√µes de sua conta, o token √© requerido em todas as requisi√ß√µes via API, o token √© usado para identific√°-lo.</p>

<p>Autentica√ß√£o na API do Cobrato √© realizada utilizando HTTP Basic, Porem voc√™ n√£o vai usar sua senha e login como de costume, voc√™ ter√° que usar o token da API como sendo seu login e a senha em branco, (se o seu cliente HTTP requer uma senha, voc√™ pode digitar X).</p>
<pre class="highlight shell"><code>    Formato JSON

    EXEMPLO DE REQUISI√á√ÉO

      <span class="nv">$ </span>curl -i -u <span class="nv">$YOUR_API_TOKEN</span>:X <span class="se">\</span>
        -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
        -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
        -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
        -X GET https://app.cobrato.com/api/v1

    EXEMPLO DE RESPOSTA

    <span class="o">{</span>
      <span class="s2">"chave"</span>: <span class="s2">"valor"</span>
    <span class="o">}</span>

</code></pre>

<h2 id="formatos-de-requisi„ß„£o-e-resposta">Formatos de requisi√ß√£o e resposta</h2>

<aside class="notice">O √∫nico formato dispon√≠vel para requisi√ß√µes e respostas √© JSON.</aside>

<h2 id="fuso-hor„°rio">Fuso hor√°rio</h2>

<p>Todos os dados recebidos e enviados atrav√©s da API do Cobrato √© baseado no fuso hor√°rio UTC. No entanto um usu√°rio pode ter uma prefer√™ncia por outro. Este fuso hor√°rio vai ser utilizado para apresentar a resposta, isso n√£o afeta o resultado da resposta da API</p>

<p>Formatos de data e hora</p>

<p>Todas as datas e horas s√£o formatadas de acordo com ISO 8601 padr√£o, e sempre vai ser dada no fuso hor√°rio.</p>

<p>Voc√™ deve sempre fornecer os seus valores de data e hora no mesmo formato ISO 8601 e no fuso hor√°rio UTC.</p>

<table><thead>
<tr>
<th>Tipo</th>
<th>Formato</th>
<th>Exemplo</th>
</tr>
</thead><tbody>
<tr>
<td>Data</td>
<td>YYYY-mm-dd</td>
<td>2014-11-05</td>
</tr>
<tr>
<td>Data hora</td>
<td>YYYY-mm-ddTHH:MM:SSZ</td>
<td>2014-11-05T17:28:03Z</td>
</tr>
</tbody></table>

<h2 id="formato-num„©rico">Formato num√©rico</h2>

<aside class="notice">Todos os n√∫meros s√£o fornecidos tanto com n√∫meros inteiros, ponto flutuante nativos para JSON.</aside>

<h2 id="formato-num„©rico">Formato num√©rico</h2>

<aside class="notice">Todos os n√∫meros s√£o fornecidos tanto com n√∫meros inteiros, ponto flutuante nativos para JSON.</aside>

          <h1 id="benefici„°rio">Benefici√°rio</h1>
<pre class="highlight shell"><code>Benefici√°rio

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"Jo√£o Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lot√©rica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>√â poss√≠vel ter indeterminados benefici√°rios, e a eles que pertencem as contas banc√°rias, contas de cobran√ßa, e as pr√≥prias cobran√ßas do sistema. Podem ser tanto pessoas f√≠sicas como pessoas jur√≠dicas.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>tipo de identifica√ß√£o nacional (&lsquo;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>n√∫mero v√°lido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome completo do benefici√°rio</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>nome da cidade do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>uf do estado do domic√≠lio do benefici√°rio (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>bairro do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>rua do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>n√∫mero da rua do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>cep do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>complemento para o endere√ßo de domicilio do benefici√°rio</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links do benefici√°rio</td>
</tr>
</tbody></table>

<h2 id="informa„ß„µes-do-benefici„°rio">Informa√ß√µes do Benefici√°rio</h2>
<pre class="highlight shell"><code>Mostrar Benefici√°rio

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"Jo√£o Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lot√©rica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informa√ß√µes detalhadas do benefici√°rio informado em JSON.</p>

<h2 id="lista-de-todos-os-benefici„°rios">Lista de Todos os Benefici√°rios</h2>
<pre class="highlight shell"><code>Listar Benefici√°rios

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"payees"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes benefici√°rio 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes benefici√°rio 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todos os benefici√°rios pertencentes a sua Conta de Servi√ßo.</p>

<h2 id="cria„ß„£o-de-benefici„°rio">Cria√ß√£o de Benefici√°rio</h2>
<pre class="highlight shell"><code>Criar Benefici√°rio

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payees <span class="se">\</span>
    -d <span class="s1">'{
        "name": "Jo√£o Silva",
        "city": "Caxias do Sul",
        "national_identifier_type": "cpf",
        "national_identifier": "38031171513",
        "state": "RS",
        "street": "Rua Principal",
        "neighbourhood": "Centro",
        "number": "174",
        "zipcode": "95055-777"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"name"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"city"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"national_identifier_type"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span>,<span class="s2">"n√£o est√° inclu√≠do na lista"</span><span class="o">]</span>,
      <span class="s2">"state"</span>:[<span class="s2">"n√£o pode ficar em branco"</span>,<span class="s2">"n√£o possui o tamanho esperado (2 caracteres)"</span><span class="o">]</span>,
      <span class="s2">"neighbourhood"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"street"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"number"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"zipcode"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo benefici√°rio, retornando as informa√ß√µes do mesmo caso haja sucesso. Se houverem erros eles ser√£o informados no corpo da resposta.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identifica√ß√£o nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero v√°lido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do benefici√°rio</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> nome da cidade do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> uf do estado do domic√≠lio do benefici√°rio (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> rua do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero da rua do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional)  complemento para o endere√ßo de domicilio do benefici√°rio</td>
</tr>
</tbody></table>

<h2 id="atualiza„ß„£o-de-benefici„°rio">Atualiza√ß√£o de Benefici√°rio</h2>
<pre class="highlight shell"><code>Atualizar Benefici√°rio

DEFINI√á√ÉO

  PUT https://app.cobrato.com/api/v1/payees/:payee_id
  PATCH https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/payees/:payee_id <span class="se">\</span>
    -d <span class="s1">'{
        "city": "Farroupilha",
        "state": "RS"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICI√ÅRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

    <span class="o">{</span>
      <span class="s2">"errors"</span>:<span class="o">{</span>
        <span class="s2">"national_identifier_type"</span>:[<span class="s2">"n√£o est√° inclu√≠do na lista"</span><span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>

</code></pre>

<p>Atualiza o benefici√°rio determinado, retornando as informa√ß√µes do mesmo caso haja sucesso. Se houverem erros eles ser√£o informados no corpo da resposta. A requisi√ß√£o n√£o diferencia a utiliza√ß√£o dos verbos PUT e PATCH.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identifica√ß√£o nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero v√°lido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do benefici√°rio</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> nome da cidade do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> uf do estado do domic√≠lio do benefici√°rio (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> rua do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero da rua do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do domic√≠lio do benefici√°rio</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional)  complemento para o endere√ßo de domicilio do benefici√°rio</td>
</tr>
</tbody></table>

<h2 id="exclus„£o-de-benefici„°rio">Exclus√£o de Benefici√°rio</h2>
<pre class="highlight shell"><code>Excluir Benefici√°rio

DEFINI√á√ÉO

  DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICI√ÅRIO INEXISTENTE

    404 Not Found
</code></pre>

<p>Exclui determinado benefici√°rio e junto a ele todas suas contas de cobran√ßa, contas banc√°rias e as cobran√ßas. As mudan√ßas s√£o irrevers√≠veis.</p>

          <h1 id="conta-banc„°ria">Conta Banc√°ria</h1>
<pre class="highlight shell"><code>Conta Banc√°ria

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"payee_id"</span>:<span class="s2">"1"</span>,
    <span class="s2">"bank_code"</span>:<span class="s2">"001"</span>,
    <span class="s2">"agency"</span>:<span class="s2">"1606"</span>,
    <span class="s2">"agency_digit"</span>:<span class="s2">"3"</span>,
    <span class="s2">"account"</span>:<span class="s2">"91000"</span>,
    <span class="s2">"account_digit"</span>:<span class="s2">"7"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>As Contas Banc√°rias, pertencem aos seus benefici√°rios, sendo assim √© necess√°rio que sempre haja ao menos um benefici√°rio para cria√ß√£o de conta banc√°ria.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td>identificador do benefici√°rios no Cobrato</td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td>c√≥digo do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td>ag√™ncia da conta banc√°ria</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td>d√≠gito da ag√™ncia da conta banc√°ria (apenas utilizado pelo Banco do Brasil - 001)</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td>n√∫mero da conta banc√°ria</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td>d√≠gito do n√∫mero da conta banc√°ria (apenas n√£o utilizado pelo HSBC - 399)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da conta banc√°ria e de seu benefici√°rios</td>
</tr>
</tbody></table>

<h2 id="informa„ß„µes-da-conta-banc„°ria">Informa√ß√µes da Conta Banc√°ria</h2>
<pre class="highlight shell"><code>Mostrar Conta Banc√°ria

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"payee_id"</span>:<span class="s2">"1"</span>,
    <span class="s2">"bank_code"</span>:<span class="s2">"001"</span>,
    <span class="s2">"agency"</span>:<span class="s2">"1606"</span>,
    <span class="s2">"agency_digit"</span>:<span class="s2">"3"</span>,
    <span class="s2">"account"</span>:<span class="s2">"91000"</span>,
    <span class="s2">"account_digit"</span>:<span class="s2">"7"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informa√ß√µes detalhadas da conta banc√°ria informada em JSON e tamb√©m a refer√™ncia ao seu benefici√°rio.</p>

<h2 id="lista-de-todas-as-contas-banc„°rias">Lista de Todas as Contas Banc√°rias</h2>
<pre class="highlight shell"><code>Listar Contas Banc√°rias

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"bank_accounts"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes conta banc√°ria 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes conta banc√°ria 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas banc√°rias em que seus benefici√°rios pertencentem a sua Conta de Servi√ßo.</p>

<h2 id="cria„ß„£o-de-conta-banc„°ria">Cria√ß√£o de Conta Banc√°ria</h2>
<pre class="highlight shell"><code>Criar Conta Banc√°ria

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/bank_accounts <span class="se">\</span>
    -d <span class="s1">'{
          "payee_id": "1",
          "bank_code": "001",
          "agency":"1606",
          "agency_digit":"3",
          "account":"91000",
          "account_digit":"7"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span>,<span class="s2">"n√£o possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span>,<span class="s2">"n√£o √© um n√∫mero"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span>,<span class="s2">"n√£o √© um n√∫mero"</span><span class="o">]</span>,
        <span class="s2">"payee_id"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>


</code></pre>

<p>Cria um nova conta banc√°ria, retornando as informa√ß√µes da mesma caso haja sucesso. Se houverem erros eles ser√£o informados no corpo da resposta.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>payee_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> identificador do benefici√°rio no Cobrato em que a conta banc√°ria ir√° pertencer</td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> c√≥digo do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> ag√™ncia da conta banc√°ria</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td><strong>(requerido apenas pelo Banco do Brasil - 001)</strong> d√≠gito da ag√™ncia da conta banc√°ria</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero da conta banc√°ria</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido, com exce√ß√£o do HSBC - 399)</strong> d√≠gito do n√∫mero da conta banc√°ria</td>
</tr>
</tbody></table>

<h2 id="atualiza„ß„£o-de-conta-banc„°ria">Atualiza√ß√£o de Conta Banc√°ria</h2>
<pre class="highlight shell"><code>Atualizar Conta Banc√°ria

DEFINI√á√ÉO

  PUT https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id
  PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id <span class="se">\</span>
    -d <span class="s1">'{
          "agency":"1606",
          "agency_digit":"3"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANC√ÅRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"n√£o possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"n√£o √© um n√∫mero"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"n√£o √© um n√∫mero"</span><span class="o">]</span>,
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a conta banc√°ria determinada, retornando as informa√ß√µes da mesma caso haja sucesso. Se houverem erros eles ser√£o informados no corpo da resposta. A requisi√ß√£o n√£o diferencia a utiliza√ß√£o dos verbos PUT e PATCH.</p>

<p>Ao alterar campo &lsquo;bank_code&rsquo;, caso houvesse algum campo preenchido que de acordo com o novo banco dever√° ficar em branco, o Cobrato far√° automaticamente. Exemplo: ao alterar uma conta banc√°ria (&#39;bank_code&rsquo;) do Banco do Brasil (001) para o Bradesco (327), o campo &#39;agency_digit&rsquo; receber√° &#39;null&rsquo; como novo valor.</p>

<p>Altera√ß√µes nos campos &#39;bank_code&rsquo;, &#39;agency&rsquo;, &#39;agency_digit&rsquo;, &#39;account&rsquo; ou &#39;account_digit&rsquo; colocar√° a conta de cobran√ßa em homologa√ß√£o.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> c√≥digo do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> ag√™ncia da conta banc√°ria</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td><strong>(requerido apenas pelo Banco do Brasil - 001)</strong> d√≠gito da ag√™ncia da conta banc√°ria</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero da conta banc√°ria</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido, com exce√ß√£o do HSBC - 399)</strong> d√≠gito do n√∫mero da conta banc√°ria</td>
</tr>
</tbody></table>

<h2 id="exclus„£o-de-conta-banc„°ria">Exclus√£o de Conta Banc√°ria</h2>
<pre class="highlight shell"><code>Excluir Conta Banc√°ria

DEFINI√á√ÉO

  DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANC√ÅRIA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta banc√°ria e junto a ela todas suas contas de cobran√ßa, e cobran√ßas. As mudan√ßas s√£o irrevers√≠veis.</p>

<h2 id="carteiras-dispon„≠veis">Carteiras dispon√≠veis</h2>
<pre class="highlight shell"><code>Listar carteiras dispon√≠veis para Conta Banc√°ria

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"portfolio_codes"</span>: <span class="o">[</span>
      <span class="s2">"11"</span>,
      <span class="s2">"12"</span>,
      <span class="s2">"16"</span>,
      <span class="s2">"17"</span>,
      <span class="s2">"18"</span>,
      <span class="s2">"31"</span>,
      <span class="s2">"51"</span>
    <span class="o">]</span>,
    <span class="s2">"_links"</span>: <span class="o">{</span>
      <span class="s2">"rel"</span>: <span class="s2">"bank_account"</span>,
      <span class="s2">"method"</span>: <span class="s2">"GET"</span>,
      <span class="s2">"href"</span>: <span class="s2">"https://sandbox.cobrato.com/api/v1/charges/1"</span>
    <span class="o">}</span>
  <span class="o">}</span>

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANC√ÅRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Retorna todas as carteiras dispon√≠veis do banco de uma Conta Banc√°ria.</p>

          <h1 id="conta-de-cobran„ßa">Conta de Cobran√ßa</h1>
<pre class="highlight shell"><code>Conta de Cobran√ßa

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"portfolio_code"</span>: <span class="s2">"17"</span>,
    <span class="s2">"agreement_code"</span>: <span class="s2">"12345678"</span>,
    <span class="s2">"agreement_code_digit"</span>: <span class="s2">"1"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Conta Cobran√ßa"</span>,
    <span class="s2">"initial_number"</span>: 1,
    <span class="s2">"current_number"</span>: 1,
    <span class="s2">"end_number"</span>: 1000,
    <span class="s2">"status"</span>: <span class="s2">"pending"</span>,
    <span class="s2">"registered_charges"</span>: <span class="nb">true</span>,
    <span class="s2">"agreement_number"</span>: 4576361,
    <span class="s2">"remittance_cnab_pattern"</span>: 400,
    <span class="s2">"initial_remittance_number"</span>: 1,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>As Contas de Cobran√ßas, pertencem as suas contas banc√°rias, sendo assim √© necess√°rio que sempre haja ao menos uma conta banc√°ria para cria√ß√£o de conta de cobran√ßa. As valida√ß√µes nas contas de cobran√ßas s√£o de acordo com o banco, de sua conta banc√°ria.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>bank_account_id</td>
<td>integer</td>
<td>identificador da conta banc√°ria desta conta de cobran√ßa no Cobrato</td>
</tr>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td>c√≥digo de portf√≥lio</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td>c√≥digo de conv√™nio ou do benefici√°rio, de acordo com o banco. No caso do Ita√∫ deve ser igual ao campo &lsquo;account&rsquo; da conta banc√°ria</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td>verificador do c√≥digo de conv√™nio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome que identifica esta conta de cobra√ßa</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td>n√∫mero inicial do nosso n√∫mero, sendo atribu√≠do automaticamente e sequencialmente as cobran√ßas</td>
</tr>
<tr>
<td>current_number</td>
<td>integer</td>
<td>nosso n√∫mero atribu√≠do a √∫ltima cobran√ßa criada a partir desta conta de cobran√ßa</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>n√∫mero final do nosso n√∫mero, sendo o √∫ltimo n√∫mero a ser atribu√≠do, ap√≥s isso a sequ√™ncia √© reiniciada</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>caso for &#39;pending&rsquo; a conta ainda n√£o est√° homologada caso for &#39;ok&rsquo; a conta j√° consta como homologada</td>
</tr>
<tr>
<td>registered_charges</td>
<td>boolean</td>
<td>informa se a conta de cobran√ßa utiliza boletos registrados ou n√£o, sendo false por padr√£o</td>
</tr>
<tr>
<td>agreement_number</td>
<td>integer</td>
<td>n√∫mero do conv√™nio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>padr√£o utilizado no arquivo CNAB de remessa</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>n√∫mero inicial de remessa, ou seja, qual foi o √∫ltimo n√∫mero sequencial de remessa enviado para o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da conta de cobran√ßa e de sua conta banc√°ria</td>
</tr>
</tbody></table>

<h2 id="informa„ß„µes-da-conta-de-cobran„ßa">Informa√ß√µes da Conta de Cobran√ßa</h2>
<pre class="highlight shell"><code>Mostrar Conta de Cobran√ßa

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"portfolio_code"</span>: <span class="s2">"17"</span>,
    <span class="s2">"agreement_code"</span>: <span class="s2">"12345678"</span>,
    <span class="s2">"agreement_code_digit"</span>: <span class="s2">"1"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Conta Cobran√ßa"</span>,
    <span class="s2">"initial_number"</span>: 1,
    <span class="s2">"current_number"</span>: 1,
    <span class="s2">"end_number"</span>: 1000,
    <span class="s2">"status"</span>: <span class="s2">"pending"</span>,
    <span class="s2">"registered_charges"</span>: <span class="nb">true</span>,
    <span class="s2">"agreement_number"</span>: 4576361,
    <span class="s2">"remittance_cnab_pattern"</span>: 400,
    <span class="s2">"initial_remittance_number"</span>: 1,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informa√ß√µes detalhadas da conta de cobran√ßa informada em JSON e tamb√©m a refer√™ncia a sua conta banc√°ria.</p>

<h2 id="lista-de-todas-as-contas-de-cobran„ßa">Lista de Todas as Contas de Cobran√ßa</h2>
<pre class="highlight shell"><code>Listar Contas de Cobran√ßa

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charge_accounts"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes conta de cobran√ßa 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes conta de cobran√ßa 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas de cobran√ßas que pertencem a sua Conta de Servi√ßo.</p>

<h2 id="cria„ß„£o-de-conta-de-cobran„ßa">Cria√ß√£o de Conta de Cobran√ßa</h2>
<pre class="highlight shell"><code>Criar Conta de Cobran√ßa

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charge_accounts <span class="se">\</span>
    -d <span class="s1">'{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobran√ßa",
          "initial_number": "1",
          "end_number": "1000",
          "registered_charges": "true",
          "agreement_number": "4576361",
          "remittance_cnab_pattern": "400",
          "initial_remittance_number": "1"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"name"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"portfolio_code"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"agreement_code"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"agreement_code_digit"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um nova conta de cobran√ßa, retornando as informa√ß√µes da mesma caso haja sucesso. Se houverem erros eles ser√£o informados no corpo da resposta.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>bank_account_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> c√≥digo de identifica√ß√£o da conta banc√°ria em que a conta de cobran√ßa ir√° pertencer</td>
</tr>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td><strong>(requerido)</strong> c√≥digo de portf√≥lio, valida√ß√£o conforme o banco</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td><strong>(requerido, com exce√ß√£o do Ita√∫ onde √© preenchido automaticamente)</strong> c√≥digo de conv√™nio ou do benefici√°rio, de acordo com o banco</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td><strong>(requerido, com exce√ß√£o do HSBC e Ita√∫, sendo preenchido automaticamente para o √∫ltimo)</strong> verificador do c√≥digo de conv√™nio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta conta de cobra√ßa</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td><strong>(requerido)</strong> n√∫mero inicial do nosso n√∫mero, sendo atribu√≠do automaticamente e sequencialmente √†s cobran√ßas</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>(opcional) n√∫mero final do nosso n√∫mero, sendo o √∫ltimo n√∫mero a ser atribu√≠do, ap√≥s isso a sequ√™ncia √© reiniciada</td>
</tr>
<tr>
<td>registered_charges</td>
<td>boolean</td>
<td>(opcional) informa se a conta de cobran√ßa utiliza boletos registrados ou n√£o, sendo false por padr√£o</td>
</tr>
<tr>
<td>agreement_number</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) n√∫mero do conv√™nio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) padr√£o utilizado no arquivo CNAB de remessa. Os valores permitidos s√£o 240 ou 400</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>(opcional) n√∫mero inicial de remessa, ou seja, qual foi o √∫ltimo n√∫mero sequencial de remessa enviado para o banco (apenas para o Bradesco). Por padr√£o o valor √© 1</td>
</tr>
</tbody></table>

<h2 id="atualiza„ß„£o-de-conta-de-cobran„ßa">Atualiza√ß√£o de Conta de Cobran√ßa</h2>
<pre class="highlight shell"><code>Atualizar Conta de Cobran√ßa

DEFINI√á√ÉO

  PUT https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
  PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id <span class="se">\</span>
    -d <span class="s1">'{
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Novo Nome"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRAN√áA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"n√£o possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"n√£o √© um n√∫mero"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"n√£o √© um n√∫mero"</span><span class="o">]</span>,
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a conta de cobran√ßa determinada, retornando as informa√ß√µes da mesma caso haja sucesso. Se houverem erros eles ser√£o informados no corpo da resposta. A requisi√ß√£o n√£o diferencia a utiliza√ß√£o dos verbos PUT e PATCH.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td><strong>(requerido)</strong> c√≥digo de portf√≥lio, valida√ß√£o conforme o banco</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td><strong>(requerido, com exce√ß√£o do Ita√∫ onde √© preenchido automaticamente)</strong> c√≥digo de conv√™nio ou do benefici√°rio, de acordo com o banco</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td><strong>(requerido, com exce√ß√£o do HSBC e Ita√∫, sendo preenchido automaticamente para o √∫ltimo)</strong> verificador do c√≥digo de conv√™nio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta conta de cobra√ßa</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td><strong>(requerido)</strong> n√∫mero inicial do nosso n√∫mero, sendo atribu√≠do automaticamente e sequencialmente √†s cobran√ßas</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>(opcional) n√∫mero final do nosso n√∫mero, sendo o √∫ltimo n√∫mero a ser atribu√≠do, ap√≥s isso a sequ√™ncia √© reiniciada</td>
</tr>
<tr>
<td>registered_charges</td>
<td>boolean</td>
<td>(opcional) informa se a conta de cobran√ßa utiliza boletos registrados ou n√£o, sendo false por padr√£o</td>
</tr>
<tr>
<td>agreement_number</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) n√∫mero do conv√™nio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>(opcional, requerido apenas se registered_charges for <code class="prettyprint">true</code>) padr√£o utilizado no arquivo CNAB de remessa. Os valores permitidos s√£o 240 ou 400</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>(opcional) n√∫mero inicial de remessa, ou seja, qual foi o √∫ltimo n√∫mero sequencial de remessa enviado para o banco (apenas para o Bradesco). Por padr√£o o valor √© 1</td>
</tr>
</tbody></table>

<h2 id="exclus„£o-de-conta-de-cobran„ßa">Exclus√£o de Conta de Cobran√ßa</h2>
<pre class="highlight shell"><code>Excluir Conta de Cobran√ßa

DEFINI√á√ÉO

  DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRAN√áA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta de cobran√ßa e junto a ela todas suas cobran√ßas. As mudan√ßas s√£o irrevers√≠veis.</p>

<h2 id="m„©todos-de-pagamentos-dispon„≠veis">M√©todos de Pagamentos Dispon√≠veis</h2>
<pre class="highlight shell"><code>M√©todos de Pagamentos Dispon√≠veis

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/charge_accounts/available_payment_methods

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_accounts/available_payment_methods

EXEMPLO DE ESTADO DA RESPOTA

  200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"payment_methods"</span>:
    <span class="o">[</span>
      <span class="s2">"billet"</span>,
      <span class="s2">"cnab"</span>
    <span class="o">]</span>
  <span class="o">}</span>


</code></pre>

<p>Mostra todos os m√©todos de pagamentos dispon√≠veis pelo Cobrato.</p>

          <h1 id="cobran„ßa">Cobran√ßa</h1>
<pre class="highlight shell"><code>Cobran√ßa

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"due_date"</span>:<span class="s2">"2015-02-14"</span>,
    <span class="s2">"document_kind"</span>:<span class="s2">"DV"</span>,
    <span class="s2">"document_date"</span>:null,
    <span class="s2">"document_number"</span>:null,
    <span class="s2">"custom_our_number"</span>: <span class="s2">"true"</span>,
    <span class="s2">"our_number"</span>:<span class="s2">"0"</span>,
    <span class="s2">"our_number_digit"</span>:null,
    <span class="s2">"total_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"instructions"</span>:<span class="s2">"Pag√°vel em qualquer ag√™ncia at√© data do vencimento."</span>,
    <span class="s2">"demonstrative"</span>:<span class="s2">"N√£o receber ap√≥s o vencimento."</span>,
    <span class="s2">"payer_emails"</span>:[<span class="s2">"myemail@gmail.com"</span><span class="o">]</span>,
    <span class="s2">"payer_info"</span>:<span class="s2">"Empresa A - CNPJ X"</span>,
    <span class="s2">"received"</span>:true,
    <span class="s2">"received_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"received_at"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"processing_date"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"for_homologation"</span>:true,
    <span class="s2">"has_cnab_remittance"</span>:false,
    <span class="s2">"registered"</span>: <span class="nb">true</span>,
    <span class="s2">"payer_national_identifier_type"</span>: <span class="s2">"cpf"</span>,
    <span class="s2">"payer_national_identifier"</span>: <span class="s2">"12345678909"</span>,
    <span class="s2">"payer_name"</span>: <span class="s2">"Jonh Doe"</span>,
    <span class="s2">"payer_number"</span>: <span class="s2">"43"</span>,
    <span class="s2">"payer_complement"</span>: <span class="s2">"8 andar"</span>,
    <span class="s2">"payer_street"</span>: <span class="s2">"Rua do Carmo"</span>,
    <span class="s2">"payer_neighbourhood"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"payer_zipcode"</span>: <span class="s2">"22230062"</span>,
    <span class="s2">"payer_city"</span>: <span class="s2">"Rio de Janeiro"</span>,
    <span class="s2">"payer_state"</span>: <span class="s2">"RJ"</span>,
    <span class="s2">"status"</span>: <span class="s2">"not_generated_remittance"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"receive"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/receive"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"deliver"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/deliver_billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"charge_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"billet"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/billet"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>As Cobran√ßas, pertencem as suas contas de cobran√ßa, sendo assim √© necess√°rio que sempre haja ao menos uma conta de cobran√ßa homologada para a cria√ß√£o de cobran√ßas. Ao criar uma conta de cobran√ßa √© automaticamente gerada uma cobran√ßa para homologar a conta.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>charge_account_id</td>
<td>integer</td>
<td>identificador da conta de cobran√ßa a qual esta cobra√ßa pertece</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>data de vencimento da cobranca</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>esp√©cie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Servi√ßo), NP (Nota Promiss√≥ria) ou DV (Diversos)</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>data de emiss√£o do documento</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td>n√∫mero do documento, tamb√©m chamado de &ldquo;seu n√∫mero&rdquo;, √© o n√∫mero utilizado e controlado pelo benefici√°rio para identificar o t√≠tulo de cobran√ßa</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>nosso n√∫mero</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>digito do verificador do nosso n√∫mero</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>indica se a cobran√ßa utiliza um &ldquo;nosso n√∫mero&rdquo; customizado. O valor padr√£o √© false, mas caso definido true, o campo &lsquo;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td>valor total do boleto</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>instru√ß√µes de pagamento do boleto, por padr√£o &ldquo;Pag√°vel em qualquer ag√™ncia at√© data do vencimento.&rdquo;</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>demonstrativo do Boleto, por padr√£o &ldquo;N√£o receber ap√≥s o vencimento.&rdquo;</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>emails de quem ir√° pagar o boleto</td>
</tr>
<tr>
<td>payer_info</td>
<td>string</td>
<td>informa√ß√µes gerais de quem ir√° pagar a cobra√ßa (p.ex. nome, documento, endere√ßo)</td>
</tr>
<tr>
<td>received</td>
<td>boolean</td>
<td>indica se a cobran√ßa foi recebida</td>
</tr>
<tr>
<td>received_amount</td>
<td>decimal</td>
<td>valor recebido</td>
</tr>
<tr>
<td>received_at</td>
<td>date</td>
<td>dia em que a cobra√ßa foi recebida</td>
</tr>
<tr>
<td>processing_date</td>
<td>date</td>
<td>data de gera√ß√£o do boleto</td>
</tr>
<tr>
<td>for_homologation</td>
<td>boolean</td>
<td>indica se √© uma cobran√ßa gerada automaticamente pelo sistema para ser utilizada na homologa√ß√£o da conta de cobran√ßa</td>
</tr>
<tr>
<td>has_cnab_remittance</td>
<td>boolean</td>
<td>para cobran√ßas onde o &ldquo;payment_method&rdquo; √© &ldquo;cnab&rdquo;, identifica se o arquivo de remessa j√° foi gerado</td>
</tr>
<tr>
<td>registered</td>
<td>boolean</td>
<td>indica se a cobran√ßa √© registrada ou n√£o. Por padr√£o √© <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td>tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td>documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td>nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>n√∫mero do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>complemento do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>rua do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>bairro do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>cep do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>cidade do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>sigla do estado do endere√ßo do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>status em que a cobran√ßa se encontra (not_generated_remittance, generated_remittance, registered)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionados √† cobra√ßa</td>
</tr>
</tbody></table>

<h2 id="informa„ß„µes-da-cobran„ßa">Informa√ß√µes da Cobran√ßa</h2>
<pre class="highlight shell"><code>Mostrar Cobran√ßa

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"due_date"</span>:<span class="s2">"2015-02-14"</span>,
    <span class="s2">"document_kind"</span>:<span class="s2">"DV"</span>,
    <span class="s2">"document_date"</span>:null,
    <span class="s2">"document_number"</span>:null,
    <span class="s2">"custom_our_number"</span>: <span class="s2">"true"</span>,
    <span class="s2">"our_number"</span>:<span class="s2">"0"</span>,
    <span class="s2">"our_number_digit"</span>:null,
    <span class="s2">"total_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"instructions"</span>:<span class="s2">"Pag√°vel em qualquer ag√™ncia at√© data do vencimento."</span>,
    <span class="s2">"demonstrative"</span>:<span class="s2">"N√£o receber ap√≥s o vencimento."</span>,
    <span class="s2">"payer_emails"</span>:[<span class="s2">"myemail@gmail.com"</span><span class="o">]</span>,
    <span class="s2">"payer_info"</span>:<span class="s2">"Empresa A - CNPJ X"</span>,
    <span class="s2">"received"</span>:true,
    <span class="s2">"received_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"received_at"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"processing_date"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"for_homologation"</span>:true,
    <span class="s2">"has_cnab_remittance"</span>:false,
    <span class="s2">"registered"</span>: <span class="nb">true</span>,
    <span class="s2">"payer_national_identifier_type"</span>: <span class="s2">"cpf"</span>,
    <span class="s2">"payer_national_identifier"</span>: <span class="s2">"12345678909"</span>,
    <span class="s2">"payer_name"</span>: <span class="s2">"Jonh Doe"</span>,
    <span class="s2">"payer_number"</span>: <span class="s2">"43"</span>,
    <span class="s2">"payer_complement"</span>: <span class="s2">"8 andar"</span>,
    <span class="s2">"payer_street"</span>: <span class="s2">"Rua do Carmo"</span>,
    <span class="s2">"payer_neighbourhood"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"payer_zipcode"</span>: <span class="s2">"22230062"</span>,
    <span class="s2">"payer_city"</span>: <span class="s2">"Rio de Janeiro"</span>,
    <span class="s2">"payer_state"</span>: <span class="s2">"RJ"</span>,
    <span class="s2">"status"</span>: <span class="s2">"not_generated_remittance"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"receive"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/receive"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"deliver"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/deliver_billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"charge_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"billet"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/billet"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informa√ß√µes detalhadas da cobran√ßa informada em JSON e tamb√©m a refer√™ncia a sua conta de cobran√ßa.</p>

<aside class="notice">
  O conte√∫do do n√≥ &ldquo;_links&rdquo; ir√° variar de acordo com o status da cobran√ßa. Al√©m dos itens b√°sicos mostrados no exemplo de resposta ao lado, se a cobra√ßa tiver sido recebida, ir√° conter o seguinte link:

  <br><br>
  <p>
    <code>
    {"rel":"receive","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/receive"}
    </code>
  </p>

  <p>Caso contr√°rio, ir√° conter este link:</p>

  <p>
    <code>
    {"rel":"undo_receive","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/undo_receive"}
    </code>
  </p>
</aside>

<h2 id="lista-de-todas-as-cobran„ßa">Lista de Todas as Cobran√ßa</h2>
<pre class="highlight shell"><code>

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes cobran√ßa 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes cobran√ßa 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as cobran√ßas que pertencem a sua Conta de Servi√ßo.</p>

<h2 id="cria„ß„£o-de-cobran„ßa">Cria√ß√£o de Cobran√ßa</h2>
<pre class="highlight shell"><code>Criar Cobran√ßa

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges <span class="se">\</span>
    -d <span class="s1">'{
          "charge_account_id": 1,
          "due_date":"2015-02-14",
          "document_kind":"DV",
          "our_number":"12345678",
          "total_amount":"10.07",
          "payer_emails":["myemail@gmail.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"charge_account_id"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"our_number"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"total_amount"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"document_kind"</span>:[<span class="s2">"n√£o pode ficar em branco"</span>,<span class="s2">"n√£o est√° inclu√≠do na lista"</span><span class="o">]</span>,
        <span class="s2">"due_date"</span>:[<span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um nova cobran√ßa, caso haja sucesso retornar√° as informa√ß√µes da mesma e ser√° gerado seu boleto. Se houverem erros eles ser√£o informados no corpo da resposta.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>charge_account_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> c√≥digo de identifica√ß√£o da conta banc√°ria em que a conta de cobran√ßa ir√° pertencer</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobran√ßa</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td><strong>(requerido)</strong> esp√©cie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Servi√ßo), NP (Nota Promiss√≥ria) ou DV (Diversos)</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor total do boleto</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero do documento, tamb√©m chamado de &ldquo;seu n√∫mero&rdquo;, √© o n√∫mero utilizado e controlado pelo benefici√°rio para identificar o t√≠tulo de cobran√ßa</td>
</tr>
<tr>
<td>payer_info</td>
<td>string</td>
<td><strong>(requerido)</strong> nome, documento e endere√ßo de quem ir√° pagar a cobra√ßa (pode ser 3 linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(opcional) emails de quem ir√° pagar o boleto</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>(opcional) data de emiss√£o do documento</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>(opcional) nosso n√∫mero. Caso n√£o informado, √© atribu√≠do automaticamente pelo sistema</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>(opcional) digito do verificador do nosso n√∫mero</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>(opcional) indica se a cobran√ßa utiliza um &ldquo;nosso n√∫mero&rdquo; customizado. O valor padr√£o √© false, mas caso definido true, o campo &#39;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>(opcional) instru√ß√µes de pagamento do boleto, por padr√£o &ldquo;Pag√°vel em qualquer ag√™ncia at√© data do vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>(opcional) demonstrativo do Boleto, por padr√£o &ldquo;N√£o receber ap√≥s o vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>registered</td>
<td>boolean</td>
<td>(opcional) indica se a cobran√ßa √© registrada ou n√£o. Por padr√£o √© <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) n√∫mero do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) complemento do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) rua do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) bairro do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cep do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cidade do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) sigla do estado do endere√ßo do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="atualiza„ß„£o-de-cobran„ßa">Atualiza√ß√£o de Cobran√ßa</h2>
<pre class="highlight shell"><code>Atualizar Cobran√ßa

DEFINI√á√ÉO

  PUT https://app.cobrato.com/api/v1/charges/:charge_id
  PATCH https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charges/:charge_id <span class="se">\</span>
    -d <span class="s1">'{
          "document_date":"2015-02-02",
          "document_number":"123456789",
          "payer_emails":["myemail@gmail.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRAN√áA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span><span class="s2">"document_kind"</span>:[<span class="s2">"n√£o est√° inclu√≠do na lista"</span><span class="o">]}</span>
  <span class="o">}</span>

Exclus√£o de Cobran√ßa

Exclui determinada cobran√ßa. As mudan√ßas s√£o irrevers√≠veis, e n√£o ser√° mais poss√≠vel receber o boleto da cobran√ßa exclu√≠da!


</code></pre>

<p>Atualiza a cobran√ßa determinada, caso haja sucesso retornar√° as informa√ß√µes da mesma e ser√° gerado um novo boleto sobrescrevendo o anterior. Se houverem erros eles ser√£o informados no corpo da resposta. A requisi√ß√£o n√£o diferencia a utiliza√ß√£o dos verbos PUT e PATCH.</p>

<aside class="warning">
N√£o √© poss√≠vel atualizar uma cobran√ßa ap√≥s seu recebimento, para isso √© necess√°rio desfazer o recebimento da mesma!
</aside>

<aside class="notice">
Os campos 'received&rsquo;, 'received_at&rsquo; e 'received_amount&rsquo;, n√£o s√£o alterados via atualiza√ß√£o de cobran√ßa, apenas no recebimento ou desfazendo o recebimento da mesma.
</aside>

<aside class="notice">
O campo 'has_cnab_remittance&rsquo; √© alterado, apenas em cobran√ßas em que o 'payment_method&rsquo; √© 'cnab&rsquo;, quando a gerado o arquivo de remessa para a cobran√ßa.
</aside>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobran√ßa</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td><strong>(requerido)</strong> esp√©cie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Servi√ßo), NP (Nota Promiss√≥ria) ou DV (Diversos)</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor total do boleto</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td><strong>(requerido)</strong> n√∫mero do documento, tamb√©m chamado de &ldquo;seu n√∫mero&rdquo;, √© o n√∫mero utilizado e controlado pelo benefici√°rio para identificar o t√≠tulo de cobran√ßa</td>
</tr>
<tr>
<td>payer_info</td>
<td>string</td>
<td><strong>(requerido)</strong> nome, documento e endere√ßo de quem ir√° pagar a cobra√ßa (pode ser 3 linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(opcional) emails de quem ir√° pagar o boleto</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>(opcional) data de emiss√£o do documento</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>(opcional) nosso n√∫mero. Caso n√£o informado, √© atribu√≠do automaticamente pelo sistema</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>(opcional) digito do verificador do nosso n√∫mero</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>(opcional) indica se a cobran√ßa utiliza um &ldquo;nosso n√∫mero&rdquo; customizado. O valor padr√£o √© false, mas caso definido true, o campo &#39;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>(opcional) instru√ß√µes de pagamento do boleto, por padr√£o &ldquo;Pag√°vel em qualquer ag√™ncia at√© data do vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>(opcional) demonstrativo do Boleto, por padr√£o &ldquo;N√£o receber ap√≥s o vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>registered</td>
<td>boolean</td>
<td>(opcional) indica se a cobran√ßa √© registrada ou n√£o. Por padr√£o √© <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) n√∫mero do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) complemento do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) rua do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) bairro do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cep do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) cidade do endere√ßo do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>(opcional, requerido se registered for <code class="prettyprint">true</code>) sigla do estado do endere√ßo do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="exclus„£o-de-cobran„ßa">Exclus√£o de Cobran√ßa</h2>
<pre class="highlight shell"><code>Excluir Cobran√ßa

DEFINI√á√ÉO

  DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM COBRAN√áA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada cobran√ßa. As mudan√ßas s√£o irrevers√≠veis, e n√£o ser√° mais poss√≠vel receber o boleto da cobran√ßa exclu√≠da!</p>

<h2 id="recebimento-de-cobran„ßa">Recebimento de Cobran√ßa</h2>
<pre class="highlight shell"><code>Receber Cobran√ßa

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/receive

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/receive <span class="se">\</span>
    -d <span class="s1">'{
         "received_at": "2015-02-06",
         "received_amount": "9.57"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRAN√áA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"received_at"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"received_amount"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Marca determinada cobran√ßa como recebida, retornando JSON contendo as informa√ß√µes da cobran√ßa em caso de sucesso ou os erros, caso haja algum.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>received_at</td>
<td>date</td>
<td><strong>(requerido)</strong> data de pagamento da cobran√ßa</td>
</tr>
<tr>
<td>received_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor recebido da cobran√ßa</td>
</tr>
</tbody></table>

<h2 id="desfazer-recebimento-de-cobran„ßa">Desfazer Recebimento de Cobran√ßa</h2>
<pre class="highlight shell"><code>Desfazer Recebimento de Cobran√ßa

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/undo_receive

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/undo_receive

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRAN√áA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"received"</span>: <span class="o">[</span>
        <span class="s2">"Imposs√≠vel cancelar o recebimento de uma cobran√ßa n√£o recebida!"</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Marca determinada cobran√ßa como n√£o recebida, retornando JSON contendo as informa√ß√µes da cobran√ßa em caso de sucesso ou os erros, caso haja algum.</p>

<h2 id="boleto-da-cobran„ßa">Boleto da Cobran√ßa</h2>
<pre class="highlight shell"><code>Mostrar Boleto da Cobran√ßa <span class="o">(</span>URL<span class="o">)</span>

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/charges/:charge_id/billet

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges/:charge_id/billet

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRAN√áA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/billets/1/6186_08033_1445001056.pdf?Expires=1445034829"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do boleto de determinada cobra√ßa</p>

<aside class="warning">
As URLs disponibilizadas s√£o v√°lidas por apenas 60 minutos. Sendo assim, n√£o armazene o retorno e sempre que for necess√°rio realize uma nova chamada √† API.
</aside>

<h2 id="envio-de-boleto-da-cobran„ßa">Envio de Boleto da Cobran√ßa</h2>
<pre class="highlight shell"><code>Enviar Boleto da Cobran√ßa

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/deliver_billet

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/deliver_billet <span class="se">\</span>
    -d <span class="s1">'{
         "to": ["email1@host.com","email1@host.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRAN√áA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM EMAIL N√ÉO CADASTRADO E N√ÉO INFORMADO

      422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"payer_emails"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Envia o boleto da cobran√ßa por email, gerando o mesmo caso necess√°rio. √â enviado para os emails informados, ou ent√£o os cadastrados na cobran√ßa.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>to</td>
<td>array of string</td>
<td><strong>(requerido)</strong> emails que receber√£o o boleto ao inv√©s dos emails cadastrados na cobran√ßa</td>
</tr>
</tbody></table>

          <h1 id="cnab-de-remessa">CNAB de Remessa</h1>
<pre class="highlight shell"><code>CNAB de Remessa

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1/file"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charges"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"http://localhost:3000/api/v1/remittance_cnabs/1/charges"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Os Arquivos CNAB de Remessa s√£o arquivos enviados para o banco com o objetivo de registrar novos t√≠tulos, podendo ser gerado a partir de uma ou mais Cobran√ßas. Se forem enviadas Cobran√ßas de Contas de Cobran√ßas diferentes, ser√° gerado um CNAB de remessa para cada Conta de Cobran√ßa.</p>

<aside class="warning">
A utiliza√ß√£o desta API n√£o √© autorizada a contas com o plano <strong>Gratuito</strong>, resultando na resposta com o estado <strong>403 Forbidden</strong>!
</aside>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>identificador do CNAB de remessa</td>
</tr>
<tr>
<td>charge_account_id</td>
<td>string</td>
<td>identificador da conta de cobran√ßa no Cobrato</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>situa√ß√£o da remessa, podendo ser &ldquo;processing&rdquo; (processando), &ldquo;processed&rdquo; (processado) e &ldquo;processing_error&rdquo; (erro de processamento)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionado CNAB de remessa</td>
</tr>
</tbody></table>

<h2 id="informa„ß„µes-do-cnab-de-remessa">Informa√ß√µes do CNAB de Remessa</h2>
<pre class="highlight shell"><code>Mostrar CNAB de Remessa

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA 

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 1,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1/file"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charges"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"http://localhost:3000/api/v1/remittance_cnabs/1/charges"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informa√ß√µes detalhadas em JSON do CNAB de remessa informado.</p>

<h2 id="lista-de-todas-as-cnabs-de-remessa">Lista de Todas as CNABs de Remessa</h2>
<pre class="highlight shell"><code>Listar CNABs de Remessa

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"remittance_cnabs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes <span class="k">do </span>CNAB de remessa 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes <span class="k">do </span>CNAB de remessa 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os CNABs de remessa que pertencem a sua Conta de Servi√ßo.</p>

<h2 id="cria„ß„£o-de-arquivo-cnab-de-remessa">Cria√ß√£o de Arquivo CNAB de Remessa</h2>
<pre class="highlight shell"><code>Criar Arquivo CNAB de Remessa

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/remittance_cnabs <span class="se">\</span>
    -D <span class="s1">'{
        "charge_ids": [12, 13, 15, 18]
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Criated

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"charge_ids"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria novo(s) Arquivo(s) CNAB de Remessa, retornando as informa√ß√µes do mesmo caso haja sucesso. Se houverem erros, eles ser√£o informados no corpo da resposta. Pode ser gerado a partir de uma ou mais Cobran√ßas. Se forem enviadas Cobran√ßas de Contas de Cobran√ßas diferentes, ser√° gerado um CNAB de remessa para cada Conta de Cobran√ßa.</p>

<p>Os Arquivos CNAB de Remessa podem ser criados a partir de uma ou mais cobra√ßas que ainda n√£o possuem boleto ou outro arquivo de remessa associado.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>charge_ids</td>
<td>array of integers</td>
<td><strong>(requerido)</strong> Lista com os ids das cobran√ßas que devem ser associadas ao Arquivo CNAB de Remessa</td>
</tr>
</tbody></table>

<h2 id="exclus„£o-de-cnab-de-remessa">Exclus√£o de CNAB de Remessa</h2>
<pre class="highlight shell"><code>Excluir CNAB de Remessa

DEFINI√á√ÉO

  DELETE https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CNAB DE REMESSA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado CNAB de remessa. A exclus√£o √© irrevers√≠vel.</p>

<h2 id="arquivo-do-cnab-de-remessa">Arquivo do CNAB de Remessa</h2>
<pre class="highlight shell"><code>Mostrar Arquivo <span class="k">do </span>CNAB de Remessa <span class="o">(</span>URL<span class="o">)</span>

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/file

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/file

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CNAB DE REMESSA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/remittance_cnabs/cnabs/1/B425065A.RET?AWSAccessKeyId=AKIAIRJFH3YRXV5YRVTQ&amp;Expires=1452277155&amp;Signature=IJ1P%2Bc%2F9vC%2FKlBWuHGIBEl%2BAHKk%3D"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do arquivo de determinado CNAB de remessa.</p>

<aside class="warning">
As URLs disponibilizadas s√£o v√°lidas por apenas 60 minutos. Sendo assim, n√£o armazene o remessa e sempre que for necess√°rio realize uma nova chamada √† API.
</aside>

<h2 id="lista-de-todas-as-cobran„ßa-do-arquivo-de-remessa">Lista de Todas as Cobran√ßa do Arquivo de Remessa</h2>
<pre class="highlight shell"><code>

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/charges

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes cobran√ßa 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes cobran√ßa 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as cobran√ßas que pertencem ao CNAB de remessa informado.</p>

          <h1 id="cnab-de-retorno">CNAB de Retorno</h1>
<pre class="highlight shell"><code>CNAB de Retorno

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 9,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"report"</span>: <span class="o">{</span>
      <span class="s2">"charges_not_found"</span>: 0,
      <span class="s2">"received_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 46,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/46"</span> <span class="o">}]</span>
      <span class="o">}]</span>,
      <span class="s2">"registered_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 45,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/45"</span> <span class="o">}]</span>
      <span class="o">}]</span>
    <span class="o">}</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1/file"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Os arquivos CNABs de retorno, pertencem a uma determinada conta de cobran√ßa, contendo informa√ß√µes de uma ou mais cobran√ßas desta conta.</p>

<aside class="warning">
A utiliza√ß√£o desta API n√£o √© autorizada a contas com o plano <strong>Gratuito</strong>, resultando na resposta com o estado <strong>403 Forbidden</strong>!
</aside>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>identificador do CNAB de retorno</td>
</tr>
<tr>
<td>charge_account_id</td>
<td>string</td>
<td>identificador da conta de cobran√ßa no Cobrato</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>situa√ß√£o do arquivo CNAB, podendo ser &ldquo;processing&rdquo; (processando), &ldquo;processed&rdquo; (processado) e &ldquo;processing_error&rdquo; (erro de processamento)</td>
</tr>
<tr>
<td>report</td>
<td>string</td>
<td>relat√≥rio de processamento do arquivo CNAB, os par√¢metros do relat√≥rio se encontram na tabela abaixo</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionado CNAB de retorno</td>
</tr>
</tbody></table>

<p><strong>Par√¢metros do Relat√≥rio de Processamento</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>charges_not_found</td>
<td>integer</td>
<td>Quantidade de cobran√ßas que estavam no CNAB, mas n√£o foram localizadas no sistema</td>
</tr>
<tr>
<td>received_charges</td>
<td>array of objects</td>
<td>Informa√ß√µes das cobran√ßas recebidas pelo CNAB, contendo o c√≥digo identificador e link</td>
</tr>
<tr>
<td>registered_charges</td>
<td>array of objects</td>
<td>Informa√ß√µes das cobran√ßas registradas pelo CNAB, contendo o c√≥digo identificador e link</td>
</tr>
</tbody></table>

<h2 id="informa„ß„µes-do-cnab-de-retorno">Informa√ß√µes do CNAB de Retorno</h2>
<pre class="highlight shell"><code>Mostrar CNAB de Retorno

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA 

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_account_id"</span>: 9,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"report"</span>: <span class="o">{</span>
      <span class="s2">"charges_not_found"</span>: 0,
      <span class="s2">"received_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 46,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/46"</span> <span class="o">}]</span>
      <span class="o">}]</span>,
      <span class="s2">"registered_charges"</span>: <span class="o">[{</span>
        <span class="s2">"id"</span>: 45,
        <span class="s2">"_links"</span>: <span class="o">[{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charges/45"</span> <span class="o">}]</span>
      <span class="o">}]</span>
    <span class="o">}</span>,
    <span class="s2">"_links"</span>: 
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_account"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/1"</span><span class="o">}</span>, 
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1/file"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informa√ß√µes detalhadas em JSON do CNAB de retorno informado.</p>

<h2 id="lista-de-todas-as-cnabs-de-retorno">Lista de Todas as CNABs de Retorno</h2>
<pre class="highlight shell"><code>Listar CNABs de Retorno

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"regress_cnabs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes <span class="k">do </span>CNAB de retorno 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes <span class="k">do </span>CNAB de retorno 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os CNABs de retorno que pertencem a sua Conta de Servi√ßo.</p>

<h2 id="cria„ß„£o-de-cnab-de-retorno">Cria√ß√£o de CNAB de Retorno</h2>
<pre class="highlight shell"><code>Criar CNAB de Retorno

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/regress_cnabs <span class="se">\</span>
    -d <span class="s1">'{
          "charge_account_id": 1,
          "cnabs": {
            "content":      "MDJSRVRPUk5PMDFDT0JSQU5DQSAgICAgICAzMTMwMDAyMjY5OTAgICA...",
            "content_type": "text/plain"
            "filename":     "example.RET"
          }
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    202 Accepted

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"charge_account_id"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"cnabs"</span>: <span class="o">[</span><span class="s2">"n√£o pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um CNAB de retorno inicia o processamento do arquivo.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>charge_account_id</td>
<td>string</td>
<td><strong>(requerido)</strong> identificador da conta de cobran√ßa em que o CNAB pertence</td>
</tr>
<tr>
<td>cnabs</td>
<td>object</td>
<td><strong>(requerido)</strong> dados do arquivo CNAB de retorno. O &ldquo;content&rdquo; deve ser uma string com o conte√∫do do arquivo codificado em Base64</td>
</tr>
</tbody></table>

<h2 id="exclus„£o-de-cnab-de-retorno">Exclus√£o de CNAB de retorno</h2>
<pre class="highlight shell"><code>Excluir CNAB de retorno

DEFINI√á√ÉO

  DELETE https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANC√ÅRIA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado CNAB de retorno. A exclus√£o √© irrevers√≠vel.</p>

<h2 id="arquivo-do-cnab-de-retorno">Arquivo do CNAB de Retorno</h2>
<pre class="highlight shell"><code>Mostrar Arquivo <span class="k">do </span>CNAB de Retorno <span class="o">(</span>URL<span class="o">)</span>

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/regress_cnabs/:id/file

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs/:id/file

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRAN√áA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/regress_cnabs/cnabs/1/B425065A.RET?AWSAccessKeyId=AKIAIRJFH3YRXV5YRVTQ&amp;Expires=1452277155&amp;Signature=IJ1P%2Bc%2F9vC%2FKlBWuHGIBEl%2BAHKk%3D"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do arquivo de determinado CNAB de retorno.</p>

<aside class="warning">
As URLs disponibilizadas s√£o v√°lidas por apenas 60 minutos. Sendo assim, n√£o armazene o retorno e sempre que for necess√°rio realize uma nova chamada √† API.
</aside>

          <h1 id="webhook">Webhook</h1>
<pre class="highlight shell"><code>Webhook

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"url"</span>: <span class="s2">"http://www.seusitema.com/cobrato"</span>,
    <span class="s2">"description"</span>: <span class="s2">"teste"</span>,
    <span class="s2">"secret"</span>: <span class="s2">"my-secret-token"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>√â poss√≠vel ter indeterminados webhooks, que enviar√£o requisi√ß√µes para uma determinada URL quando certas a√ß√µes ocorrem no Cobrato (<a href="#payloads">Payloads</a>).</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td><strong>(requerido)</strong> URL na qual ser√£o feitas as requisi√ß√µes GET e POST, esperando HTTP 200 como retorno</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descri√ß√£o opcional do Webhook</td>
</tr>
<tr>
<td>secret</td>
<td>string</td>
<td><strong>(requerido)</strong> Segredo pra ser adicionado no header de todas as requisi√ß√µes</td>
</tr>
</tbody></table>

<h2 id="informa„ß„µes-do-webhook">Informa√ß√µes do Webhook</h2>
<pre class="highlight shell"><code>Mostra Webhook

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"url"</span>: <span class="s2">"http://www.seusitema.com/cobrato"</span>,
    <span class="s2">"description"</span>: <span class="s2">"teste"</span>,
    <span class="s2">"secret"</span>: <span class="s2">"my-secret-token"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informa√ß√µes detalhadas do webhook em formato JSON.</p>

<h2 id="lista-de-todos-os-webhooks">Lista de Todos os Webhooks</h2>
<pre class="highlight shell"><code>
Listar Webhooks

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"webhooks"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informa√ß√µes webhook 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes webhook 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todos os webhooks pertencentes a sua Conta de Servi√ßo.</p>

<h2 id="cria„ß„£o-de-webhook">Cria√ß√£o de Webhook</h2>
<pre class="highlight shell"><code>Criar Webhook

DEFINI√á√ÉO

  POST https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/webhooks <span class="se">\</span>
    -d <span class="s1">'{
        "url": "http://www.seusitema.com/cobrato",
        "description": "Webhook teste",
        "secret": "my-secret-token"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"url"</span>: <span class="o">[</span>
        <span class="s2">"n√£o √© v√°lida"</span>,
        <span class="s2">"n√£o pode ficar em branco"</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo webhook, retornando as informa√ß√µes do mesmo caso haja sucesso. Para realizar o cadastro √© necess√°ria que a URL informa aceite as requisi√ß√µes POST e GET, respondendo sempre com HTTP 200. Afim de verifica√ß√£o da URL, o Cobrato far√° requisi√ß√µes testes a mesma</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td><strong>(requerido)</strong> URL na qual ser√£o feitas as requisi√ß√µes GET e POST, esperando HTTP 200 como retorno</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descri√ß√£o opcional do Webhook</td>
</tr>
</tbody></table>

<h2 id="atualiza„ß„£o-de-webhook">Atualiza√ß√£o de Webhook</h2>
<pre class="highlight shell"><code>Atualizar Webhook

DEFINI√á√ÉO

  PUT https://app.cobrato.com/api/v1/webhooks/:webhook_id
  PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id <span class="se">\</span>
    -d <span class="s1">'{
        "descripction": "Webhook teste",
        "secret": "my-secret-token"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICI√ÅRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Atualiza a descri√ß√£o do webhook. N√£o √© poss√≠vel alterar a URL de um Webhook. A requisi√ß√£o n√£o diferencia a utiliza√ß√£o dos verbos PUT e PATCH.</p>

<p><strong>Par√¢metros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descri√ß√£o opcional do Webhook</td>
</tr>
<tr>
<td>secret</td>
<td>string</td>
<td>(requerido) segredo √† ser adicionado aos readers</td>
</tr>
</tbody></table>

<h2 id="exclus„£o-de-webhook">Exclus√£o de Webhook</h2>
<pre class="highlight shell"><code>Excluir Webhook

DEFINI√á√ÉO

  DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM WEBHOOK INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado webhook. A exclus√£o √© irrevers√≠vel.</p>

          <h1 id="payloads">Payloads</h1>

<p>S√£o as requisi√ß√µes enviadas pelo webhook do Cobrato para uma determinada URL para notificar que certas a√ß√µes ocorreram. Estas a√ß√µes notificadas s√£o as seguintes:</p>

<table><thead>
<tr>
<th>Objeto</th>
<th>Evento</th>
<th>Descri√ß√£o</th>
</tr>
</thead><tbody>
<tr>
<td>charge</td>
<td>created</td>
<td>quando a cobran√ßa √© criada</td>
</tr>
<tr>
<td>charge</td>
<td>updated</td>
<td>quando a cobran√ßa √© atualizada</td>
</tr>
<tr>
<td>charge</td>
<td>destroyed</td>
<td>quando a cobran√ßa √© exclu√≠da</td>
</tr>
<tr>
<td>charge</td>
<td>received</td>
<td>quando a cobran√ßa √© recebida</td>
</tr>
<tr>
<td>charge</td>
<td>undone_receivement</td>
<td>quando a cobran√ßa tem seu recebimento desfeito</td>
</tr>
<tr>
<td>charge_account</td>
<td>created</td>
<td>quando a conta de cobran√ßa √© criada</td>
</tr>
<tr>
<td>charge_account</td>
<td>updated</td>
<td>quando a conta de cobran√ßa √© atualizada</td>
</tr>
<tr>
<td>charge_account</td>
<td>destroyed</td>
<td>quando a conta de cobran√ßa √© exclu√≠da</td>
</tr>
</tbody></table>

<h3 id="assinatura-do-payload">Assinatura do Payload</h3>
<pre class="highlight ruby"><code><span class="c1"># EXEMPLO DE C√ÅCULO PARA VERIFICA√á√ÉO DA SIGNATURE (ruby)</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s1">'segredo definido na cria√ß√£o do Webhook'</span>
<span class="n">content</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">request</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'X-Cobrato-RequestId'</span><span class="p">]</span><span class="si">}#{</span><span class="n">request</span><span class="p">.</span><span class="nf">body</span><span class="si">}</span><span class="s2">"</span>
<span class="n">cobrato_signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha1'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>

<span class="n">cobrato_signature</span> <span class="o">==</span> <span class="n">request</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'X-Cobrato-Signature'</span><span class="p">]</span>
<span class="c1"># =&gt; true</span>
</code></pre>

<p>Quando um destes eventos ocorre, o webhook envia o payload (para a URL definida na cria√ß√£o do Webhook) em uma requisi√ß√£o HTTP do tipo POST com dois headers espec√≠ficos:</p>

<p><strong>X-Cobrato-RequestId</strong></p>

<p>Este header √© √∫nico para cada requisi√ß√£o e √© utilizado no c√°lculo do <code class="prettyprint">X-Cobrato-Signature</code>.</p>

<p><strong>X-Cobrato-Signature</strong></p>

<p>Este header √© a assinatura do webhook. Este valor pode ser calculado com o HMAC hex digest do <code class="prettyprint">X-Cobrato-RequestId</code> concatenado ao corpo do payload, utilizando o <strong>Segredo</strong> (definido na cria√ß√£o do Webhook) como a chave.</p>

<h2 id="cobran„ßa-criada">Cobran√ßa criada</h2>
<pre class="highlight shell"><code>Cobran√ßa Criada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informa√ß√µes enviadas quando uma Cobran√ßa √© criada.</p>

<h2 id="cobran„ßa-atualizada">Cobran√ßa Atualizada</h2>
<pre class="highlight shell"><code>Cobran√ßa Atualizada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informa√ß√µes enviadas quando uma Cobran√ßa √© atualizada.</p>

<h2 id="cobran„ßa-excluida">Cobran√ßa Excluida</h2>
<pre class="highlight shell"><code>Cobran√ßa Excluida

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informa√ß√µes enviadas quando uma Cobran√ßa √© excluida.</p>

<h2 id="cobran„ßa-recebida">Cobran√ßa Recebida</h2>
<pre class="highlight shell"><code>Cobran√ßa Recebida

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"received"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informa√ß√µes enviadas quando uma Cobran√ßa √© recebida.</p>

<h2 id="recebimento-de-cobran„ßa-desfeito">Recebimento de Cobran√ßa desfeito</h2>
<pre class="highlight shell"><code>Recebimento de Cobran√ßa desfeito

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"undone_receivement"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informa√ß√µes enviadas quando uma Cobran√ßa tem seu recebimento desfeito.</p>

<h2 id="conta-de-cobran„ßa-criada">Conta de Cobran√ßa criada</h2>
<pre class="highlight shell"><code>Conta de Cobran√ßa Criada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_account"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges_accounts/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informa√ß√µes enviadas quando uma Conta de Cobran√ßa √© Criada.</p>

<h2 id="conta-de-cobran„ßa-atualizada">Conta de Cobran√ßa Atualizada</h2>
<pre class="highlight shell"><code>Conta de Cobran√ßa Atualizada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_account"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>
</code></pre>

<p>Informa√ß√µes enviadas quando uma Conta de Cobran√ßa √© atualizada.</p>

<h2 id="conta-de-cobran„ßa-excluida">Conta de Cobran√ßa Excluida</h2>
<pre class="highlight shell"><code>Conta de Cobran√ßa Excluida

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_account"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_accounts/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informa√ß√µes enviadas quando uma Conta de Cobran√ßa √© excluida.</p>

          <h1 id="tipos-de-cobran„ßa">Tipos de cobran√ßa</h1>

<p>Os tipos de cobran√ßa implementados pelo Cobrato.</p>

<aside class="notice">N√£o √© necess√°ria autentica√ß√£o.</aside>

<p><strong>bank_billets (Boletos banc√°rios)</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Coment√°rio</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td>c√≥digo do banco</td>
</tr>
<tr>
<td>bank_name</td>
<td>string</td>
<td>nome do banco</td>
</tr>
<tr>
<td>portfolio_codes</td>
<td>array</td>
<td>lista de c√≥digos de portf√≥lio do banco</td>
</tr>
<tr>
<td>regress</td>
<td>array</td>
<td>indica quais layouts CNAB de retorno s√£o suportados para o banco</td>
</tr>
<tr>
<td>remittance</td>
<td>array</td>
<td>indica quais layouts CNAB de remessa s√£o suportados para o banco</td>
</tr>
</tbody></table>

<h2 id="lista-de-todos-os-tipos-de-cobran„ßa">Lista de Todos os Tipos de Cobran√ßa</h2>
<pre class="highlight shell"><code>Listar Tipos de Cobran√ßa

DEFINI√á√ÉO

  GET https://app.cobrato.com/api/v1/charging_types

EXEMPLO DE REQUISI√á√ÉO

  <span class="nv">$ </span>curl -i <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charging_types

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charging_types"</span>: <span class="o">{</span>
      <span class="s2">"bank_billets"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"bank_code"</span>: <span class="s2">"001"</span>,
          <span class="s2">"bank_name"</span>: <span class="s2">"BancoDoBrasil"</span>,
          <span class="s2">"portfolio_codes"</span>: <span class="o">[</span> <span class="s2">"11"</span>, <span class="s2">"12"</span>, <span class="s2">"16"</span>, <span class="s2">"17"</span>, <span class="s2">"18"</span>, <span class="s2">"31"</span>, <span class="s2">"51"</span> <span class="o">]</span>,
          <span class="s2">"regress"</span>: <span class="o">[</span>240],
          <span class="s2">"remittance"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          // informa√ß√µes de outro banco
        <span class="o">}</span>
        ...
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna um objeto JSON contendo todos os tipos de cobra√ßa implementados pelo Cobrato.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="Shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
