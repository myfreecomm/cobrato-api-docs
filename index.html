<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Cobrato</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;Shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img style="margin: 15px 0 0 15px;" src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="Shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li>Este projeto é mantido por</li>
            <li><a href='#'>Myfreecomm</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="informa-es-b-sicas">Informaçães básicas</h1>

<h2 id="autentica-o">Autenticação</h2>

<p>Antes de acessar o Cobrato, você deverá criar uma conta e precisará do seu API token, que é requerido em todas as requisições via API e será o identificador de sua conta. Para conseguí-lo, vá em Gerenciamento &gt; Configurações Gerais.</p>

<p>A autenticação na API do Cobrato é realizada utilizando HTTP Basic. Você não usará sua senha e login como o de costume, em vez disso usará o API token como seu login e a senha pode ficar em branco ou, caso seu cliente HTTP peça uma senha, pode ser qualquer valor, a letra X por exemplo.</p>
<pre class="highlight shell"><code>    Formato JSON

    EXEMPLO DE REQUISIÇÃO

      <span class="nv">$ </span>curl -i -u <span class="nv">$YOUR_API_TOKEN</span>:X <span class="se">\</span>
        -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
        -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
        -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
        -X GET https://app.cobrato.com/api/v1

    EXEMPLO DE RESPOSTA

    <span class="o">{</span>
      <span class="s2">"chave"</span>: <span class="s2">"valor"</span>
    <span class="o">}</span>

</code></pre>

<h2 id="formatos-de-requisi-o-e-resposta">Formatos de requisição e resposta</h2>

<aside class="notice">O único formato disponível para requisições e respostas é JSON.</aside>

<h2 id="fuso-hor-rio">Fuso horário</h2>

<p>Todos os dados recebidos e enviados através da API do Cobrato são baseados no fuso horário UTC. Caso seja necessário utilizar outro fuso horário, este será utilizado somente na apresentação, o que não afeta o resultado da resposta da API.</p>

<p>Formatos de data e hora</p>

<p>Todas as datas e horas são formatadas de acordo com ISO 8601 padrão, e sempre serão dadas no fuso horário.</p>

<p>Você deve sempre fornecer os seus valores de data e hora no mesmo formato ISO 8601 e no fuso horário UTC.</p>

<table><thead>
<tr>
<th>Tipo</th>
<th>Formato</th>
<th>Exemplo</th>
</tr>
</thead><tbody>
<tr>
<td>Data</td>
<td>YYYY-mm-dd</td>
<td>2014-11-05</td>
</tr>
<tr>
<td>Data hora</td>
<td>YYYY-mm-ddTHH:MM:SSZ</td>
<td>2014-11-05T17:28:03Z</td>
</tr>
</tbody></table>

<h2 id="formato-num-rico">Formato numérico</h2>

<aside class="notice">Todos os números são fornecidos tanto com números inteiros, como ponto flutuante nativos para JSON.</aside>

<h2 id="pagina-o">Paginação</h2>

<p>Todas as listagens são páginadas. Pode-se utilizar os parâmetros <code class="prettyprint">page</code> (valor padrão 1) e
<code class="prettyprint">per_page</code> (valor padrão 25) para controlar, respectivamente, a página e a quantidade de
itens por página.</p>
<pre class="highlight shell"><code>    Formato JSON

    EXEMPLO DE REQUISIÇÃO

      <span class="nv">$ </span>curl -i -u <span class="nv">$YOUR_API_TOKEN</span>:X <span class="se">\</span>
        -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
        -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
        -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
        -X GET https://app.cobrato.com/api/v1/lista?page<span class="o">=</span>2&amp;per_page<span class="o">=</span>5

    EXEMPLO DE RESPOSTA

    <span class="o">{</span>
      <span class="s2">"chave1"</span>: <span class="s2">"valor 1"</span>,
      <span class="s2">"chave2"</span>: <span class="s2">"valor 2"</span>,
      <span class="s2">"chave3"</span>: <span class="s2">"valor 3"</span>,
      <span class="s2">"chave4"</span>: <span class="s2">"valor 4"</span>,
      <span class="s2">"chave5"</span>: <span class="s2">"valor 5"</span>
    <span class="o">}</span>

</code></pre>

<h2 id="restri-o">Restrição</h2>

<p>Toda resposta de requisição conterá os headers X-RateLimit-Limit, X-RateLimit-Reset e X-RateLimit-Remaining, significando respectivamente o limite de requisições por minuto, a data em que a contagem será resetada e quantas requisições restam.</p>

<p>Cada token de autorização está limitado a 60 requests por minuto. Após atingir a cota, todo acesso irá retornar erro 429 Too Many Requests até que o número de acessos seja resetado. Os acessos são resetados de 1 em 1 minuto, ou seja, se você realizou um request às 17:43:53, o reset acontecerá às 17:44:00 e não 17:44:53.</p>

<aside class="notice">
  O Cobranto ainda está em fase de coleta de dados para analise das requisições, por tanto ainda não está restringindo o acesso à API. Futuramente estes valores poderão ser alterados.
</aside>
<pre class="highlight shell"><code>
  EXEMPLO DE RESPOSTA

  HTTP/1.1 429 TOO MANY REQUESTS
  Content-Type: application/json; <span class="nv">charset</span><span class="o">=</span>utf-8
  Date: Wed, 26 Jan 2011 12:56:45 GMT
  Retry-After: 60
  X-RateLimit-Limit: 60
  X-RateLimit-Reset: Wed, 26 Jan 2011 12:57:00 GMT
  X-RateLimit-Remaining: -1

</code></pre>

          <h1 id="benefici-rio">Beneficiário</h1>
<pre class="highlight shell"><code>Beneficiário

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>É possível ter indeterminados beneficiários, e a eles que pertencem as contas bancárias, configurações de cobrança, e as próprias cobranças do sistema. Podem ser tanto pessoas físicas como pessoas jurídicas.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>tipo de identificação nacional (&lsquo;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome completo do beneficiário</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>nome da cidade do domicílio do beneficiário</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>uf do estado do domicílio do beneficiário (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>bairro do domicílio do beneficiário</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>logradouro do beneficiário</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>número da logradouro do beneficiário</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>cep do domicílio do beneficiário</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>complemento para o endereço de domicilio do beneficiário</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links do beneficiário</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-benefici-rio">Informações do Beneficiário</h2>
<pre class="highlight shell"><code>Mostrar Beneficiário

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informações detalhadas do beneficiário informado em JSON.</p>

<h2 id="lista-de-todos-os-benefici-rios">Lista de Todos os Beneficiários</h2>
<pre class="highlight shell"><code>Listar Beneficiários

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"payees"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações beneficiário 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações beneficiário 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todos os beneficiários pertencentes a sua Conta de Serviço.</p>

<h2 id="cria-o-de-benefici-rio">Criação de Beneficiário</h2>
<pre class="highlight shell"><code>Criar Beneficiário

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payees <span class="se">\</span>
    -d <span class="s1">'{
        "name": "João Silva",
        "city": "Caxias do Sul",
        "national_identifier_type": "cpf",
        "national_identifier": "38031171513",
        "state": "RS",
        "street": "Rua Principal",
        "neighbourhood": "Centro",
        "number": "174",
        "zipcode": "95055-777"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"name"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"city"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"national_identifier_type"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não está incluído na lista"</span><span class="o">]</span>,
      <span class="s2">"state"</span>:[<span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não possui o tamanho esperado (2 caracteres)"</span><span class="o">]</span>,
      <span class="s2">"neighbourhood"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"street"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"number"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"zipcode"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo beneficiário, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do beneficiário</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> nome da cidade do domicílio do beneficiário</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> uf do estado do domicílio do beneficiário (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do domicílio do beneficiário</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> logradouro do beneficiário</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número da logradouro do beneficiário</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do domicílio do beneficiário</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional)  complemento para o endereço de domicilio do beneficiário</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-benefici-rio">Atualização de Beneficiário</h2>
<pre class="highlight shell"><code>Atualizar Beneficiário

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/payees/:payee_id
  PATCH https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/payees/:payee_id <span class="se">\</span>
    -d <span class="s1">'{
        "city": "Farroupilha",
        "state": "RS"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

    <span class="o">{</span>
      <span class="s2">"errors"</span>:<span class="o">{</span>
        <span class="s2">"national_identifier_type"</span>:[<span class="s2">"não está incluído na lista"</span><span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>

</code></pre>

<p>Atualiza o beneficiário determinado, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do beneficiário</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> nome da cidade do domicílio do beneficiário</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> uf do estado do domicílio do beneficiário (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do domicílio do beneficiário</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> logradouro do beneficiário</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número da logradouro do beneficiário</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do domicílio do beneficiário</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional)  complemento para o endereço de domicilio do beneficiário</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-benefici-rio">Exclusão de Beneficiário</h2>
<pre class="highlight shell"><code>Excluir Beneficiário

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found
</code></pre>

<p>Exclui determinado beneficiário e junto a ele todas suas configurações de cobrança, contas bancárias e as cobranças. As mudanças são irreversíveis.</p>

          <h1 id="pagador">Pagador</h1>
<pre class="highlight shell"><code>Pagador

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<aside class="warning">
  <strong>ATENÇÃO!</strong> Este endpoint será descontinuado. Por favor utilize o endpoint de <code>Pessoa</code>
</aside>

<p>É possível ter indeterminados pagadores pertencentes a uma Conta de Serviço. Podem ser tanto pessoas físicas como pessoas jurídicas.</p>

<aside class="notice">
  É importante ressaltar que, para o pagador ser utilizado em uma cobrança via boleto registrado, todos os dados devem ser preenchidos (são obrigatórios), com exceção do <code>complement</code>.
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>tipo de identificação nacional (&lsquo;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome completo do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>nome da cidade do domicílio do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>uf do estado do domicílio do pagador (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>bairro do domicílio do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>logradouro do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>número da logradouro do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>cep do domicílio do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>complemento para o endereço de domicilio do pagador</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links do pagador</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-pagador">Informações do Pagador</h2>
<pre class="highlight shell"><code>Mostrar Pagador

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payers/:payer_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payers/:payer_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<aside class="warning">
  <strong>ATENÇÃO!</strong> Este endpoint será descontinuado. Por favor utilize o endpoint de <code>Pessoa</code>
</aside>

<p>Retorna as informações detalhadas do pagador em JSON.</p>

<h2 id="lista-de-todos-os-pagadores">Lista de Todos os Pagadores</h2>
<pre class="highlight shell"><code>Listar Pagadores

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payers

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payers

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"people"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações pagador 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações pagador 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<aside class="warning">
  <strong>ATENÇÃO!</strong> Este endpoint será descontinuado. Por favor utilize o endpoint de <code>Pessoa</code>
</aside>

<p>Retorna uma lista em JSON contendo todos os pagadores pertencentes a sua Conta de Serviço.</p>

<h2 id="cria-o-de-pagador">Criação de Pagador</h2>
<pre class="highlight shell"><code>Criar Pagador

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payers

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payers <span class="se">\</span>
    -d <span class="s1">'{
        "name": "João Silva",
        "city": "Caxias do Sul",
        "national_identifier_type": "cpf",
        "national_identifier": "38031171513",
        "state": "RS",
        "street": "Rua Principal",
        "neighbourhood": "Centro",
        "number": "174",
        "zipcode": "95055-777"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"name"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"national_identifier_type"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não está incluído na lista"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<aside class="warning">
  <strong>ATENÇÃO!</strong> Este endpoint será descontinuado. Por favor utilize o endpoint de <code>Pessoa</code>
</aside>

<p>Cria um novo pagador, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) nome da cidade do domicílio do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) uf do estado do domicílio do pagador (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do domicílio do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) logradouro do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número da logradouro do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do domicílio do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento para o endereço de domicilio do pagador</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-pagador">Atualização de Pagador</h2>
<pre class="highlight shell"><code>Atualizar Pagador

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/payers/:payer_id
  PATCH https://app.cobrato.com/api/v1/payers/:payer_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/payers/:payer_id <span class="se">\</span>
    -d <span class="s1">'{
        "city": "Farroupilha",
        "state": "RS"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

    <span class="o">{</span>
      <span class="s2">"errors"</span>:<span class="o">{</span>
        <span class="s2">"national_identifier_type"</span>:[<span class="s2">"não está incluído na lista"</span><span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>

</code></pre>

<aside class="warning">
  <strong>ATENÇÃO!</strong> Este endpoint será descontinuado. Por favor utilize o endpoint de <code>Pessoa</code>
</aside>

<p>Atualiza um determinado pagador, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) nome da cidade do domicílio do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) uf do estado do domicílio do pagador (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do domicílio do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) logradouro do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número da logradouro do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do domicílio do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento para o endereço de domicilio do pagador</td>
</tr>
</tbody></table>

          <h1 id="pessoa">Pessoa</h1>
<pre class="highlight shell"><code>Pessoa

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>É possível ter indeterminadas pessoas pertencentes a uma Conta de Serviço. Podem ser tanto pessoas físicas como pessoas jurídicas.</p>

<aside class="notice">
  É importante ressaltar que, para a pessoa ser utilizada em uma cobrança via boleto registrado, neste caso como Pagador, todos os dados são obrigatórios, com exceção do <code>complement</code>.
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>tipo de identificação nacional (&lsquo;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome completo da pessoa</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>nome da cidade do domicílio da pessoa</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>uf do estado do domicílio da pessoa (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>bairro do domicílio da pessoa</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>logradouro da pessoa</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>número da logradouro da pessoa</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>cep do domicílio da pessoa</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>complemento para o endereço de domicilio da pessoa</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da pessoa</td>
</tr>
</tbody></table>

<h2 id="informa-es-da-pessoa">Informações da Pessoa</h2>
<pre class="highlight shell"><code>Mostrar Pessoa

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/people/:person_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/people/:person_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"national_identifier_type"</span>:<span class="s2">"cpf"</span>,
    <span class="s2">"national_identifier"</span>:<span class="s2">"38031171513"</span>,
    <span class="s2">"name"</span>:<span class="s2">"João Silveira"</span>,
    <span class="s2">"zipcode"</span>:<span class="s2">"99000-750"</span>,
    <span class="s2">"city"</span>:<span class="s2">"Carapebus"</span>,
    <span class="s2">"state"</span>:<span class="s2">"RJ"</span>,
    <span class="s2">"neighbourhood"</span>:<span class="s2">"Centro"</span>,
    <span class="s2">"street"</span>:<span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"number"</span>:<span class="s2">"100"</span>,
    <span class="s2">"complement"</span>: <span class="s2">"Ao lado da lotérica."</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/people/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informações detalhadas da pessoa em JSON.</p>

<h2 id="lista-de-todos-as-pessoas">Lista de Todos as Pessoas</h2>
<pre class="highlight shell"><code>Listar Pessoas

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/people

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/people

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"people"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações pessoa 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações pessoa 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todas as pessoas pertencentes a sua Conta de Serviço.</p>

<h2 id="cria-o-de-pessoa">Criação de Pessoa</h2>
<pre class="highlight shell"><code>Criar Pessoa

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/people

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/people <span class="se">\</span>
    -d <span class="s1">'{
        "name": "João Silva",
        "city": "Caxias do Sul",
        "national_identifier_type": "cpf",
        "national_identifier": "38031171513",
        "state": "RS",
        "street": "Rua Principal",
        "neighbourhood": "Centro",
        "number": "174",
        "zipcode": "95055-777"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"name"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"national_identifier_type"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não está incluído na lista"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria uma nova pessoa, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo da pessoa</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) nome da cidade do domicílio da pessoa</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) uf do estado do domicílio da pessoa (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do domicílio da pessoa</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) logradouro da pessoa</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número da logradouro da pessoa</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do domicílio da pessoa</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento para o endereço de domicilio da pessoa</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-pessoa">Atualização de Pessoa</h2>
<pre class="highlight shell"><code>Atualizar Pessoa

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/people/:person_id
  PATCH https://app.cobrato.com/api/v1/people/:person_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/people/:person_id <span class="se">\</span>
    -d <span class="s1">'{
        "city": "Farroupilha",
        "state": "RS"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

    <span class="o">{</span>
      <span class="s2">"errors"</span>:<span class="o">{</span>
        <span class="s2">"national_identifier_type"</span>:[<span class="s2">"não está incluído na lista"</span><span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>

</code></pre>

<p>Atualiza uma determinada pessoa, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de identificação nacional (&#39;cpf&rsquo; ou &#39;cnpj&rsquo;)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> número válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome completo da pessoa</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) nome da cidade do domicílio da pessoa</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) uf do estado do domicílio da pessoa (duas letras, p. ex. &#39;RJ&rsquo;)</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do domicílio da pessoa</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) logradouro da pessoa</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número da logradouro da pessoa</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do domicílio da pessoa</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento para o endereço de domicilio da pessoa</td>
</tr>
</tbody></table>

          <h1 id="conta-banc-ria">Conta Bancária</h1>
<pre class="highlight shell"><code>Conta Bancária

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"payee_id"</span>:<span class="s2">"1"</span>,
    <span class="s2">"bank_code"</span>:<span class="s2">"001"</span>,
    <span class="s2">"agency"</span>:<span class="s2">"1606"</span>,
    <span class="s2">"agency_digit"</span>:<span class="s2">"3"</span>,
    <span class="s2">"account"</span>:<span class="s2">"91000"</span>,
    <span class="s2">"account_digit"</span>:<span class="s2">"7"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>As Contas Bancárias, pertencem aos seus beneficiários, sendo assim é necessário que sempre haja ao menos um beneficiário para criação de conta bancária.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td>identificador do beneficiários no Cobrato</td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td>código do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td>agência da conta bancária</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td>dígito da agência da conta bancária (apenas utilizado pelo Banco do Brasil - 001)</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td>número da conta bancária</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td>dígito do número da conta bancária (apenas não utilizado pelo HSBC - 399)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da conta bancária e de seu beneficiários</td>
</tr>
</tbody></table>

<h2 id="informa-es-da-conta-banc-ria">Informações da Conta Bancária</h2>
<pre class="highlight shell"><code>Mostrar Conta Bancária

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"payee_id"</span>:<span class="s2">"1"</span>,
    <span class="s2">"bank_code"</span>:<span class="s2">"001"</span>,
    <span class="s2">"agency"</span>:<span class="s2">"1606"</span>,
    <span class="s2">"agency_digit"</span>:<span class="s2">"3"</span>,
    <span class="s2">"account"</span>:<span class="s2">"91000"</span>,
    <span class="s2">"account_digit"</span>:<span class="s2">"7"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas da conta bancária informada em JSON e também a referência ao seu beneficiário.</p>

<h2 id="lista-de-todas-as-contas-banc-rias">Lista de Todas as Contas Bancárias</h2>
<pre class="highlight shell"><code>Listar Contas Bancárias

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"bank_accounts"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações conta bancária 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações conta bancária 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas bancárias em que seus beneficiários pertencentem a sua Conta de Serviço.</p>

<h2 id="cria-o-de-conta-banc-ria">Criação de Conta Bancária</h2>
<pre class="highlight shell"><code>Criar Conta Bancária

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/bank_accounts <span class="se">\</span>
    -d <span class="s1">'{
          "payee_id": "1",
          "bank_code": "001",
          "agency":"1606",
          "agency_digit":"3",
          "account":"91000",
          "account_digit":"7"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span>,<span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"payee_id"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>


</code></pre>

<p>Cria um nova conta bancária, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payee_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> identificador do beneficiário no Cobrato em que a conta bancária irá pertencer</td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> agência da conta bancária</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td><strong>(requerido apenas pelo Banco do Brasil - 001)</strong> dígito da agência da conta bancária</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> número da conta bancária</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC - 399)</strong> dígito do número da conta bancária</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-conta-banc-ria">Atualização de Conta Bancária</h2>
<pre class="highlight shell"><code>Atualizar Conta Bancária

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id
  PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id <span class="se">\</span>
    -d <span class="s1">'{
          "agency":"1606",
          "agency_digit":"3"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"não possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a conta bancária determinada, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p>Ao alterar campo &lsquo;bank_code&rsquo;, caso houvesse algum campo preenchido que de acordo com o novo banco deverá ficar em branco, o Cobrato fará automaticamente. Exemplo: ao alterar uma conta bancária (&#39;bank_code&rsquo;) do Banco do Brasil (001) para o Bradesco (327), o campo &#39;agency_digit&rsquo; receberá &#39;null&rsquo; como novo valor.</p>

<p>Alterações nos campos &#39;bank_code&rsquo;, &#39;agency&rsquo;, &#39;agency_digit&rsquo;, &#39;account&rsquo; ou &#39;account_digit&rsquo; colocará a configuração de cobrança em homologação.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código do banco no Febraban</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> agência da conta bancária</td>
</tr>
<tr>
<td>agency_digit</td>
<td>string</td>
<td><strong>(requerido apenas pelo Banco do Brasil - 001)</strong> dígito da agência da conta bancária</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> número da conta bancária</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC - 399)</strong> dígito do número da conta bancária</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-conta-banc-ria">Exclusão de Conta Bancária</h2>
<pre class="highlight shell"><code>Excluir Conta Bancária

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta bancária e junto a ela todas suas configurações de cobrança, e cobranças. As mudanças são irreversíveis.</p>

<h2 id="carteiras-dispon-veis">Carteiras disponíveis</h2>
<pre class="highlight shell"><code>Listar carteiras disponíveis para Conta Bancária

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"portfolio_codes"</span>: <span class="o">[</span>
      <span class="s2">"11"</span>,
      <span class="s2">"12"</span>,
      <span class="s2">"16"</span>,
      <span class="s2">"17"</span>,
      <span class="s2">"18"</span>,
      <span class="s2">"31"</span>,
      <span class="s2">"51"</span>
    <span class="o">]</span>,
    <span class="s2">"_links"</span>: <span class="o">{</span>
      <span class="s2">"rel"</span>: <span class="s2">"bank_account"</span>,
      <span class="s2">"method"</span>: <span class="s2">"GET"</span>,
      <span class="s2">"href"</span>: <span class="s2">"https://sandbox.cobrato.com/api/v1/charges/1"</span>
    <span class="o">}</span>
  <span class="o">}</span>

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Retorna todas as carteiras disponíveis do banco de uma Conta Bancária.</p>

          <h1 id="configura-o-de-cobran-a">Configuração de Cobrança</h1>
<pre class="highlight shell"><code>Configuração de Cobrança

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"type"</span>: <span class="s2">"billet"</span>,
    <span class="s2">"payee_id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"portfolio_code"</span>: <span class="s2">"17"</span>,
    <span class="s2">"agreement_code"</span>: <span class="s2">"12345678"</span>,
    <span class="s2">"agreement_code_digit"</span>: <span class="s2">"1"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Configuração de Cobrança por Boleto"</span>,
    <span class="s2">"initial_number"</span>: 1,
    <span class="s2">"next_number"</span>: 1,
    <span class="s2">"end_number"</span>: 1000,
    <span class="s2">"status"</span>: <span class="s2">"pending"</span>,
    <span class="s2">"registered_charges"</span>: <span class="nb">true</span>,
    <span class="s2">"remittance_agreement_code"</span>: 4576361,
    <span class="s2">"remittance_cnab_pattern"</span>: 400,
    <span class="s2">"initial_remittance_number"</span>: 1,
    <span class="s2">"transmission_code"</span>: <span class="s2">"987655"</span>,
    <span class="s2">"pre_released_billet"</span>: <span class="nb">false</span>,
    <span class="s2">"writing_off_deadline"</span>: null,
    <span class="s2">"available_charge_types"</span>: <span class="o">[</span><span class="s2">"billet"</span><span class="o">]</span>,
    <span class="s2">"timezone"</span>: <span class="s2">"Brasilia"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payee/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>As Configurações de Cobrança podem ser de tipos diferentes. Sendo assim, os parâmetros e algums comportamentos irão variar de acordo com o tipo. Atualmente temos os tipos:</p>

<ul>
<li>Conta Bancária (billet)</li>
<li>Gateway de pagamento (payment_gateway)</li>
</ul>

<aside class="warning">
  As Configurações de Cobrança <strong>precisam ser homologadas antes de serem utilizadas normalmente</strong>. Veja como homologar cada tipo de Configuração de Cobrança em suas informações específicas.
</aside>

<h3 id="conta-banc-ria">Conta bancária</h3>

<p>As Configurações de Cobrança do tipo <strong>Conta bancária</strong> (billet), pertencem as suas contas bancárias, sendo assim é necessário que sempre haja ao menos uma conta bancária para criação desse tipo configuração de cobrança, que também tem suas validações de acordo com o banco de sua conta bancária.</p>

<aside class="info">
  Para homologar a Configuração de Cobrança existe uma série de passos que você encontra em
  <a href="https://app.cobrato.com/charge_configs">nossa interface web</a>. Cada gateway de pagamento tem um processo
  de homologação específico. Até que a Configuração tenha o status &ldquo;ok&rdquo; (Homologado), todas as cobranças criadas para
  esta Configuração deverão ser para homologação.
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>indica o tipo da configuração de cobrança. Nesse caso &lsquo;billet&rsquo;</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome que identifica esta configuração de cobrança</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>&#39;ok&rsquo; ou &#39;pending&rsquo; para indicar se configuração de cobrança está ou não homologada, respectivamente</td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td>identificador do beneficiário desta configuração de cobrança no Cobrato</td>
</tr>
<tr>
<td>bank_account_id</td>
<td>integer</td>
<td>identificador da conta bancária desta configuração de cobrança no Cobrato</td>
</tr>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td>código de portfólio</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td>código de convênio ou do beneficiário, de acordo com o banco. No caso do Itaú deve ser igual ao campo &#39;account&rsquo; da conta bancária</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td>verificador do código de convênio, de acordo com o banco</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td>número inicial do nosso número, sendo atribuído automaticamente e sequencialmente as cobranças</td>
</tr>
<tr>
<td>next_number</td>
<td>integer</td>
<td>próximo nosso número a ser atribuído a uma cobrança criada a partir desta configuração de cobrança</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</td>
</tr>
<tr>
<td>registered_charges</td>
<td>boolean</td>
<td>informa se a configuração de cobrança utiliza boletos registrados ou não, sendo sempre true para configurações de cobrança criadas após 27/10/2018</td>
</tr>
<tr>
<td>remittance_agreement_code</td>
<td>integer</td>
<td>número do convênio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>padrão utilizado no arquivo CNAB de remessa</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>número inicial de remessa, ou seja, qual foi o último número sequencial de remessa enviado para o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>transmission_code</td>
<td>string</td>
<td>código de transmissão (apenas para o Santander)</td>
</tr>
<tr>
<td>pre_released_billet</td>
<td>boolean</td>
<td>caso a configuração de cobrança utilize boletos registrados, este atributo indica se os boletos podem ser acessados antes do registro no banco ser confirmado</td>
</tr>
<tr>
<td>writing_off_deadline</td>
<td>integer</td>
<td>número de dias após o vencimento da cobrança para que seja feita a baixa automática do título no banco (apenas para cobranças registradas com padrão 240)</td>
</tr>
<tr>
<td>available_charge_types</td>
<td>array of strings</td>
<td>tipos de cobrança disponíveis. No caso de Configuração de Cobrança por Conta Bancária, será disponível somente a opção &ldquo;billet&rdquo;. Este campo será gerenciado pelo Cobrato</td>
</tr>
<tr>
<td>timezone</td>
<td>string</td>
<td>fuso horário utilizado pelo banco. Utilize essa informação para converter e apresentar atributos do tipo &ldquo;datetime&rdquo; das cobranças dessa configuração de forma adequada</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da configuração de cobrança e de sua conta bancária</td>
</tr>
</tbody></table>

<h3 id="gateway-de-pagamento">Gateway de Pagamento</h3>

<aside class="info">
  Para homologar a Configuração de Cobrança existe uma série de passos que você encontra em
  <a href="https://app.cobrato.com/wizard/payment_gateway/configs/new">nossa interface web</a>. Até
  que a Configuração tenha o status &ldquo;ok&rdquo; (Homologado), todas as cobranças criadas para esta Configuração
  serão consideradas Cobranças para homologação.
</aside>

<p><strong>Parâmetros comuns a todos os Gateways</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>indica o tipo da configuração de cobrança. Nese caso &#39;payment_gateway&rsquo;</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome que identifica esta configuração de cobrança</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>indica o status, ou etapa, de homologação em que configuração de cobrança está (&#39;pending&rsquo;, &#39;production_tests&rsquo;, &#39;ok&rsquo;)</td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td>identificador do beneficiário desta configuração de cobrança no Cobrato</td>
</tr>
<tr>
<td>gateway_name</td>
<td>string</td>
<td>nome do gateway de pagamento (&#39;cielo-ws15&rsquo;, &#39;cielo-api30&rsquo;, &#39;pjbank&rsquo;)</td>
</tr>
<tr>
<td>available_charge_types</td>
<td>array of strings</td>
<td>tipos de cobrança disponíveis. No caso de Configuração de Cobrança por Gateway de Pagamento, as opções possíveis são &ldquo;billet&rdquo; e &ldquo;credit_card&rdquo;. Este campo será gerenciado pelo Cobrato</td>
</tr>
<tr>
<td>timezone</td>
<td>string</td>
<td>fuso horário utilizado pelo gateway. Utilize essa informação para converter e apresentar atributos do tipo &ldquo;datetime&rdquo; das cobranças dessa configuração de forma adequada</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da configuração de cobrança e de sua conta bancária</td>
</tr>
</tbody></table>

<p><strong>Parâmetros específicos para gateway Cielo</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gateway_id</td>
<td>string</td>
<td>número de afiliação do contrato com o gateway de pagamento</td>
</tr>
<tr>
<td>gateway_key</td>
<td>string</td>
<td>chave de acesso atribuída pelo gateway de pagamento</td>
</tr>
<tr>
<td>use_avs</td>
<td>boolean</td>
<td>define se será feita a solicitação e a confirmação do endereço de cobrança da fatura do cartão utilizado no pagamento</td>
</tr>
</tbody></table>

<p><strong>Parâmetros específicos para gateway PJBank</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gateway_id</td>
<td>string</td>
<td>credencial do contrato com o gateway de pagamento para cobranças de <strong>cartão de crédito</strong></td>
</tr>
<tr>
<td>gateway_key</td>
<td>string</td>
<td>chave de acesso atribuída pelo gateway de pagamento para cobranças de <strong>cartão de crédito</strong></td>
</tr>
<tr>
<td>billet_gateway_id</td>
<td>string</td>
<td>credencial do contrato com o gateway de pagamento para cobranças de <strong>boleto</strong></td>
</tr>
<tr>
<td>billet_gateway_key</td>
<td>string</td>
<td>chave de acesso atribuída pelo gateway de pagamento para cobranças de <strong>boleto</strong></td>
</tr>
</tbody></table>

<h2 id="informa-es-da-configura-o-de-cobran-a">Informações da Configuração de Cobrança</h2>
<pre class="highlight shell"><code>Mostrar Configuração de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_configs/:charge_config_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_configs/:charge_config_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA <span class="o">(</span>BOLETO<span class="o">)</span>

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"type"</span>: <span class="s2">"billet"</span>,
    <span class="s2">"payee_id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"portfolio_code"</span>: <span class="s2">"17"</span>,
    <span class="s2">"agreement_code"</span>: <span class="s2">"12345678"</span>,
    <span class="s2">"agreement_code_digit"</span>: <span class="s2">"1"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Configuração de Cobrança por Boleto"</span>,
    <span class="s2">"initial_number"</span>: 1,
    <span class="s2">"next_number"</span>: 1,
    <span class="s2">"end_number"</span>: 1000,
    <span class="s2">"status"</span>: <span class="s2">"pending"</span>,
    <span class="s2">"registered_charges"</span>: <span class="nb">true</span>,
    <span class="s2">"remittance_agreement_code"</span>: 4576361,
    <span class="s2">"remittance_cnab_pattern"</span>: 400,
    <span class="s2">"initial_remittance_number"</span>: 1,
    <span class="s2">"transmission_code"</span>: <span class="s2">"987655"</span>,
    <span class="s2">"pre_released_billet"</span>: <span class="nb">false</span>,
    <span class="s2">"writing_off_deadline"</span>: null,
    <span class="s2">"available_charge_types"</span>: <span class="o">[</span><span class="s2">"billet"</span><span class="o">]</span>,
    <span class="s2">"deactivated_at"</span>: <span class="s2">"2018-04-10T17:46:01.253Z"</span>,
    <span class="s2">"timezone"</span>: <span class="s2">"Brasilia"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"payee"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payees/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas da Configuração de Cobrança informada em JSON e também suas referências.</p>

<h2 id="lista-de-todas-as-configura-es-de-cobran-a">Lista de Todas as Configurações de Cobrança</h2>
<pre class="highlight shell"><code>Listar Configurações de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_configs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_configs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charge_configs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações configuração de cobrança 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações configuração de cobrança 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todas as Configurações de Cobrança que pertencem a sua Conta de Serviço.</p>

<p>É possível filtrar a lista através dos seguintes parâmetros:</p>

<ul>
<li><code class="prettyprint">type</code>: Filtra pelo tipo de configuração de cobrança. O valor a ser informado é string com um dos tipos existentes de configuração de cobrança.</li>
<li><code class="prettyprint">charge_type</code>: Filtra pelo tipo de cobrança disponível para a configuração, ou seja retornará as configurações que suportam o tipo de cobrança informado. O valor a ser informado é a string com um dos tipos de cobrança disponíveis (&ldquo;billet&rdquo; ou &ldquo;credit_card&rdquo; até o momento).</li>
<li><code class="prettyprint">bank_code</code>: Filtrar pelo código do banco da configuração de cobrança. O valor a ser informado é uma string com o código do banco. Por exemplo &ldquo;341&rdquo; para Itaú, &ldquo;237&rdquo; para Bradesco e etc.</li>
<li><code class="prettyprint">payee_ids</code>: Filtra pelos beneficiários informados. O valor informado é uma <strong>lista*</strong> de ids dos beneficiários.</li>
<li><code class="prettyprint">payee_national_identifiers</code>: Filtra pelos beneficiários informados. O valor informado é uma <strong>lista*</strong> de número de documentos dos beneficiários.</li>
<li><code class="prettyprint">active</code>: Filtra pelo estado da configuração de cobrança. O valor a ser informado é <strong>true</strong> para retornar somente as configurações ativas ou <strong>false</strong> para retornar somente as configurações de cobrança desativadas.</li>
</ul>

<p><strong>lista*</strong> Os valores em &ldquo;lista&rdquo; devem ser enviados da seguinte forma: <code class="prettyprint">url?payee_ids[]=15&amp;payee_ids[]=42</code>.</p>

<h2 id="cria-o-de-configura-o-de-cobran-a">Criação de Configuração de Cobrança</h2>
<pre class="highlight shell"><code>Criar Configuração de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_configs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charge_configs <span class="se">\</span>
    -d <span class="s1">'{
          "type": "billet",
          "payee_id": "1",
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Configuração de Cobrança por Boleto",
          "initial_number": "1",
          "end_number": "1000",
          "registered_charges": "true",
          "remittance_agreement_code": "4576361",
          "remittance_cnab_pattern": "400",
          "initial_remittance_number": "1"
          "transmission_code": "987655"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"name"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"portfolio_code"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"agreement_code"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"agreement_code_digit"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria uma nova Configuração de Cobrança, retornando as informações da mesma em caso de sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<h3 id="boleto">Boleto</h3>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>(opcional) indica o tipo da configuração de cobrança. Neste caso deve ser informado &ldquo;billet&rdquo; ou deixado em branco, pois este é o valor padrão</td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação do beneficiário ao qual a configuração de cobrança irá pertencer</td>
</tr>
<tr>
<td>bank_account_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da conta bancária em que a configuração de cobrança irá pertencer</td>
</tr>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de portfólio, validação conforme o banco</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td><strong>(requerido, com exceção do Itaú onde é preenchido automaticamente)</strong> código de convênio ou do beneficiário, de acordo com o banco</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC e Itaú, sendo preenchido automaticamente para o último)</strong> verificador do código de convênio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta configuração de cobrança</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td><strong>(requerido)</strong> número inicial do nosso número, sendo atribuído automaticamente e sequencialmente às cobranças</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>(opcional) número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</td>
</tr>
<tr>
<td>next_number</td>
<td>integer</td>
<td>(opcional) próximo nosso número a ser atribuído a uma cobrança criada a partir desta configuração de cobrança (por padrão inicia com o valor de <code class="prettyprint">initial_number</code> e é incrementado automatica e sequencialmente)</td>
</tr>
<tr>
<td>remittance_agreement_code</td>
<td>integer</td>
<td><strong>(requerido)</strong> número do convênio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td><strong>(requerido)</strong> padrão utilizado no arquivo CNAB de remessa. Os valores permitidos são 240 ou 400</td>
</tr>
<tr>
<td>transmission_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de transmissão (apenas para o Santander)</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>(opcional) número inicial de remessa, ou seja, qual foi o último número sequencial de remessa enviado para o banco (apenas para o Bradesco). Por padrão o valor é 1</td>
</tr>
<tr>
<td>pre_released_billet</td>
<td>boolean</td>
<td>(opcional) caso a configuração de cobrança utilize boletos registrados, este atributo indica se os boletos podem ser acessados antes do registro no banco ser confirmado. Por padrão é <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>writing_off_deadline</td>
<td>integer</td>
<td>(opcional) número de dias após o vencimento da cobrança para que seja feita a baixa automática do título no banco. Valor pode variar entre 7 e 90. (apenas para cobranças registradas com padrão 240)</td>
</tr>
</tbody></table>

<aside class="warning">
  <strong>ATENÇÃO!</strong> Caso seu cliente pague o boleto antes do banco ter confirmado seu registro, <strong>o pagamento pode ser devolvido</strong> e/ou o banco pode te cobrar uma sobretaxa. Ao definir o campo <code>pre_released_billet</code> como <code>true</code>, você está assumindo este risco.
</aside>

<h3 id="gateway-de-pagamento">Gateway de Pagamento</h3>

<p><strong>Parâmetros comuns a todos os Gateways</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td><strong>(requerido)</strong> indica o tipo da configuração de cobrança. Neste caso deve ser informado &ldquo;payment_gateway&rdquo;</td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação do beneficiário ao qual a configuração de cobrança irá pertencer</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta configuração de cobrança</td>
</tr>
<tr>
<td>gateway_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do gateway de pagamento (&#39;cielo-ws15&rsquo;, &#39;cielo-api30&rsquo;, &#39;pjbank&rsquo;)*</td>
</tr>
</tbody></table>

<p><strong>Parâmetros para o gateway Cielo</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gateway_id</td>
<td>string</td>
<td><strong>(requerido)</strong> número de afiliação do contrato com o gateway de pagamento</td>
</tr>
<tr>
<td>gateway_key</td>
<td>string</td>
<td><strong>(requerido)</strong> chave de acesso atribuída pelo gateway de pagamento</td>
</tr>
<tr>
<td>use_avs</td>
<td>boolean</td>
<td>(opcional) define se será feita a solicitação e a confirmação do endereço de cobrança da fatura do cartão utilizado no pagamento (<code class="prettyprint">false</code> por padrão)</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>(opcional, default &ldquo;pending&rdquo;) indica o status, ou etapa, de homologação em que configuração de cobrança está (&#39;pending&rsquo;, &#39;production_tests&rsquo;, &#39;ok&rsquo;)</td>
</tr>
</tbody></table>

<p><strong>Parâmetros para o gateway PJBank</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gateway_id</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;gateway_key&rsquo; estiver preenchido)</strong> credencial do contrato com o gateway de pagamento para cobranças de <strong>cartão de crédito</strong></td>
</tr>
<tr>
<td>gateway_key</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;gateway_id&rsquo; estiver preenchido)</strong> chave de acesso atribuída pelo gateway de pagamento para cobranças de <strong>cartão de crédito</strong></td>
</tr>
<tr>
<td>billet_gateway_id</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;billet_gateway_key&rsquo; estiver preenchido)</strong> credencial do contrato com o gateway de pagamento para cobranças de <strong>boleto</strong></td>
</tr>
<tr>
<td>billet_gateway_key</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;billet_gateway_id&rsquo; estiver preenchido)</strong> chave de acesso atribuída pelo gateway de pagamento para cobranças de <strong>boleto</strong></td>
</tr>
</tbody></table>

<p><strong>*</strong> Os possíveis valores para o <code>gateway_name</code> são os seguintes:</p></p>

<dl>
  <dt>cielo-api30</dt>
  <dd>API e-Commerce Cielo</dd>
</dl>

<dl>
  <dt>cielo-ws15</dt>
  <dd>Webservice 1.5</dd>
</dl>

<dl>
  <dt>pjbank</dt>
  <dd>PJBank</dd>
</dl>

<h2 id="atualiza-o-de-configura-o-de-cobran-a">Atualização de Configuração de Cobrança</h2>
<pre class="highlight shell"><code>Atualizar Configuração de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charge_configs/:charge_config_id
  PATCH https://app.cobrato.com/api/v1/charge_configs/:charge_config_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charge_configs/:charge_config_id <span class="se">\</span>
    -d <span class="s1">'{
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Novo Nome"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONFIGURAÇÃO DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_code"</span>: <span class="o">[</span><span class="s2">"não possui o tamanho esperado (3 caracteres)"</span><span class="o">]</span>,
        <span class="s2">"agency"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
        <span class="s2">"account"</span>: <span class="o">[</span><span class="s2">"não é um número"</span><span class="o">]</span>,
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a Configuração de Cobrança determinada, retornando as informações da mesma em caso de sucesso. Se houverem erros, eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<h3 id="boleto">Boleto</h3>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payee_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação do beneficiário ao qual a configuração de cobrança irá pertencer</td>
</tr>
<tr>
<td>portfolio_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de portfólio, validação conforme o banco</td>
</tr>
<tr>
<td>agreement_code</td>
<td>string</td>
<td><strong>(requerido, com exceção do Itaú onde é preenchido automaticamente)</strong> código de convênio ou do beneficiário, de acordo com o banco</td>
</tr>
<tr>
<td>agreement_code_digit</td>
<td>string</td>
<td><strong>(requerido, com exceção do HSBC e Itaú, sendo preenchido automaticamente para o último)</strong> verificador do código de convênio, de acordo com o banco</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta configuração de cobrança</td>
</tr>
<tr>
<td>initial_number</td>
<td>integer</td>
<td><strong>(requerido)</strong> número inicial do nosso número, sendo atribuído automaticamente e sequencialmente às cobranças</td>
</tr>
<tr>
<td>end_number</td>
<td>integer</td>
<td>(opcional) número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</td>
</tr>
<tr>
<td>next_number</td>
<td>integer</td>
<td>(opcional) próximo nosso número a ser atribuído a uma cobrança criada a partir desta configuração de cobrança (é incrementado automatica e sequencialmente)</td>
</tr>
<tr>
<td>remittance_agreement_code</td>
<td>integer</td>
<td>*<em>(requerido)</em> número do convênio com o banco (apenas para o Bradesco)</td>
</tr>
<tr>
<td>remittance_cnab_pattern</td>
<td>integer</td>
<td>*<em>(requerido)</em> padrão utilizado no arquivo CNAB de remessa. Os valores permitidos são 240 ou 400</td>
</tr>
<tr>
<td>transmission_code</td>
<td>string</td>
<td>*<em>(requerido)</em> código de transmissão (apenas para o Santander)</td>
</tr>
<tr>
<td>initial_remittance_number</td>
<td>integer</td>
<td>(opcional) número inicial de remessa, ou seja, qual foi o último número sequencial de remessa enviado para o banco (apenas para o Bradesco). Por padrão o valor é 1</td>
</tr>
<tr>
<td>pre_released_billet</td>
<td>boolean</td>
<td>(opcional) caso a configuração de cobrança utilize boletos registrados, este atributo indica se os boletos podem ser acessados antes do registro no banco ser confirmado. Por padrão é <code class="prettyprint">false</code></td>
</tr>
<tr>
<td>writing_off_deadline</td>
<td>integer</td>
<td>(opcional) número de dias após o vencimento da cobrança para que seja feita a baixa automática do título no banco. Valor pode variar entre 7 e 90. (apenas para cobranças registradas com padrão 240)</td>
</tr>
</tbody></table>

<aside class="warning">
  <strong>ATENÇÃO!</strong> Caso seu cliente pague o boleto antes do banco ter confirmado seu registro, <strong>o pagamento pode ser devolvido</strong> e/ou o banco pode te cobrar uma sobretaxa. Ao definir o campo <code>pre_released_billet</code> como <code>true</code>, você está assumindo este risco.
</aside>

<h3 id="gateway-de-pagamento">Gateway de Pagamento</h3>

<p><strong>Parâmetros comuns a todos os Gateways</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta configuração de cobrança</td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação do beneficiário ao qual a configuração de cobrança irá pertencer</td>
</tr>
<tr>
<td>gateway_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do gateway de pagamento (&#39;cielo-ws15&rsquo;, &#39;cielo-api30&rsquo;, &#39;pjbank&rsquo;)*</td>
</tr>
</tbody></table>

<p><strong>Parâmetros para o gateway Cielo</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gateway_id</td>
<td>string</td>
<td><strong>(requerido)</strong> número de afiliação do contrato com o gateway de pagamento</td>
</tr>
<tr>
<td>gateway_key</td>
<td>string</td>
<td><strong>(requerido)</strong> chave de acesso atribuída pelo gateway de pagamento</td>
</tr>
<tr>
<td>use_avs</td>
<td>boolean</td>
<td>(opcional) define se será feita a solicitação e a confirmação do endereço de cobrança da fatura do cartão utilizado no pagamento (<code class="prettyprint">false</code> por padrão)</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>(opcional, default &ldquo;pending&rdquo;) indica o status, ou etapa, de homologação em que configuração de cobrança está (&#39;pending&rsquo;, &#39;production_tests&rsquo;, &#39;ok&rsquo;)</td>
</tr>
</tbody></table>

<p><strong>Parâmetros para o gateway PJBank</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gateway_id</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;gateway_key&rsquo; estiver preenchido)</strong> credencial do contrato com o gateway de pagamento para cobranças de <strong>cartão de crédito</strong></td>
</tr>
<tr>
<td>gateway_key</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;gateway_id&rsquo; estiver preenchido)</strong> chave de acesso atribuída pelo gateway de pagamento para cobranças de <strong>cartão de crédito</strong></td>
</tr>
<tr>
<td>billet_gateway_id</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;billet_gateway_key&rsquo; estiver preenchido)</strong> credencial do contrato com o gateway de pagamento para cobranças de <strong>boleto</strong></td>
</tr>
<tr>
<td>billet_gateway_key</td>
<td>string</td>
<td><strong>(requerido, somente quando o campo &#39;billet_gateway_id&rsquo; estiver preenchido)</strong> chave de acesso atribuída pelo gateway de pagamento para cobranças de <strong>boleto</strong></td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-configura-o-de-cobran-a">Exclusão de Configuração de Cobrança</h2>
<pre class="highlight shell"><code>Excluir Configuração de Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charge_configs/:charge_config_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/charge_configs/:charge_config_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONFIGURAÇÃO DE COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada Configuração de Cobrança e junto a ela todas suas Cobranças. As mudanças são irreversíveis.</p>

<h2 id="desativa-o-de-configura-o-de-cobran-a">Desativação de Configuração de Cobrança</h2>
<pre class="highlight shell"><code>Desativar Configuração de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_configs/:id/deactivate

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charge_configs/:id/deactivate

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONFIGURAÇÃO DE COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Desativa determinada Configuração de Cobrança.</p>

          <h1 id="modelo-de-cobran-a">Modelo de Cobrança</h1>
<pre class="highlight shell"><code>Charge Template

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"name"</span>: <span class="s2">"Nome do Modelo"</span>,
    <span class="s2">"charge_config_id"</span>: 1,
    <span class="s2">"charged_amount"</span>: 1,
    <span class="s2">"document_kind"</span>: <span class="s2">"DM"</span>,
    <span class="s2">"instructions"</span>: <span class="s2">""</span>,
    <span class="s2">"demonstrative"</span>: <span class="s2">""</span>,
    <span class="s2">"registrable"</span>: <span class="nb">false</span>,
    <span class="s2">"interest_amount_per_month"</span>: <span class="s2">"4.56"</span>,
    <span class="s2">"mulct_type"</span>: 1,
    <span class="s2">"mulct_value"</span>: <span class="s2">""</span>,
    <span class="s2">"auto_send_billet"</span>: <span class="nb">false</span>,
    <span class="s2">"email_sender_name"</span>: <span class="s2">"Nome da Empresa"</span>,
    <span class="s2">"email_subject"</span>: <span class="s2">"Boleto de cobrança"</span>,
    <span class="s2">"email_text"</span>: <span class="s2">""</span>,
    <span class="s2">"email_reply_to"</span>: <span class="s2">"name@company.com"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>É possível ter indeterminados modelos. Cada modelo de cobrança pertence à uma configuração de cobrança.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> Nome identificador do modelo de cobrança</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> id da configuração de cobrança</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td>(opcional) valor cobrado no boleto</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>(opcional) espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>instructions</td>
<td>integer</td>
<td>(opcional) instruções de pagamento do boleto, por padrão &ldquo;Pagável em qualquer agência até data do vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>demonstrative</td>
<td>integer</td>
<td>(opcional) demonstrativo do Boleto, por padrão &ldquo;Não receber após o vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>registrable</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança é registrável (do tipo que deve ser registrada no banco). Por padrão é o que está definido na Configuração de Cobrança</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>(opcional) porcentagem de juros mensal que deve ser aplicado em caso de atraso. No boleto será mostrado o valor diário de juros que será calculado</td>
</tr>
<tr>
<td>mulct_type</td>
<td>string</td>
<td>(opcional) indica o tipo de multa que deve ser aplicada em caso de atraso (&ldquo;percentage&rdquo; para porcentagem, &ldquo;currency&rdquo; para valor em reais)</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>(opcional) valor da multa que deve ser aplicada em caso de atraso, com base em seu tipo</td>
</tr>
<tr>
<td>auto_send_billet</td>
<td>boolean</td>
<td>(opcional) Padrão &ldquo;false&rdquo;. Envio ou não de boleto por email</td>
</tr>
<tr>
<td>email_sender_name</td>
<td>string</td>
<td>(opcional) Nome do remetente do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_subject</td>
<td>string</td>
<td>(opcional) Assunto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_text</td>
<td>string</td>
<td>(opcional) Texto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_reply_to</td>
<td>string</td>
<td>(opcional) Endereço de email a ser utilizado na respsta ao email de notificação de cobrança</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-modelo-de-cobran-a">Informações do Modelo de Cobrança</h2>
<pre class="highlight shell"><code>Mostra Modelo de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_templates/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_templates/:id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"name"</span>: <span class="s2">"Nome do Modelo"</span>,
    <span class="s2">"charge_config_id"</span>: 1,
    <span class="s2">"charged_amount"</span>: 1,
    <span class="s2">"document_kind"</span>: <span class="s2">"DM"</span>,
    <span class="s2">"instructions"</span>: <span class="s2">""</span>,
    <span class="s2">"demonstrative"</span>: <span class="s2">""</span>,
    <span class="s2">"registrable"</span>: <span class="nb">false</span>,
    <span class="s2">"interest_amount_per_month"</span>: <span class="s2">"4.56"</span>,
    <span class="s2">"mulct_type"</span>: 1,
    <span class="s2">"mulct_value"</span>: <span class="s2">""</span>,
    <span class="s2">"auto_send_billet"</span>: <span class="nb">true</span>,
    <span class="s2">"email_sender_name"</span>: <span class="s2">"Nome da Empresa"</span>,
    <span class="s2">"email_subject"</span>: <span class="s2">"Boleto de cobrança"</span>,
    <span class="s2">"email_text"</span>: <span class="s2">""</span>,
    <span class="s2">"email_reply_to"</span>: <span class="s2">"name@company.com"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas do modelo de cobrança em formato JSON.</p>

<h2 id="lista-de-todos-os-modelos-de-cobran-a">Lista de Todos os Modelos de Cobrança</h2>
<pre class="highlight shell"><code>
Listar Modelos de cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_templates

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charge_templates

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charge_templates"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações modelo 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações modelo 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todos os modelos de cobrança pertencentes a sua conta de serviço. É possível filtrar os Modelos pela configuração de cobrança passando o charge_config_id</p>

<h2 id="cria-o-de-modelo-de-cobran-a">Criação de Modelo de Cobrança</h2>
<pre class="highlight shell"><code>Criar Modelo de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_templates

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charge_templates <span class="se">\</span>
    -d <span class="s1">'{
        "name": "Nome do Modelo",
        "charge_config_id": 1,
        "charged_amount": 1,
        "document_kind": "DM",
        "instructions": "",
        "demonstrative": "",
        "registrable": false,
        "interest_amount_per_month": "4.56",
        "mulct_type": 1,
        "mulct_value": "",
        "auto_send_billet": true,
        "email_sender_name": "Nome da Empresa",
        "email_subject": "Boleto de cobrança",
        "email_text": "",
        "email_reply_to": "name@company.com"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="o">[</span>
        <span class="s2">"não é válido"</span>,
        <span class="s2">"não pode ficar em branco"</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo modelo de cobrança, retornando as informações do mesmo caso haja sucesso.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> Nome identificador do modelo de cobrança</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> id da configuração de cobrança</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td>(opcional) valor cobrado no boleto</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>(opcional) espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>instructions</td>
<td>integer</td>
<td>(opcional) instruções de pagamento do boleto, por padrão &ldquo;Pagável em qualquer agência até data do vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>demonstrative</td>
<td>integer</td>
<td>(opcional) demonstrativo do Boleto, por padrão &ldquo;Não receber após o vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>registrable</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança é registrável (do tipo que deve ser registrada no banco). Por padrão é o que está definido na Configuração de Cobrança</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>(opcional) porcentagem de juros mensal que deve ser aplicado em caso de atraso. No boleto será mostrado o valor diário de juros que será calculado</td>
</tr>
<tr>
<td>mulct_type</td>
<td>string</td>
<td>(opcional) indica o tipo de multa que deve ser aplicada em caso de atraso (&ldquo;percentage&rdquo; para porcentagem, &ldquo;currency&rdquo; para valor em reais)</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>(opcional) valor da multa que deve ser aplicada em caso de atraso, com base em seu tipo</td>
</tr>
<tr>
<td>auto_send_billet</td>
<td>boolean</td>
<td>(opcional) Padrão &ldquo;false&rdquo;. Envio ou não de boleto por email</td>
</tr>
<tr>
<td>email_sender_name</td>
<td>string</td>
<td>(opcional) Nome do remetente do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_subject</td>
<td>string</td>
<td>(opcional) Assunto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_text</td>
<td>string</td>
<td>(opcional) Texto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_reply_to</td>
<td>string</td>
<td>(opcional) Endereço de email a ser utilizado na respsta ao email de notificação de cobrança</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-modelo-de-cobran-a">Atualização de Modelo de Cobrança</h2>
<pre class="highlight shell"><code>Atualizar Modelo de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charge_templates/:id
  PATCH https://app.cobrato.com/api/v1/charge_templates/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charge_templates <span class="se">\</span>
    -d <span class="s1">'{
        "id": "1"
        "name": "Nome do Modelo",
        "charged_amount": 1,
        "document_kind": "DM",
        "charge_config_id": 1,
        "instructions": "",
        "demonstrative": "",
        "registrable": false,
        "interest_amount_per_month": "4.56",
        "mulct_type": 1,
        "mulct_value": "",
        "auto_send_billet": false,
        "email_sender_name": "Nome da Empresa",
        "email_subject": "Boleto de cobrança",
        "email_text": "",
        "email_reply_to": "name@company.com"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM MODELO DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Atualiza campos do Modelo de Cobrança. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> Nome identificador do modelo de cobrança</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> id da configuração de cobrança</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td>(opcional) valor cobrado no boleto</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>(opcional) espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>instructions</td>
<td>integer</td>
<td>(opcional) instruções de pagamento do boleto, por padrão &ldquo;Pagável em qualquer agência até data do vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>demonstrative</td>
<td>integer</td>
<td>(opcional) demonstrativo do Boleto, por padrão &ldquo;Não receber após o vencimento.&rdquo; (pode ser linhas separadas por &ldquo;\n&rdquo;)</td>
</tr>
<tr>
<td>registrable</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança é registrável (do tipo que deve ser registrada no banco). Por padrão é o que está definido na Configuração de Cobrança</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>(opcional) porcentagem de juros mensal que deve ser aplicado em caso de atraso. No boleto será mostrado o valor diário de juros que será calculado</td>
</tr>
<tr>
<td>mulct_type</td>
<td>string</td>
<td>(opcional) indica o tipo de multa que deve ser aplicada em caso de atraso (&ldquo;percentage&rdquo; para porcentagem, &ldquo;currency&rdquo; para valor em reais)</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>(opcional) valor da multa que deve ser aplicada em caso de atraso, com base em seu tipo</td>
</tr>
<tr>
<td>auto_send_billet</td>
<td>boolean</td>
<td>(opcional) Padrão &ldquo;false&rdquo;. Envio ou não de boleto por email</td>
</tr>
<tr>
<td>email_sender_name</td>
<td>string</td>
<td>(opcional) Nome do remetente do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_subject</td>
<td>string</td>
<td>(opcional) Assunto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_text</td>
<td>string</td>
<td>(opcional) Texto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_reply_to</td>
<td>string</td>
<td>(opcional) Endereço de email a ser utilizado na respsta ao email de notificação de cobrança</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-modelo-de-cobran-a">Exclusão de Modelo de Cobrança</h2>
<pre class="highlight shell"><code>Excluir Modelo de Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charge_templates/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/charge_templates/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM MODELO DE COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado modelo de cobrança. A exclusão é irreversível.</p>

          <h1 id="cobran-a">Cobrança</h1>
<pre class="highlight shell"><code>Cobrança

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"type"</span>: <span class="s2">"billet"</span>,
    <span class="s2">"charge_config_id"</span>: 1,
    <span class="s2">"due_date"</span>:<span class="s2">"2015-02-14"</span>,
    <span class="s2">"document_kind"</span>:<span class="s2">"DV"</span>,
    <span class="s2">"document_date"</span>:null,
    <span class="s2">"document_number"</span>:null,
    <span class="s2">"custom_our_number"</span>: <span class="s2">"true"</span>,
    <span class="s2">"our_number"</span>:<span class="s2">"0"</span>,
    <span class="s2">"our_number_digit"</span>:null,
    <span class="s2">"charged_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"interest_amount_per_month"</span>: <span class="s2">"1.02"</span>,
    <span class="s2">"mulct_type"</span>: <span class="s2">"percentage"</span>,
    <span class="s2">"mulct_value"</span>: <span class="s2">"10.12"</span>,
    <span class="s2">"instructions"</span>:<span class="s2">"Pagável em qualquer agência até data do vencimento."</span>,
    <span class="s2">"demonstrative"</span>:<span class="s2">"Não receber após o vencimento."</span>,
    <span class="s2">"notification_emails"</span>:[<span class="s2">"myemail@gmail.com"</span><span class="o">]</span>,
    <span class="s2">"received"</span>:true, <span class="c"># deprecated</span>
    <span class="s2">"received_amount"</span>:<span class="s2">"10.07"</span>, <span class="c"># deprecated</span>
    <span class="s2">"received_at"</span>:<span class="s2">"2015-01-30T04:00:00Z"</span>, <span class="c"># deprecated</span>
    <span class="s2">"paid_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"paid_at"</span>:<span class="s2">"2015-01-30T04:00:00Z"</span>,
    <span class="s2">"paid_discount"</span>:<span class="s2">"4.56"</span>,
    <span class="s2">"paid_additions"</span>:<span class="s2">"0.50"</span>,
    <span class="s2">"paid_rebate"</span>:<span class="s2">"0.30"</span>,
    <span class="s2">"payment_tax"</span>:<span class="s2">"2.5"</span>,
    <span class="s2">"paid_difference"</span>:<span class="s2">"0"</span>,
    <span class="s2">"processing_date"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"for_homologation"</span>:true,
    <span class="s2">"registrable"</span>: <span class="nb">true</span>,
    <span class="s2">"payer_national_identifier_type"</span>: <span class="s2">"cpf"</span>,
    <span class="s2">"payer_national_identifier"</span>: <span class="s2">"12345678909"</span>,
    <span class="s2">"payer_name"</span>: <span class="s2">"Jonh Doe"</span>,
    <span class="s2">"payer_number"</span>: <span class="s2">"43"</span>,
    <span class="s2">"payer_complement"</span>: <span class="s2">"8 andar"</span>,
    <span class="s2">"payer_street"</span>: <span class="s2">"Rua do Carmo"</span>,
    <span class="s2">"payer_neighbourhood"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"payer_zipcode"</span>: <span class="s2">"22230062"</span>,
    <span class="s2">"payer_city"</span>: <span class="s2">"Rio de Janeiro"</span>,
    <span class="s2">"payer_state"</span>: <span class="s2">"RJ"</span>,
    <span class="s2">"registration_status"</span>: <span class="s2">"without_remittance"</span>,
    <span class="s2">"canceled_at"</span>: <span class="s2">"2015-01-31T17:46:01.253Z"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"receive"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/receive"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"deliver"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/deliver_billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"charge_config"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"billet"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"cancel"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/cancel"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Cada uma das cobranças criadas terá um tipo, podendo variar de acordo com a configuração de cobrança. Um gateway de
pagamento pode ter suporte à cobranças via boleto ou cartão de crédito, por exemplo. Por este motivo os parâmetros,
validações e alguns comportamentos serão variáveis de acordo com o tipo de cobrança e da configuração de cobrança.</p>

<h3 id="cobran-as-via-conta-banc-ria">Cobranças via Conta Bancária</h3>

<h4 id="boleto">Boleto</h4>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>indica o tipo da cobrança. Nesse caso, &ldquo;billet&rdquo;</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td>identificador da configuração de cobrança a qual esta cobrança pertence</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>data de vencimento da cobranca</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>data de emissão do documento</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td>número do documento é o número utilizado e controlado pelo beneficiário para identificar o título de cobrança.</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>nosso número</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>indica se a cobrança utiliza um &ldquo;nosso número&rdquo; customizado. O valor padrão é false, mas caso definido true, o campo &lsquo;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td>valor cobrado no boleto</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>porcentagem de juros mensal que deve ser aplicado em caso de atraso. No boleto será mostrado o valor diário de juros que será calculado</td>
</tr>
<tr>
<td>mulct_type</td>
<td>string</td>
<td>indica o tipo de multa que deve ser aplicada em caso de atraso (&ldquo;percentage&rdquo; para porcentagem, &ldquo;currency&rdquo; para valor em reais)</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>valor da multa que deve ser aplicada em caso de atraso, com base em seu tipo</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>instruções de pagamento do boleto</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>demonstrativo do Boleto</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(DEPRECATED: use notification_emails) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>received</td>
<td>boolean</td>
<td>(DEPRECATED: use paid_at) indica se a cobrança foi recebida</td>
</tr>
<tr>
<td>received_amount</td>
<td>decimal</td>
<td>(DEPRECATED: use paid_amount) valor pago</td>
</tr>
<tr>
<td>received_at</td>
<td>datetime</td>
<td>(DEPRECATED: use paid_at) date e horário em que a cobrança foi paga. (Utilize o timezone da configuração de cobrança ao converter para data)</td>
</tr>
<tr>
<td>paid_amount</td>
<td>decimal</td>
<td>valor pago</td>
</tr>
<tr>
<td>paid_at</td>
<td>datetime</td>
<td>date e horário em que a cobrança foi paga. (Utilize o timezone da configuração de cobrança ao converter para data)</td>
</tr>
<tr>
<td>paid_discount</td>
<td>decimal</td>
<td>valor do desconto no momento do pagamento</td>
</tr>
<tr>
<td>paid_additions</td>
<td>decimal</td>
<td>valor do juros, multas e encargos no momento do pagamento</td>
</tr>
<tr>
<td>paid_rebate</td>
<td>decimal</td>
<td>valor do abatimento no momento do pagamento</td>
</tr>
<tr>
<td>payment_tax</td>
<td>decimal</td>
<td>valor taxa cobrada pela instituição financeira para o processamento da cobrança</td>
</tr>
<tr>
<td>paid_difference</td>
<td>decimal</td>
<td>diferença entre valor pago e valor cobrando</td>
</tr>
<tr>
<td>processing_date</td>
<td>date</td>
<td>data de geração do boleto</td>
</tr>
<tr>
<td>for_homologation</td>
<td>boolean</td>
<td>indica se é uma cobrança que foi criada com o objetivo de homologar uma Configuração de cobrança</td>
</tr>
<tr>
<td>registrable</td>
<td>boolean</td>
<td>indica se a cobrança é registrável (do tipo que deve ser registrada no banco). Sendo sempre true para Cobranças criadas após 27/10/2018</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td>identificador do pagador</td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td>tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td>documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td>nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>número do endereço do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>complemento do endereço do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>rua do endereço do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>bairro do endereço do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>cep do endereço do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>cidade do endereço do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
<tr>
<td>registration_status</td>
<td>string</td>
<td>status de registro em que a cobrança se encontra (without_remittance, remitted, registered, registered_with_error, cancelation_started, canceled)</td>
</tr>
<tr>
<td>canceled_at</td>
<td>datetime</td>
<td>data e horário em que a cobrança foi cancelada, se for o caso</td>
</tr>
<tr>
<td>available_billet</td>
<td>boolean</td>
<td>indica se o boleto está disponível para download</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionados à cobrança</td>
</tr>
</tbody></table>

<h3 id="cobran-as-via-gateway-de-pagamento">Cobranças via Gateway de Pagamento</h3>

<p>Cada Gateway de Pagamento tem suporte à tipos de cobrança diferentes. Alguns têm suporte à cobranças via boleto, outros
não, por exemplo. Em cada tipo de cobrança abaixo é especificado quais Gatways de Pagamento suportam tal tipo de cobrança.</p>

<p>As Cobranças tem o comportamento assíncrono em relação à comunicação com o Gateway de Pagamento. Ou seja, às ações que
dependem de efetivação no Gateway de Pagamento não tem resposta na mesma requisição, são feitas em um processo separado
e tem suas respostas dadas em payloads via webhook.</p>

<h4 id="cart-o-de-cr-dito">Cartão de crédito</h4>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>indica o tipo da cobrança. Nesse caso, &ldquo;credit_card&rdquo;</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td>identificador da configuração de cobrança a qual esta cobrança pertence</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td>valor cobrado no boleto</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(DEPRECATED: use notification_emails) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td>identificador do pagador</td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td>tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td>documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td>nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>número do endereço do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>complemento do endereço do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>rua do endereço do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>bairro do endereço do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>cep do endereço do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>cidade do endereço do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
<tr>
<td>credit_card_id</td>
<td>integer</td>
<td>identificador do cartão de crédito utilizado na cobrança</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>descrição da cobrança</td>
</tr>
<tr>
<td>soft_descriptor</td>
<td>string</td>
<td>descritor que irá aparecer na fatura do cartão (no máximo 13 caracteres)</td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td>método de pagamento (1: pagamento à vista, 2: pagamento parcelado)</td>
</tr>
<tr>
<td>installments</td>
<td>integer</td>
<td>número de parcelas</td>
</tr>
<tr>
<td>for_homologation</td>
<td>boolean</td>
<td>indica se é uma cobrança que foi criada com o objetivo de homologar uma Configuração de cobrança ou um Cartão de Crédito</td>
</tr>
<tr>
<td>payment_gateway_status</td>
<td>string</td>
<td>status da cobrança em relação ao gateway de pagamento (pending, authorized, captured, canceled, authorize_error, capture_error, cancel_error)</td>
</tr>
<tr>
<td>payment_gateway_message</td>
<td>string</td>
<td>mensagem do gateway de pagamento relacionada ao seu status</td>
</tr>
<tr>
<td>canceled_at</td>
<td>datetime</td>
<td>data e horário em que a cobrança foi cancelada, se for o caso. (Utilize o timezone da configuração de cobrança ao converter para data)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionados à cobrança</td>
</tr>
</tbody></table>

<h4 id="boleto">Boleto</h4>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>indica o tipo da cobrança. Nesse caso, &ldquo;billet&rdquo;</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td>identificador da configuração de cobrança a qual esta cobrança pertence</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td>valor cobrado no boleto</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>data de vencimento da cobranca</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>porcentagem de juros mensal que deve ser aplicado em caso de atraso. Esse valore será dividido por 30 para ser encontrata a taxa diária</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>valor da multa que deve ser aplicada em caso de atraso</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>valor do disconto que deve ser aplicado em caso de pagamento até a data de vencimento</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td>identificador do pagador</td>
</tr>
<tr>
<td>payer_national_identifier_type</td>
<td>string</td>
<td>tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>payer_national_identifier</td>
<td>string</td>
<td>documento do pagador</td>
</tr>
<tr>
<td>payer_name</td>
<td>string</td>
<td>nome do pagador</td>
</tr>
<tr>
<td>payer_number</td>
<td>string</td>
<td>número do endereço do pagador</td>
</tr>
<tr>
<td>payer_complement</td>
<td>string</td>
<td>complemento do endereço do pagador</td>
</tr>
<tr>
<td>payer_street</td>
<td>string</td>
<td>rua do endereço do pagador</td>
</tr>
<tr>
<td>payer_neighbourhood</td>
<td>string</td>
<td>bairro do endereço do pagador</td>
</tr>
<tr>
<td>payer_zipcode</td>
<td>string</td>
<td>cep do endereço do pagador</td>
</tr>
<tr>
<td>payer_city</td>
<td>string</td>
<td>cidade do endereço do pagador</td>
</tr>
<tr>
<td>payer_state</td>
<td>string</td>
<td>sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>espécie do documento</td>
</tr>
<tr>
<td>auto_send_billet</td>
<td>boolean</td>
<td>indica se será enviado email de notificação automaticamente para os emails especificados no campo &#39;notification_emails&rsquo;</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>email_sender_name</td>
<td>string</td>
<td>nome do remetente do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_subject</td>
<td>string</td>
<td>assunto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_text</td>
<td>string</td>
<td>texto do email de notificação de cobrança</td>
</tr>
<tr>
<td>email_reply_to</td>
<td>string</td>
<td>endereço de email a ser utilizado na resposta ao email de notificação de cobrança</td>
</tr>
<tr>
<td>canceled_at</td>
<td>datetime</td>
<td>data e horário em que a cobrança foi cancelada, se for o caso</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionados à cobrança</td>
</tr>
</tbody></table>

<h2 id="informa-es-da-cobran-a">Informações da Cobrança</h2>
<pre class="highlight shell"><code>Mostrar Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA <span class="o">(</span>BOLETO<span class="o">)</span>

  <span class="o">{</span>
    <span class="s2">"id"</span>:1,
    <span class="s2">"type"</span>:<span class="s2">"billet"</span>,
    <span class="s2">"charge_config_id"</span>: 1,
    <span class="s2">"due_date"</span>:<span class="s2">"2015-02-14"</span>,
    <span class="s2">"document_kind"</span>:<span class="s2">"DV"</span>,
    <span class="s2">"document_date"</span>:null,
    <span class="s2">"document_number"</span>:null,
    <span class="s2">"custom_our_number"</span>: <span class="s2">"true"</span>,
    <span class="s2">"our_number"</span>:<span class="s2">"0"</span>,
    <span class="s2">"our_number_digit"</span>:null,
    <span class="s2">"charged_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"interest_amount_per_month"</span>: <span class="s2">"1.02"</span>,
    <span class="s2">"mulct_type"</span>: <span class="s2">"percentage"</span>,
    <span class="s2">"mulct_value"</span>: <span class="s2">"10.12"</span>,
    <span class="s2">"instructions"</span>:<span class="s2">"Pagável em qualquer agência até data do vencimento."</span>,
    <span class="s2">"demonstrative"</span>:<span class="s2">"Não receber após o vencimento."</span>,
    <span class="s2">"notification_emails"</span>:[<span class="s2">"myemail@gmail.com"</span><span class="o">]</span>,
    <span class="s2">"received"</span>:true, <span class="c"># deprecated</span>
    <span class="s2">"received_amount"</span>:<span class="s2">"10.07"</span>, <span class="c"># deprecated</span>
    <span class="s2">"received_at"</span>:<span class="s2">"2015-01-30T04:00:00Z"</span>, <span class="c"># deprecated</span>
    <span class="s2">"paid_amount"</span>:<span class="s2">"10.07"</span>,
    <span class="s2">"paid_at"</span>:<span class="s2">"2015-01-30T04:00:00Z"</span>,
    <span class="s2">"paid_discount"</span>:<span class="s2">"4.56"</span>,
    <span class="s2">"paid_additions"</span>:<span class="s2">"0.50"</span>,
    <span class="s2">"paid_rebate"</span>:<span class="s2">"0.30"</span>,
    <span class="s2">"payment_tax"</span>:<span class="s2">"2.5"</span>,
    <span class="s2">"paid_difference"</span>:<span class="s2">"0"</span>,
    <span class="s2">"processing_date"</span>:<span class="s2">"2015-01-30"</span>,
    <span class="s2">"for_homologation"</span>:true,
    <span class="s2">"registrable"</span>: <span class="nb">true</span>,
    <span class="s2">"payer_national_identifier_type"</span>: <span class="s2">"cpf"</span>,
    <span class="s2">"payer_national_identifier"</span>: <span class="s2">"12345678909"</span>,
    <span class="s2">"payer_name"</span>: <span class="s2">"Jonh Doe"</span>,
    <span class="s2">"payer_number"</span>: <span class="s2">"43"</span>,
    <span class="s2">"payer_complement"</span>: <span class="s2">"8 andar"</span>,
    <span class="s2">"payer_street"</span>: <span class="s2">"Rua do Carmo"</span>,
    <span class="s2">"payer_neighbourhood"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"payer_zipcode"</span>: <span class="s2">"22230062"</span>,
    <span class="s2">"payer_city"</span>: <span class="s2">"Rio de Janeiro"</span>,
    <span class="s2">"payer_state"</span>: <span class="s2">"RJ"</span>,
    <span class="s2">"registration_status"</span>: <span class="s2">"without_remittance"</span>,
    <span class="s2">"canceled_at"</span>: <span class="s2">"2015-01-31T17:46:01.253Z"</span>,
    <span class="s2">"available_billet"</span>: <span class="s2">"false"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"receive"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/receive"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"deliver"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/deliver_billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"charge_config"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"billet"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/billet"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"cancel"</span>,<span class="s2">"method"</span>:<span class="s2">"POST"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/1/cancel"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informações detalhadas da cobrança informada em JSON e também a referência a sua configuração de cobrança.</p>

<aside class="notice">
  O conteúdo do nó &ldquo;_links&rdquo; irá variar de acordo com o tipo e o status da cobrança. No caso da Cobrança do tipo boleto
  de conta Bancária, além dos itens básicos mostrados no exemplo de resposta ao lado, se a cobrança tiver sido recebida,
  irá conter o seguinte link:

  <br><br>
  <p>
    <code>
    {"rel":"receive","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/receive"}
    </code>
  </p>

  <p>Caso contrário, irá conter este link:</p>

  <p>
    <code>
    {"rel":"undo_receive","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/undo_receive"}
    </code>
  </p>
</aside>

<h2 id="lista-de-todas-as-cobran-a">Lista de Todas as Cobrança</h2>
<pre class="highlight shell"><code>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações cobrança 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações cobrança 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as cobranças que pertencem a sua Conta de Serviço.</p>

<p>É possível filtrar a lista através dos seguintes parâmetros:</p>

<ul>
<li><code class="prettyprint">type</code>: Filtra pelo tipo de cobrança. O valor a ser informado é string com um dos tipos existentes de cobrança (&ldquo;billet&rdquo; e &ldquo;credit_card&rdquo;, sendo que existe &ldquo;payment_gateway&rdquo; que está <em>deprecated</em> retornando a mesma coisa que &ldquo;credit_card&rdquo;) .</li>
<li><code class="prettyprint">remittable</code>: Filtra as cobranças remessáveis, ou seja, passíveis de geração de arquivo de remessa. É necessária apenas a presença do parâmetro, não importando seu valor.</li>
<li><code class="prettyprint">charge_config_ids</code>: Filtra pelas configurações de cobrança informadas. O valor informado é uma <strong>lista*</strong> de ids das configurações de cobrança.</li>
<li><code class="prettyprint">payee_ids</code>: Filtra pelos beneficiários informados. O valor informado é uma <strong>lista*</strong> de ids dos beneficiários.</li>
<li><code class="prettyprint">payee_national_identifiers</code>: Filtra pelos beneficiários informados. O valor informado é uma <strong>lista*</strong> de número de documentos dos beneficiários.</li>
</ul>

<p><strong>lista*</strong> Os valores em &ldquo;lista&rdquo; devem ser enviados da seguinte forma: <code class="prettyprint">url?charge_config_ids[]=15&amp;charge_config_ids[]=42</code>.</p>

<h2 id="cria-o-de-cobran-a">Criação de Cobrança</h2>
<pre class="highlight shell"><code>Criar Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges <span class="se">\</span>
    -d <span class="s1">'{
          "charge_config_id": 1,
          "due_date":"2015-02-14",
          "document_kind":"DV",
          "our_number":"12345678",
          "charged_amount":"10.07",
          "notification_emails":["myemail@gmail.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"charge_config_id"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"our_number"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"charged_amount"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"due_date"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um nova cobrança, caso haja sucesso retornará as informações da mesma e será gerado seu boleto. Se houverem erros eles serão informados no corpo da resposta.</p>

<h3 id="cobran-a-via-conta-banc-ria">Cobrança via Conta Bancária</h3>

<h4 id="boleto">Boleto</h4>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da configuração de cobrança da qual a cobrança irá pertencer</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobrança</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>(opcional) espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos). Caso não seja informado o valor assumido será &ldquo;DM&rdquo;</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor cobrado no boleto</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td>(opcional) número do documento é o número utilizado e controlado pelo beneficiário para identificar o título de cobrança. Caso não seja informado é atribuído automaticamente um valor aleatório de até 10 caracteres. Este valor deve ser único para cobranças feitas pelo Banco Bradesco de mesmo valor cobrado, data de vencimento e configuração de cobrança</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>(opcional - requerido caso <code class="prettyprint">auto_send_billet</code> seja <code class="prettyprint">true</code>) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(DEPRECATED: use notification_emails) (opcional - requerido caso <code class="prettyprint">auto_send_billet</code> seja <code class="prettyprint">true</code>) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>(opcional) data de emissão do documento</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>(opcional) nosso número. Caso não informado, é atribuído automaticamente pelo sistema</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>(opcional) digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança utiliza um &ldquo;nosso número&rdquo; customizado. O valor padrão é false, mas caso definido true, o campo &#39;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>(opcional) porcentagem de juros mensal que deve ser aplicado em caso de atraso. No boleto será mostrado o valor diário de juros que será calculado</td>
</tr>
<tr>
<td>mulct_type</td>
<td>string</td>
<td>(opcional) indica o tipo de multa que deve ser aplicada em caso de atraso (&ldquo;percentage&rdquo; para porcentagem, &ldquo;currency&rdquo; para valor em reais)</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>(opcional) valor da multa que deve ser aplicada em caso de atraso, com base em seu tipo</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>(opcional) instruções de pagamento do boleto. As linhas devem ser separadas por &ldquo;\n&rdquo;. Deve ter no máximo 9 linhas com 65 caracteres cada, sendo que se tiver definido multa e juros para a cobrança, será permitido no máximo 6 linhas, pois 3 já serão utilizadas automaticamente.</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>(opcional) demonstrativo do Boleto. As linhas devem ser separadas por &ldquo;\n&rdquo;. Deve ter no máximo 9 linhas com 65 caracteres cada, sendo que se tiver definido multa e juros para a cobrança, será permitido no máximo 6 linhas, pois 3 já serão utilizadas automaticamente.</td>
</tr>
<tr>
<td>charge_template_id</td>
<td>integer</td>
<td>(opcional) número do modelo de cobrança a ser utilizado. A cobrança será criada com base nos atributos preestabelecidos do modelo. Contudo, os valores enviados na criação terão preferência</td>
</tr>
<tr>
<td>for_homologation</td>
<td>boolean</td>
<td><strong>(requerido, se a configuração de cobrança não estiver homologada)</strong> indica se é uma cobrança para ser utilizada na homologação da Configuração de cobrança</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes)</strong> identificador do pagador (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id)</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>auto_send_billet</td>
<td>boolean</td>
<td>(opcional) Indica se será enviado email de notificação automaticamente para os emails especificados no campo &#39;notification_emails&rsquo;. Caso não seja informada assumirá valor &#39;false&rsquo;</td>
</tr>
<tr>
<td>email_sender_name</td>
<td>string</td>
<td>(opcional) Nome do remetente do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_subject</td>
<td>string</td>
<td>(opcional) Assunto do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_text</td>
<td>string</td>
<td>(opcional) Texto do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_reply_to</td>
<td>string</td>
<td>(opcional) Endereço de email a ser utilizado na resposta ao email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td><strong>(requerido)</strong> complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h3 id="cobran-as-via-gateway-de-pagamento">Cobranças via Gateway de Pagamento</h3>

<p>Cobranças via gateway de pagamento podem ser de vários tipos, como Boleto e Cartão de crédito. Desse modo, quando for
criar uma cobrança via gateway de pagamento, deve ser indicado o tipo através do atributo <code class="prettyprint">type</code>. Por padrão, esse
atributo terá o valor <code class="prettyprint">&quot;credit_card&quot;</code>.</p>

<p>É importante ressaltar que os tipos de cobrança disponíveis dependem do gateway de pagamento utilizado e da configuração
de cobrança.</p>

<p>Após a cobrança ser criada com sucesso (sem erros de validação) é iniciado o processo assíncrono para a comunicação com
o gateway. Assim que esse processo terminar, um payload de atualização ou de erro é enviado via webhook.</p>

<aside class="notice">
Em caso de falha da efetivação da cobrança no Gateway de Pagamento, o motivo da falha será disponibilizado no
atributo 'payment_gateway_message&rsquo;.
</aside>

<h4 id="cart-o-de-cr-dito">Cartão de crédito</h4>

<aside class="notice">
Se for utilizado um cartão já existente (enviando o parâmetro <code>credit_card_id</code>), este deve pertencer a
mesma Configuração de Cobrança (parâmetro <code>charge_config_id</code>) utilizada.
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da configuração de cobrança da qual a cobrança irá pertencer</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor cobrado</td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td><strong>(requerido)</strong> método de pagamento (&ldquo;credit_card_in_cash&rdquo; pagamento à vista, &ldquo;credit_card_financed&rdquo; pagamento parcelado)</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>(opcional) tipo da cobrança, nesse caso &ldquo;credit_card&rdquo; é o valor padrão, por isso é opcional</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição da cobrança</td>
</tr>
<tr>
<td>soft_descriptor</td>
<td>string</td>
<td>(opcional) descritor que irá aparecer na fatura do cartão (no máximo 13 caracteres)</td>
</tr>
<tr>
<td>installments</td>
<td>integer</td>
<td>(opcional) número de parcelas (1 por padrão)</td>
</tr>
<tr>
<td>generate_token</td>
<td>boolean</td>
<td>(opcional) indica se deve ser gerado token para utilização do cartão de crédito no pagamento recorrente (false por padrão)</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>(opcional  - requerido caso <code class="prettyprint">auto_send_billet</code> seja <code class="prettyprint">true</code>) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(DEPRECATED: use notification_emails) (opcional  - requerido caso <code class="prettyprint">auto_send_billet</code> seja <code class="prettyprint">true</code>) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes)</strong> identificador do pagador (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id)</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>credit_card_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar credit_card_attributes)</strong> identificador do cartão de crédito utilizado na cobrança, que deve pertencer ao mesmo payer e charge_config informados</td>
</tr>
<tr>
<td>credit_card_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar credit_card_id)</strong>  atributos para a criação de um novo cartão de crédito que será ligado ao pagador</td>
</tr>
<tr>
<td>overwrite_card_payer</td>
<td>boolean</td>
<td>(opcional) indica se o pagador dono do cartão deve ser alterado para o pagador informado</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<aside class="notice">
No contexto de Cobrança utilizamos o nome 'Pagador&rsquo; para referirmos à Pessoa (Person).
</aside>

<aside class="notice">
Caso exista um Pagador (Person) com o mesmo <code>national_identifier</code>, não será criado um novo, mas sim atualizado o existente.
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<p><strong>credit_card_attributes</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número do cartão</td>
</tr>
<tr>
<td>cvv</td>
<td>string</td>
<td><strong>(requerido)</strong> código de segurança</td>
</tr>
<tr>
<td>expiration</td>
<td>string</td>
<td><strong>(requerido)</strong> expiração do cartão, no formato &ldquo;mm/aa&rdquo;</td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do dono do cartão</td>
</tr>
<tr>
<td>brand</td>
<td>string</td>
<td><strong>(requerido)</strong> bandeira do cartão (visa, mastercard, amex, elo, diners, discover, jcb, aura)</td>
</tr>
<tr>
<td>avs_address</td>
<td>string</td>
<td>(opcional) endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_number</td>
<td>string</td>
<td>(opcional) número do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_complement</td>
<td>string</td>
<td>(opcional) complemento endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_district</td>
<td>string</td>
<td>(opcional) bairro do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>created_as_reusable</td>
<td>boolean</td>
<td>(opcional) indica se o cartão de crédito deve ser salvo de modo que possa ser re-utilizado futuramente em novas cobranças desde mesmo pagador e configuração de cobrança (false por padrão)</td>
</tr>
</tbody></table>

<h4 id="boleto">Boleto</h4>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo da cobrança, nesse caso deve ser &ldquo;billet&rdquo;</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da configuração de cobrança da qual a cobrança irá pertencer</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor cobrado</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobrança</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes)</strong> identificador do pagador (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id)</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>(opcional) espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos). Caso não seja informado o valor assumido será &ldquo;DM&rdquo;.</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>(opcional) porcentagem de juros mensal que deve ser aplicado em caso de atraso. Esse valore será dividido por 30 para ser encontrata a taxa diária</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>(opcional) porcentagem de multa que deve ser aplicada em caso de atraso</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional) valor do disconto que deve ser aplicado em caso de pagamento até a data de vencimento</td>
</tr>
<tr>
<td>auto_send_billet</td>
<td>boolean</td>
<td>(opcional) Indica se será enviado email de notificação automaticamente para os emails especificados no campo &#39;notification_emails&rsquo;. Caso não seja informada assumirá valor &#39;false&rsquo;</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>(opcional - requerido caso <code class="prettyprint">auto_send_billet</code> seja <code class="prettyprint">true</code>) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>email_sender_name</td>
<td>string</td>
<td>(opcional) Nome do remetente do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_subject</td>
<td>string</td>
<td>(opcional) Assunto do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_text</td>
<td>string</td>
<td>(opcional) Texto do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_reply_to</td>
<td>string</td>
<td>(opcional) Endereço de email a ser utilizado na resposta ao email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<aside class="notice">
Caso exista um Pagador (Payer) com o mesmo <code>national_identifier</code>, não será criado um novo, mas sim atualizado o existente.
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-cobran-a">Atualização de Cobrança</h2>
<pre class="highlight shell"><code>Atualizar Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charges/:charge_id
  PATCH https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charges/:charge_id <span class="se">\</span>
    -d <span class="s1">'{
          "document_date":"2015-02-02",
          "document_number":"123456789",
          "notification_emails":["myemail@gmail.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span><span class="s2">"document_kind"</span>:[<span class="s2">"não está incluído na lista"</span><span class="o">]}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a cobrança determinada, caso haja sucesso retornará as informações da mesma. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<h3 id="cobran-as-via-conta-banc-ria">Cobranças via Conta Bancária</h3>

<h4 id="boleto">Boleto</h4>

<aside class="warning">
Para cobranças do tipo <strong>Boleto de Conta Bancária</strong> não é possível atualizar uma cobrança após seu
recebimento, para isso é necessário desfazer o recebimento da mesma! Além disso, caso seja alterado com sucesso será
gerado um novo boleto sobrescrevendo o anterior.
</aside>

<aside class="notice">
Para cobranças do tipo <strong>Boleto de Conta Bancária</strong> os campos 'paid_at&rsquo;, 'paid_amount&rsquo; e 'payment_tax&rsquo;, não
são alterados via atualização de cobrança, apenas no recebimento ou desfazendo o recebimento da mesma.
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobrança</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>(opcional) espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos). Caso não seja informado o valor assumido será &ldquo;DM&rdquo;.</td>
</tr>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor cobrado no boleto</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td>(opcional) número do documento é o número utilizado e controlado pelo beneficiário para identificar o título de cobrança. Caso não seja informado é atribuído automaticamente um valor aleatório de até 10 caracteres. Este valor deve ser único para cobranças feitas pelo Banco Bradesco de mesmo valor cobrado, data de vencimento e configuração de cobrança</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>(opcional) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(opcional) (DEPRECATED: use notification_emails) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>(opcional) data de emissão do documento</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>(opcional) nosso número. Caso não informado, é atribuído automaticamente pelo sistema</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>(opcional) digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>(opcional) indica se a cobrança utiliza um &ldquo;nosso número&rdquo; customizado. O valor padrão é false, mas caso definido true, o campo &#39;our_number&rsquo; se torna requerido</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>(opcional) porcentagem de juros mensal que deve ser aplicado em caso de atraso. No boleto será mostrado o valor diário de juros que será calculado</td>
</tr>
<tr>
<td>mulct_type</td>
<td>string</td>
<td>(opcional) indica o tipo de multa que deve ser aplicada em caso de atraso (&ldquo;percentage&rdquo; para porcentagem, &ldquo;currency&rdquo; para valor em reais)</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>(opcional) valor da multa que deve ser aplicada em caso de atraso, com base em seu tipo</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>(opcional) instruções de pagamento do boleto. As linhas devem ser separadas por &ldquo;\n&rdquo;. Deve ter no máximo 9 linhas com 65 caracteres cada, sendo que se tiver definido multa e juros para a cobrança, será permitido no máximo 6 linhas, pois 3 já serão utilizadas automaticamente.</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>(opcional) demonstrativo do Boleto. As linhas devem ser separadas por &ldquo;\n&rdquo;. Deve ter no máximo 9 linhas com 65 caracteres cada, sendo que se tiver definido multa e juros para a cobrança, será permitido no máximo 6 linhas, pois 3 já serão utilizadas automaticamente.</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes)</strong> identificador do pagador (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id)</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<aside class="notice">
No contexto de Cobrança utilizamos o nome 'Pagador&rsquo; para referirmos à Pessoa (Person).
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td><strong>(requerido)</strong> complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td><strong>(requerido)</strong> rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td><strong>(requerido)</strong> bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td><strong>(requerido)</strong> cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td><strong>(requerido)</strong> cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td><strong>(requerido)</strong> sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h3 id="cobran-as-via-gateway-de-pagamento">Cobranças via Gateway de Pagamento</h3>

<aside class="notice">
Para cobranças do via <strong>Gateway de Pagamento</strong>, a atualização só é permitida caso o status no
gateway de pagamento (atributo 'payment_gateway_status&rsquo;) seja de erro.
</aside>

<p>Uma cobrança com o status de erro no gateway de pagamento pode ser editada com o objetivo de corrigir este error
(descrito no atributo &#39;payment_gateway_message&rsquo;). Sendo atualizada com sucesso, é feita uma re-tentativa de efetivação
da cobrança no gateway de pagamento.</p>

<h4 id="cart-o-de-cr-dito">Cartão de crédito</h4>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor cobrado no boleto</td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td><strong>(requerido)</strong> método de pagamento (1: pagamento à vista, 2: pagamento parcelado)</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição da cobrança</td>
</tr>
<tr>
<td>soft_descriptor</td>
<td>string</td>
<td>(opcional) descritor que irá aparecer na fatura do cartão (no máximo 13 caracteres)</td>
</tr>
<tr>
<td>installments</td>
<td>integer</td>
<td>(opcional) número de parcelas (1 por padrão)</td>
</tr>
<tr>
<td>generate_token</td>
<td>boolean</td>
<td>(opcional) indica se deve ser gerado token para utilização do cartão de crédito no pagamento recorrente (false por padrão)</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>(opcional) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>(opcional) (DEPRECATED: use notification_emails) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes)</strong> identificador do pagador (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id)</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>credit_card_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar credit_card_attributes)</strong> identificador do cartão de crédito utilizado na cobrança</td>
</tr>
<tr>
<td>credit_card_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar credit_card_id)</strong>  atributos para a criação de um novo cartão de crédito que será ligado ao pagador</td>
</tr>
<tr>
<td>overwrite_card_payer</td>
<td>boolean</td>
<td>(opcional) indica se o pagador dono do cartão deve ser alterado para o pagador informado</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<aside class="notice">
No contexto de Cobrança utilizamos o nome 'Pagador&rsquo; para referirmos à Pessoa (Person).
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<p><strong>credit_card_attributes</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número do cartão</td>
</tr>
<tr>
<td>cvv</td>
<td>string</td>
<td><strong>(requerido)</strong> código de segurança</td>
</tr>
<tr>
<td>expiration</td>
<td>string</td>
<td><strong>(requerido)</strong> expiração do cartão, no formato &ldquo;mm/aa&rdquo;</td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do dono do cartão</td>
</tr>
<tr>
<td>brand</td>
<td>string</td>
<td><strong>(requerido)</strong> bandeira do cartão (visa, mastercard, amex, elo, diners, discover, jcb, aura)</td>
</tr>
<tr>
<td>avs_address</td>
<td>string</td>
<td>(opcional) endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_number</td>
<td>string</td>
<td>(opcional) número do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_complement</td>
<td>string</td>
<td>(opcional) complemento endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_district</td>
<td>string</td>
<td>(opcional) bairro do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>created_as_reusable</td>
<td>boolean</td>
<td>(opcional) indica se o cartão de crédito deve ser salvo de modo que possa ser re-utilizado futuramente em novas cobranças desde mesmo pagador e configuração de cobrança (false por padrão)</td>
</tr>
</tbody></table>

<h4 id="boleto">Boleto</h4>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charged_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor cobrado</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento da cobrança</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes)</strong> identificador do pagador (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id)</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>(opcional) espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>interest_amount_per_month</td>
<td>decimal</td>
<td>(opcional) porcentagem de juros mensal que deve ser aplicado em caso de atraso. Esse valore será dividido por 30 para ser encontrata a taxa diária</td>
</tr>
<tr>
<td>mulct_value</td>
<td>decimal</td>
<td>(opcional) porcentagem de multa que deve ser aplicada em caso de atraso</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional) valor do disconto que deve ser aplicado em caso de pagamento até a data de vencimento</td>
</tr>
<tr>
<td>auto_send_billet</td>
<td>boolean</td>
<td>(opcional) Indica se será enviado email de notificação automaticamente para os emails especificados no campo &#39;notification_emails&rsquo;. Caso não seja informada assumirá valor &#39;false&rsquo;</td>
</tr>
<tr>
<td>notification_emails</td>
<td>array of strings</td>
<td>(opcional - requerido caso <code class="prettyprint">auto_send_billet</code> seja <code class="prettyprint">true</code>) emails que receberão notificações sobre a cobrança</td>
</tr>
<tr>
<td>email_sender_name</td>
<td>string</td>
<td>(opcional) Nome do remetente do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_subject</td>
<td>string</td>
<td>(opcional) Assunto do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_text</td>
<td>string</td>
<td>(opcional) Texto do email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
<tr>
<td>email_reply_to</td>
<td>string</td>
<td>(opcional) Endereço de email a ser utilizado na resposta ao email de notificação de cobrança, caso a opção auto_send_billet estiver com valor &#39;true&rsquo;</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<aside class="notice">
No contexto de Cobrança utilizamos o nome 'Pagador&rsquo; para referirmos à Pessoa (Person).
</aside>

<aside class="notice">
Caso exista um Pagador (Payer) com o mesmo <code>national_identifier</code>, não será criado um novo, mas sim atualizado o existente.
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="re-tentativa-de-efetivar-de-cobran-a-cart-o-de-cr-dito">Re-tentativa de efetivar de Cobrança (Cartão de crédito)</h2>
<pre class="highlight shell"><code>Re-tentativa de efetivação de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charges/:charge_id/retry
  PATCH https://app.cobrato.com/api/v1/charges/:charge_id/retry

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/charges/:charge_id/retry

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span><span class="s2">"message"</span>:[<span class="s2">"Esta Cobrança não suporta retentativa"</span><span class="o">]}</span>
  <span class="o">}</span>

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found
</code></pre>

<p>Quando uma Cobrança do tipo Gateway de Pagamento tem um erro que não necessita correção (atualização) da mesma, é possível fazer uma re-tentativa de efetivação dessa Cobrança.</p>

<h2 id="exclus-o-de-cobran-a">Exclusão de Cobrança</h2>
<pre class="highlight shell"><code>Excluir Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada cobrança. As mudanças são irreversíveis, e não será mais possível receber o boleto da cobrança excluída!</p>

<p>Uma cobrança poderá ser excluída nos seguintes casos:</p>

<h3 id="cart-o-de-cr-dito">Cartão de crédito</h3>

<p>Somente quando a cobrança estiver com erro de autorização (<code class="prettyprint">payment_gateway_status</code> tiver o valor &ldquo;authorize_error&rdquo;).</p>

<h3 id="boleto-via-gateway-de-pagamento">Boleto via Gateway de pagamento</h3>

<p>Somente quando a cobrança estiver com erro de criação (<code class="prettyprint">payment_gateway_status</code> tiver o valor &ldquo;error_on_creation&rdquo;).</p>

<h3 id="boleto-via-conta-banc-ria">Boleto via Conta Bancária</h3>

<p>Para boletos <strong>sem registro</strong> a cobrança pode ser excluída enquanto não tiver sido recebida.</p>

<p>Para boletos <strong>com registro</strong>, por sua vez, enquanto não tiver sido recebida e enquanto não tiver sido
registrada (<code class="prettyprint">registration_status</code> diferente de &ldquo;registered&rdquo;).</p>

<h2 id="recebimento-de-cobran-a-boleto-via-conta-banc-ria">Recebimento de Cobrança (Boleto via Conta Bancária)</h2>
<pre class="highlight shell"><code>Receber Cobrança <span class="o">(</span>Boleto<span class="o">)</span>

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/receive

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/receive <span class="se">\</span>
    -d <span class="s1">'{
         "paid_at": "2015-02-06",
         "paid_amount": "9.57",
         "paid_discount": "4.56",
         "paid_additions": "0.50",
         "paid_rebate":  "0.30",
         "payment_tax": "2.5"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"paid_at"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"paid_amount"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Marca determinada cobrança via Boleto como recebida, retornando JSON contendo as informações da cobrança em caso de sucesso ou os erros, caso haja algum.</p>

<p><strong>Parâmetros (Boleto)</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>received_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> (DEPRECATED: use paid_amount) valor pago</td>
</tr>
<tr>
<td>received_at</td>
<td>datetime</td>
<td><strong>(requerido)</strong> (DEPRECATED: use paid_at) date e horário em que a cobrança foi paga</td>
</tr>
<tr>
<td>paid_amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor pago</td>
</tr>
<tr>
<td>paid_at</td>
<td>datetime</td>
<td><strong>(requerido)</strong> date e horário em que a cobrança foi paga</td>
</tr>
<tr>
<td>paid_discount</td>
<td>decimal</td>
<td>(optional) valor do desconto</td>
</tr>
<tr>
<td>paid_additions</td>
<td>decimal</td>
<td>(optional) valor do juros, multa e encargos</td>
</tr>
<tr>
<td>paid_rebate</td>
<td>decimal</td>
<td>(optional) valor do abatimento</td>
</tr>
<tr>
<td>payment_tax</td>
<td>decimal</td>
<td>(opcional) valor taxa cobrada pela instituição financeira para o processamento da cobrança</td>
</tr>
</tbody></table>

<h2 id="desfazer-recebimento-de-cobran-a-boleto-via-conta-banc-ria">Desfazer Recebimento de Cobrança (Boleto via conta Bancária)</h2>
<pre class="highlight shell"><code>Desfazer Recebimento de Cobrança <span class="o">(</span>Boleto<span class="o">)</span>

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/undo_receive

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/undo_receive

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"paid_amount"</span>: <span class="o">[</span>
        <span class="s2">"Impossível cancelar o recebimento de uma cobrança não recebida!"</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Marca determinada cobrança via Boleto como não recebida, retornando JSON contendo as informações da cobrança em caso de sucesso ou os erros, caso haja algum.</p>

<h2 id="renova-o-de-cobran-a-boleto-via-conta-banc-ria">Renovação de Cobrança (Boleto via conta Bancária)</h2>
<pre class="highlight shell"><code>Renovar Cobrança <span class="o">(</span>Boleto<span class="o">)</span>

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charges/:charge_id/renew
  PATCH https://app.cobrato.com/api/v1/charges/:charge_id/renew

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PUT https://app.cobrato.com/api/v1/charges/:charge_id/renew <span class="se">\</span>
    -d <span class="s1">'{
         "new_due_date": "2015-02-06"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"due_date"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Atualiza a data de vencimento do boleto bancário. É importante ressaltar que <strong>é necessária a criação e envio de um novo arquivo de remessa para efetivar a renovação junto ao banco</strong>.</p>

<p>A renovação só será permitida caso a cobrança seja do tipo registrada e já esteja registrada junto ao banco. Caso contrário, é possível renovar editando a data de vencimento da cobrança.</p>

<p>Retorna um JSON contento informações atualizadas da cobrança em caso de sucesso ou erros caso haja algum.</p>

<p><strong>Parâmetros (Boleto)</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>new_due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> nova data de vencimento da cobrança</td>
</tr>
</tbody></table>

<h2 id="boleto-da-cobran-a-boleto-via-gateway-e-conta-banc-ria">Boleto da Cobrança (Boleto via Gateway e Conta Bancária)</h2>
<pre class="highlight shell"><code>Mostrar Boleto da Cobrança <span class="o">(</span>URL<span class="o">)</span>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges/:charge_id/billet

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charges/:charge_id/billet

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/billets/1/6186_08033_1445001056.pdf?Expires=1445034829"</span>
  <span class="o">}</span>

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"message"</span>: <span class="s2">"O boleto bancário para esta cobrança ainda não está disponível. Se sua cobrança é registrada você precisa registrar essa cobrança enviando o arquivo de remessa para seu banco."</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do boleto de determinada cobrança via Boleto</p>

<aside class="warning">
As URLs disponibilizadas são válidas por apenas 60 minutos. Sendo assim, não armazene o retorno e sempre que for necessário realize uma nova chamada à API.
</aside>

<aside class="notice">
Para cobranças registradas, o boleto só ficará disponível após o registro da cobrança a não ser quando a configuração de cobrança tiver habilitada a opção de disponibilizar boleto antes de registrar.
</aside>

<h2 id="envio-de-boleto-da-cobran-a-boleto-via-gateway-e-conta-banc-ria">Envio de Boleto da Cobrança (Boleto via Gateway e Conta Bancária)</h2>
<pre class="highlight shell"><code>Enviar Boleto da Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/deliver_billet

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/deliver_billet <span class="se">\</span>
    -d <span class="s1">'{
         "to": ["email1@host.com","email1@host.com"]
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM EMAIL NÃO CADASTRADO E NÃO INFORMADO

      422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"notification_emails"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Envia o boleto da cobrança por email, gerando o mesmo caso necessário. É enviado para os emails informados, ou então os cadastrados na cobrança.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>to</td>
<td>array of string</td>
<td><strong>(requerido)</strong> emails que receberão o boleto ao invés dos emails cadastrados na cobrança</td>
</tr>
</tbody></table>

<h2 id="cancelar-cobran-a">Cancelar cobrança</h2>
<pre class="highlight shell"><code>Cancela Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/cancel

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/cancel

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"message"</span>: <span class="s2">"Esta Cobrança não pode ser cancelada"</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cancela determinada cobrança.</p>

<h3 id="cart-o-de-cr-dito">Cartão de crédito</h3>

<p>Neste caso o cancelamento irá <strong>estornar</strong> o valor cobrado para o cliente.</p>

<p>A cobrança poderá ser cancelada somente quando tiver sido autorizada, capturada ou com erro no cancelamento
(<code class="prettyprint">payment_gateway_status</code> tiver um dos seguintes valores: &ldquo;authorized&rdquo;, &ldquo;captured&rdquo;, ou &ldquo;cancel_error&rdquo;).</p>

<h3 id="boleto-via-gateway">Boleto via Gateway</h3>

<p>Neste caso o cancelamento irá <strong>invalidar</strong> a cobrança, não permitindo mais o seu pagamento.</p>

<p>A cobrança poderá ser cancelada somente quando ainda não tiver sido paga ou já tiver tido uma tentativa de cancelamento
com erro (<code class="prettyprint">payment_gateway_status</code> tiver o valor &ldquo;error_on_cancelation&rdquo;).</p>

<h3 id="boleto-via-conta-banc-ria">Boleto via Conta Bancária</h3>

<p>Para boletos <strong>sem registro</strong>, a cobrança pode ser cancelada enquanto não tiver sido recebida.</p>

<p>Para boletos <strong>com registro</strong>, por sua vez, enquanto não tiver sido recebida e tiver sido registrada ou não tiver
arquivo de remessa (<code class="prettyprint">registration_status</code> com um dos valores: &ldquo;registered&rdquo; ou &ldquo;without_remittance&rdquo;). Após ser cancelada
no Cobrato será necessário criar um arquivo de remessa para notificar o Banco do cancelamento da cobrança.</p>

<h2 id="revogar-cobran-a">Revogar Cobrança</h2>
<pre class="highlight shell"><code>Revogar Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges/:charge_id/revoke

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/charges/:charge_id/revoke

EXEMPLO DE ESTADO DA RESPOSTA EXCLUÍDA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA CANCELADA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"message"</span>: <span class="s2">"Esta Cobrança não pode ser excluída nem cancelada"</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Primeiro tenta excluir a cobrança. Caso não seja possível, tenta cancelá-la. Caso também não seja possível, retorna a
resposta de insucesso.</p>

          <h1 id="configura-o-de-pagamento">Configuração de Pagamento</h1>
<pre class="highlight shell"><code>Configuração de Pagamento

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"name"</span>: <span class="s2">"Configuração de Pagamento"</span>,
    <span class="s2">"timezone"</span>: <span class="s2">"Brasilia"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<h2 id="informa-es-da-configura-o-de-pagamento">Informações da Configuração de Pagamento</h2>
<pre class="highlight shell"><code>Mostrar Configuração de Pagamento

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payment_configs/:payment_config_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payment_configs/:payment_config_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"bank_account_id"</span>: 1,
    <span class="s2">"name"</span>: <span class="s2">"Configuração de Pagamento"</span>,
    <span class="s2">"timezone"</span>: <span class="s2">"Brasilia"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"bank_account"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/bank_accounts/1"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas da Configuração de Pagamento informada em JSON e também suas referências.</p>

<h2 id="lista-de-todas-as-configura-es-de-pagamento">Lista de Todas as Configurações de Pagamento</h2>
<pre class="highlight shell"><code>Listar Configurações de Pagamento

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payment_configs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payment_configs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"payment_configs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações configuração de pagamento 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações configuração de pagamento 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todas as Configurações de Pagamento que pertencem a sua Conta de Serviço.</p>

<h2 id="cria-o-de-configura-o-de-pagamento">Criação de Configuração de Pagamento</h2>
<pre class="highlight shell"><code>Criar Configuração de Pagamento

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payment_configs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payment_configs <span class="se">\</span>
    -d <span class="s1">'{
          "bank_account_id": "1",
          "name": "Configuração de Pagamento"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"bank_account_id"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"name"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria uma nova Configuração de Pagamento, retornando as informações da mesma em caso de sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_account_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da conta bancária em que a configuração de pagamento irá pertencer</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta configuração de pagamento</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-configura-o-de-pagamento">Atualização de Configuração de Pagamento</h2>
<pre class="highlight shell"><code>Atualizar Configuração de Pagamento

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/payment_configs/:payment_config_id
  PATCH https://app.cobrato.com/api/v1/payment_configs/:payment_config_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/payent_configs/:payent_config_id <span class="se">\</span>
    -d <span class="s1">'{
          "name": "Novo Nome"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONFIGURAÇÃO DE PAGAMENTO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"name"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza a Configuração de Pagamento determinada, retornando as informações da mesma em caso de sucesso. Se houverem erros, eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome que identifica esta configuração de pagamento</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-configura-o-de-pagamento">Exclusão de Configuração de Pagamento</h2>
<pre class="highlight shell"><code>Excluir Configuração de Pagamento

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/payment_configs/:payment_config_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/payment_configs/:payment_config_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONFIGURAÇÃO DE PAGAMENTO INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada Configuração de Pagamento. As mudanças são irreversíveis.</p>

          <h1 id="pagamento">Pagamento</h1>
<pre class="highlight shell"><code>Pagamentos

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 10,
    <span class="s2">"amount"</span>: <span class="s2">"456.78"</span>,
    <span class="s2">"date"</span>: <span class="s2">"2017-12-07"</span>,
    <span class="s2">"our_number"</span>: null,
    <span class="s2">"payment_method"</span>: <span class="s2">"ted_same_ownership"</span>,
    <span class="s2">"payment_type"</span>: <span class="s2">"benefit"</span>,
    <span class="s2">"account"</span>: <span class="s2">"12345"</span>,
    <span class="s2">"account_digit"</span>: <span class="s2">"9"</span>,
    <span class="s2">"agency"</span>: <span class="s2">"4321"</span>,
    <span class="s2">"bank_code"</span>: <span class="s2">"033"</span>,
    <span class="s2">"doc_goal"</span>: null,
    <span class="s2">"payee_document"</span>: <span class="s2">"123.456.789-09"</span>,
    <span class="s2">"payee_name"</span>: <span class="s2">"John Doe"</span>,
    <span class="s2">"ted_goal"</span>: <span class="s2">"00300"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payments/10"</span> <span class="o">}</span>,
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"update"</span>, <span class="s2">"method"</span>: <span class="s2">"PUT"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payments/10"</span> <span class="o">}</span>,
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payments/10"</span> <span class="o">}</span>,
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"payment_config"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span> <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payment_config_id</td>
<td>integer</td>
<td>código de identificação da configuração de pagamento à qual o pagamento irá pertencer</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td>valor do pagamento</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td>data do pagamento</td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td>forma de pagamento (&lsquo;credit_other_ownership&rsquo;, &#39;credit_same_ownership&rsquo;, &#39;credit_savings_account&rsquo;, &#39;doc_other_ownership&rsquo;, &#39;doc_same_ownership&rsquo;, &#39;ted_other_ownership&rsquo;, &#39;ted_same_ownership&rsquo;, &#39;dealership&rsquo;, &#39;billet_same_bank&rsquo;, &#39;billet_other_bank&rsquo;, &#39;gps&rsquo;, &#39;darf&rsquo;, &#39;das&rsquo;, &#39;ipva&rsquo;, &#39;icms_sp&rsquo;, &#39;dpvat&rsquo;, &#39;fgts&rsquo;)</td>
</tr>
<tr>
<td>payment_type</td>
<td>string</td>
<td>tipo de pagamento. Os possíveis valores variam de acordo com o &ldquo;payment_method&rdquo; (vide tabela 1)</td>
</tr>
<tr>
<td>bank_code</td>
<td>string</td>
<td>código de 3 dígitos do banco da conta bancária para o pagamento</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td>número da conta bancária para o pagamento</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td>dígito da conta bancária para fazer o pagamento</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td>número da agência da conta bancária para fazer o pagamento</td>
</tr>
<tr>
<td>payee_id</td>
<td>integer</td>
<td>identificador do beneficiário</td>
</tr>
<tr>
<td>payee_name</td>
<td>string</td>
<td>nome do beneficiário</td>
</tr>
<tr>
<td>payee_document_type</td>
<td>string</td>
<td>tipo do documento do beneficiário</td>
</tr>
<tr>
<td>payee_document</td>
<td>string</td>
<td>número do documento do beneficiário</td>
</tr>
<tr>
<td>doc_goal</td>
<td>string</td>
<td>código referente ao objetivo do DOC. Possíveis valores na tabela 2</td>
</tr>
<tr>
<td>ted_goal</td>
<td>string</td>
<td>código referente ao objetivo do TED. Possíveis valores na tabela 3</td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>número que identifica o pagamento no banco</td>
</tr>
<tr>
<td>gps_payment_code</td>
<td>string</td>
<td>código do GPS, de 4 dígitos</td>
</tr>
<tr>
<td>competency_month</td>
<td>string</td>
<td>mês de competência do GPS, repesentado por 2 dígitos</td>
</tr>
<tr>
<td>competency_year</td>
<td>string</td>
<td>ano de competência do GPS, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>other_entities_amount</td>
<td>decimal</td>
<td>valor extra para outras entidades</td>
</tr>
<tr>
<td>monetary_update</td>
<td>decimal</td>
<td>atualização monetária, incluindo valores de juros e multa</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>valor do desconto</td>
</tr>
<tr>
<td>barcode</td>
<td>string</td>
<td>código de barras</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>data de vencimento</td>
</tr>
<tr>
<td>taxpayer_document_type</td>
<td>string</td>
<td>Tipo do documento do contribuinte</td>
</tr>
<tr>
<td>taxpayer_document</td>
<td>string</td>
<td>Número do documento do contribuinte</td>
</tr>
<tr>
<td>registration_status</td>
<td>string</td>
<td>status de registro do pagamento (&#39;without_remittance&rsquo;, &#39;remitted&rsquo;, &#39;registered&rsquo;, &#39;canceled&rsquo;, &#39;edit_amount_started&rsquo;, &#39;reschedule_started&rsquo;, &#39;registered_with_error&rsquo;, &#39;cancelation_started&rsquo;, &#39;canceled_awaiting_confirmation&rsquo;, &#39;amount_edited_awaiting_confirmation&rsquo;, &#39;rescheduled_awaiting_confirmation&rsquo;)</td>
</tr>
<tr>
<td>note</td>
<td>string</td>
<td>Oberservação do pagamento</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-pagamento">Informações do Pagamento</h2>
<pre class="highlight shell"><code>Mostrar Pagamento

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payments/:payment_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payments/:payment_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 10,
    <span class="s2">"amount"</span>: <span class="s2">"456.78"</span>,
    <span class="s2">"date"</span>: <span class="s2">"2017-12-07"</span>,
    <span class="s2">"our_number"</span>: null,
    <span class="s2">"payment_method"</span>: <span class="s2">"ted_same_ownership"</span>,
    <span class="s2">"payment_type"</span>: <span class="s2">"benefit"</span>,
    <span class="s2">"account"</span>: <span class="s2">"12345"</span>,
    <span class="s2">"account_digit"</span>: <span class="s2">"9"</span>,
    <span class="s2">"agency"</span>: <span class="s2">"4321"</span>,
    <span class="s2">"bank_code"</span>: <span class="s2">"033"</span>,
    <span class="s2">"doc_goal"</span>: null,
    <span class="s2">"payee_document"</span>: <span class="s2">"123.456.789-09"</span>,
    <span class="s2">"payee_name"</span>: <span class="s2">"John Doe"</span>,
    <span class="s2">"ted_goal"</span>: <span class="s2">"00300"</span>,
    <span class="s2">"note"</span>: <span class="s2">"Pagamento feito para outra conta"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payments/10"</span> <span class="o">}</span>,
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"update"</span>, <span class="s2">"method"</span>: <span class="s2">"PUT"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payments/10"</span> <span class="o">}</span>,
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payments/10"</span> <span class="o">}</span>,
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"payment_config"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/payment_configs/1"</span> <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna em JSON as informações detalhadas do Pagamento informado e também suas referências.</p>

<h2 id="lista-de-todos-os-pagamentos">Lista de todos os Pagamentos</h2>
<pre class="highlight shell"><code>Listar Pagamentos

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payments

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payments

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"payments"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações pagamento 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações pagamento 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os Pagamentos que pertencem a sua Conta de Serviço.</p>

<h2 id="cria-o-de-pagamento">Criação de Pagamento</h2>
<pre class="highlight shell"><code>Criar Pagamento

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payments

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payments <span class="se">\</span>
    -d <span class="s1">'{
          "payment_config_id": "1",
          "payment_type": "provider",
          "payment_method": "ted_other_ownership",
          "date": "2017-10-22",
          "amount": "255.99",
          "bank_code": "341",
          "agency": "9358",
          "account": "21500",
          "account_digit": "3",
          "payee_document_type": "cpf",
          "payee_document": "123.456.789-09",
          "payee_name": "Jane Doe"
          "note": "Pagamento para fornecedores",
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"payment_config_id"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
        <span class="s2">"payment_type"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo Pagamento, retornando as informações do mesmo em caso de sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros comuns à todas as formas de pagamento</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payment_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da configuração de pagamento à qual o pagamento irá pertencer</td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td><strong>(requerido)</strong> forma de pagamento (&#39;credit_other_ownership&rsquo;, &#39;credit_same_ownership&rsquo;, &#39;credit_savings_account&rsquo;, &#39;doc_other_ownership&rsquo;, &#39;doc_same_ownership&rsquo;, &#39;ted_other_ownership&rsquo;, &#39;ted_same_ownership&rsquo;, &#39;gps&rsquo;, &#39;darf&rsquo;, &#39;das&rsquo;, &#39;ipva&rsquo;, icms_sp&rsquo;, &#39;dpvat&rsquo;)</td>
</tr>
<tr>
<td>payment_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo de pagamento. Os possíveis valores variam de acordo com o &ldquo;payment_method&rdquo; (vide tabela 1)</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor do pagamento</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td><strong>(requerido)</strong> data do pagamento</td>
</tr>
<tr>
<td>note</td>
<td>string</td>
<td>(opcional) oberservação do pagamento</td>
</tr>
<tr>
<td>payee_name</td>
<td>string</td>
<td>(opcional) nome do beneficiário</td>
</tr>
</tbody></table>

<h3 id="transfer-ncias-doc-ted-cr-dito">Transferências (DOC, TED, Crédito)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros comuns aos pagamentos via transferência, além de alguns espefíficos para cada tipo de transferência.</p>

<p><strong>Parâmetros comuns à todos os pagamentos via transferência</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> número da conta bancária para o pagamento</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido)</strong> dígito da conta bancária para fazer o pagamento</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> número da agência da conta bancária para fazer o pagamento</td>
</tr>
<tr>
<td>payee_id</td>
<td>string</td>
<td><strong>(requerido, se não enviar payee)</strong> identificador do beneficiário (caso seja fornecido, o parâmetro <code class="prettyprint">payee</code> será ignorado)</td>
</tr>
<tr>
<td>payee*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payee_id)</strong> atributos para a criação de um novo beneficiário ou atualização de um beneficiário existente com o mesmo documento (national_identifier)</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;doc_other_ownership&rsquo; ou &#39;doc_same_ownership&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de 3 dígitos do banco da conta bancária para o pagamento</td>
</tr>
<tr>
<td>doc_goal</td>
<td>string</td>
<td>(opcional) código referente ao objetivo do DOC. Possíveis valores na tabela 2</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;ted_other_ownership&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de 3 dígitos do banco da conta bancária para o pagamento</td>
</tr>
<tr>
<td>ted_goal</td>
<td>string</td>
<td>(opcional) código referente ao objetivo do TED. Possíveis valores na tabela 3</td>
</tr>
</tbody></table>

<h3 id="boleto-banc-rio-boleto-de-mesmo-banco-boleto-de-outro-banco">Boleto Bancário (Boleto de mesmo banco, Boleto de outro Banco)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros espefíficos para o pagamento de boletos bancários.</p>

<aside class="info">
O attributo <code>amount</code> nesse caso é opcional, pois ele é identificado a partir do código de barras.
</aside>

<p><strong>Parâmetros quando payment_method é &#39;billet_same_bank&rsquo; ou &#39;billet_other_bank&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>barcode</td>
<td>string</td>
<td><strong>(requerido)</strong> Código de barras do boleto bancário</td>
</tr>
<tr>
<td>payee_id</td>
<td>string</td>
<td><strong>(requerido, se não enviar payee)</strong> identificador do beneficiário (caso seja fornecido, o parâmetro <code class="prettyprint">payee</code> será ignorado)</td>
</tr>
<tr>
<td>payee*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payee_id)</strong> atributos para a criação de um novo beneficiário ou atualização de um beneficiário existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>(opicional, já que é identificado no código de barras) Data de vencimento do boleto</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional) valor do desconto</td>
</tr>
</tbody></table>

<h3 id="boleto-de-tributo-concecion-rias-tributo-com-c-digo-de-barras-fgts">Boleto de Tributo (Concecionárias, Tributo com código de barras, FGTS)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros espefíficos para o pagamento de boletos de concecionárias ou tributos.</p>

<aside class="info">
O attributo <code>amount</code> nesse caso é opcional, pois ele é identificado a partir do código de barras.
</aside>

<p><strong>Parâmetros quando payment_method é &#39;dealdership&rsquo; ou &#39;tribute_with_barcode&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>barcode</td>
<td>string</td>
<td><strong>(requerido)</strong> Código de barras do boleto bancário</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> Data de vencimento do boleto</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;fgts&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>barcode</td>
<td>string</td>
<td><strong>(requerido)</strong> Código de barras do boleto bancário</td>
</tr>
<tr>
<td>taxpayer_document_type</td>
<td>string</td>
<td><strong>(requerido)</strong> Tipo do documento do contribuinte (&ldquo;cnpj&rdquo; ou &ldquo;cei&rdquo;)</td>
</tr>
<tr>
<td>taxpayer_document</td>
<td>string</td>
<td><strong>(requerido)</strong> Número do documento do contribuinte</td>
</tr>
</tbody></table>

<h3 id="tributos-sem-c-digo-de-barras-gps-darf-das-ipva-icms-sp-dpvat">Tributos sem código de barras (GPS, DARF, DAS, IPVA, ICMS-SP, DPVAT)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros específicos para cada tipo de tributo:</p>

<aside class="info">
O attributo <code>payment_type</code> é automaticamente definido como <code>"tribute"</code>.
</aside>

<p><strong>Parâmetros quando payment_method é &#39;gps&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gps_payment_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código do GPS, de 4 dígitos</td>
</tr>
<tr>
<td>competency_month</td>
<td>string</td>
<td><strong>(requerido)</strong> mês de competência do GPS, repesentado por 2 dígitos</td>
</tr>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do GPS, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>other_entities_amount</td>
<td>decimal</td>
<td>(opcional) valor extra para outras entidades</td>
</tr>
<tr>
<td>monetary_update</td>
<td>decimal</td>
<td>(opcional) atualização monetária, incluindo valores de juros e multa</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;darf&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>calculation_period</td>
<td>date</td>
<td><strong>(requerido)</strong> período de apuração</td>
</tr>
<tr>
<td>receita_federal_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código da receita federal, de 4 dígitos</td>
</tr>
<tr>
<td>reference_number</td>
<td>string</td>
<td>(opcional) número de referência</td>
</tr>
<tr>
<td>mulct_amount</td>
<td>decimal</td>
<td>(opcional) valor da multa</td>
</tr>
<tr>
<td>interest_amount</td>
<td>decimal</td>
<td>(opcional) valor do juros</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;das&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>calculation_period</td>
<td>date</td>
<td><strong>(requerido)</strong> período de apuração</td>
</tr>
<tr>
<td>receita_federal_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código da receita federal, de 4 dígitos</td>
</tr>
<tr>
<td>gross_revenue</td>
<td>decimal</td>
<td><strong>(requerido)</strong> Valor da receita bruta</td>
</tr>
<tr>
<td>gross_revenue_percentage</td>
<td>decimal</td>
<td><strong>(requerido)</strong> Valor da porcentagem da receita bruta</td>
</tr>
<tr>
<td>mulct_amount</td>
<td>decimal</td>
<td>(opcional) valor da multa</td>
</tr>
<tr>
<td>interest_amount</td>
<td>decimal</td>
<td>(opcional) valor do juros</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;ipva&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>city_code</td>
<td>integer</td>
<td><strong>(requerido)</strong> código da cidade</td>
</tr>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do IPVA, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>license_plate</td>
<td>string</td>
<td><strong>(requerido)</strong> placa do carro</td>
</tr>
<tr>
<td>payment_option</td>
<td>string</td>
<td><strong>(requerido)</strong> opção de pagamento. Possíveis valores na tabela 4</td>
</tr>
<tr>
<td>renavam</td>
<td>string</td>
<td><strong>(requerido)</strong> número do Renavam</td>
</tr>
<tr>
<td>uf</td>
<td>string</td>
<td><strong>(requerido)</strong> estado, representado por seu acrônimo (RJ, SC, etc)</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional, requerido quando <code class="prettyprint">payment_option</code> for &#39;single_with_discount&rsquo;) valor do desconto.</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;icms_sp&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>receita_federal_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código da receita federal, de 4 dígitos</td>
</tr>
<tr>
<td>competency_month</td>
<td>string</td>
<td><strong>(requerido)</strong> mês de competência do ICMS-SP, repesentado por 2 dígitos</td>
</tr>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do ICMS-SP, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>state_registration</td>
<td>string</td>
<td><strong>(requerido)</strong> registro estadual</td>
</tr>
<tr>
<td>active_debt_registration</td>
<td>string</td>
<td><strong>(requerido)</strong> registro de dívida ativa</td>
</tr>
<tr>
<td>installment_number</td>
<td>string</td>
<td><strong>(requerido)</strong> número da prestação</td>
</tr>
<tr>
<td>mulct_amount</td>
<td>decimal</td>
<td>(opcional) valor da multa</td>
</tr>
<tr>
<td>interest_amount</td>
<td>decimal</td>
<td>(opcional) valor do juros</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;dpvat&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do DPVAT, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>license_plate</td>
<td>string</td>
<td><strong>(requerido)</strong> placa do carro</td>
</tr>
<tr>
<td>renavam</td>
<td>string</td>
<td><strong>(requerido)</strong> número do Renavam</td>
</tr>
<tr>
<td>uf</td>
<td>string</td>
<td><strong>(requerido)</strong> estado, representado por seu acrônimo (RJ, SC, etc)</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional) valor do desconto.</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>(opcional) data de vencimento</td>
</tr>
<tr>
<td>city_code</td>
<td>integer</td>
<td>(opcional) código da cidade</td>
</tr>
</tbody></table>

<p><strong>payee</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do beneficiário (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do beneficiário</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do beneficiário</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-pagamento">Atualização de Pagamento</h2>
<pre class="highlight shell"><code>Atualizar Pagamento

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/payments/:id
  PATCH https://app.cobrato.com/api/v1/payments/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/payents/:id <span class="se">\</span>
    -d <span class="s1">'{
          "amount": "125.99"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM PAGAMENTO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"amount"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Atualiza um determinado Pagamento, retornando as informações do mesmo em caso de sucesso. Se houverem erros, eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros comuns a todas as formas de pagamento</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>decimal</td>
<td><strong>(requerido)</strong> valor do pagamento</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td><strong>(requerido)</strong> data do pagamento</td>
</tr>
<tr>
<td>note</td>
<td>string</td>
<td>(opcional) oberservação do pagamento</td>
</tr>
</tbody></table>

<h3 id="transfer-ncias-doc-ted-cr-dito">Transferências (DOC, TED, Crédito)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros comuns aos pagamentos via transferência, além de alguns espefíficos para cada tipo de transferência.</p>

<p><strong>Parâmetros comuns à todos os pagamentos via transferência</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código de 3 dígitos do banco da conta bancária para o pagamento</td>
</tr>
<tr>
<td>account</td>
<td>string</td>
<td><strong>(requerido)</strong> número da conta bancária para o pagamento</td>
</tr>
<tr>
<td>account_digit</td>
<td>string</td>
<td><strong>(requerido)</strong> dígito da conta bancária para fazer o pagamento</td>
</tr>
<tr>
<td>agency</td>
<td>string</td>
<td><strong>(requerido)</strong> número da agência da conta bancária para fazer o pagamento</td>
</tr>
<tr>
<td>payee_id</td>
<td>string</td>
<td><strong>(requerido, se não enviar payee)</strong> identificador do beneficiário (caso seja fornecido, o parâmetro <code class="prettyprint">payee</code> será ignorado)</td>
</tr>
<tr>
<td>payee*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payee_id)</strong> atributos para a criação de um novo beneficiário ou atualização de um beneficiário existente com o mesmo documento (national_identifier)</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;doc_other_ownership&rsquo; ou &#39;doc_same_ownership&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>doc_goal</td>
<td>string</td>
<td>(opcional) código referente ao objetivo do DOC. Possíveis valores na tabela 2</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;ted_other_ownership&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>ted_goal</td>
<td>string</td>
<td>(opcional) código referente ao objetivo do TED. Possíveis valores na tabela 3</td>
</tr>
</tbody></table>

<h3 id="boleto-banc-rio-boleto-de-mesmo-banco-boleto-de-outro-banco">Boleto Bancário (Boleto de mesmo banco, Boleto de outro Banco)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros espefíficos para o pagamento de boletos bancários.</p>

<p><strong>Parâmetros quando payment_method é &#39;billet_same_bank&rsquo; ou &#39;billet_other_bank&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payee_id</td>
<td>string</td>
<td><strong>(requerido, se não enviar payee)</strong> identificador do beneficiário (caso seja fornecido, o parâmetro <code class="prettyprint">payee</code> será ignorado)</td>
</tr>
<tr>
<td>payee*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payee_id)</strong> atributos para a criação de um novo beneficiário ou atualização de um beneficiário existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> Data de vencimento do boleto</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional) valor do desconto</td>
</tr>
</tbody></table>

<h3 id="boleto-de-tributo-concecion-rias-tributo-com-c-digo-de-barras-fgts">Boleto de Tributo (Concecionárias, Tributo com código de barras, FGTS)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros espefíficos para o pagamento de boletos de concecionárias ou tributos.</p>

<p><strong>Parâmetros quando payment_method é &#39;dealdership&rsquo; ou &#39;tribute_with_barcode&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> Data de vencimento do boleto</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;fgts&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>taxpayer_document_type</td>
<td>string</td>
<td><strong>(requerido)</strong> Tipo do documento do contribuinte (&ldquo;cnpj&rdquo; ou &ldquo;cei&rdquo;)</td>
</tr>
<tr>
<td>taxpayer_document</td>
<td>string</td>
<td><strong>(requerido)</strong> Número do documento do contribuinte</td>
</tr>
</tbody></table>

<h3 id="tributos-sem-c-digo-de-barras-gps-darf-das-ipva-icms-sp-dpvat">Tributos sem código de barras (GPS, DARF, DAS, IPVA, ICMS-SP, DPVAT)</h3>

<p>Além dos parâmetros comuns à todas as formas de pagamento, temos parâmetros específicos para cada tipo de tributo:</p>

<p><strong>Parâmetros quando payment_method é &#39;gps&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>gps_payment_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código do GPS, de 4 dígitos</td>
</tr>
<tr>
<td>competency_month</td>
<td>string</td>
<td><strong>(requerido)</strong> mês de competência do GPS, repesentado por 2 dígitos</td>
</tr>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do GPS, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>other_entities_amount</td>
<td>decimal</td>
<td>(opcional) valor extra para outras entidades</td>
</tr>
<tr>
<td>monetary_update</td>
<td>decimal</td>
<td>(opcional) atualização monetária, incluindo valores de juros e multa</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;darf&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>calculation_period</td>
<td>date</td>
<td><strong>(requerido)</strong> período de apuração</td>
</tr>
<tr>
<td>receita_federal_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código da receita federal, de 4 dígitos</td>
</tr>
<tr>
<td>reference_number</td>
<td>string</td>
<td>(opcional) número de referência</td>
</tr>
<tr>
<td>mulct_amount</td>
<td>decimal</td>
<td>(opcional) valor da multa</td>
</tr>
<tr>
<td>interest_amount</td>
<td>decimal</td>
<td>(opcional) valor do juros</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;das&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>calculation_period</td>
<td>date</td>
<td><strong>(requerido)</strong> período de apuração</td>
</tr>
<tr>
<td>receita_federal_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código da receita federal, de 4 dígitos</td>
</tr>
<tr>
<td>gross_revenue</td>
<td>decimal</td>
<td><strong>(requerido)</strong> Valor da receita bruta</td>
</tr>
<tr>
<td>gross_revenue_percentage</td>
<td>decimal</td>
<td><strong>(requerido)</strong> Valor da porcentagem da receita bruta</td>
</tr>
<tr>
<td>mulct_amount</td>
<td>decimal</td>
<td>(opcional) valor da multa</td>
</tr>
<tr>
<td>interest_amount</td>
<td>decimal</td>
<td>(opcional) valor do juros</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;ipva&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>city_code</td>
<td>integer</td>
<td><strong>(requerido)</strong> código da cidade</td>
</tr>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do IPVA, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>license_plate</td>
<td>string</td>
<td><strong>(requerido)</strong> placa do carro</td>
</tr>
<tr>
<td>payment_option</td>
<td>string</td>
<td><strong>(requerido)</strong> opção de pagamento. Possíveis valores na tabela 4</td>
</tr>
<tr>
<td>renavam</td>
<td>string</td>
<td><strong>(requerido)</strong> número do Renavam</td>
</tr>
<tr>
<td>uf</td>
<td>string</td>
<td><strong>(requerido)</strong> estado, representado por seu acrônimo (RJ, SC, etc)</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional, requerido quando <code class="prettyprint">payment_option</code> for &#39;single_with_discount&rsquo;) valor do desconto.</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;icms_sp&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td><strong>(requerido)</strong> data de vencimento</td>
</tr>
<tr>
<td>receita_federal_code</td>
<td>string</td>
<td><strong>(requerido)</strong> código da receita federal, de 4 dígitos</td>
</tr>
<tr>
<td>competency_month</td>
<td>string</td>
<td><strong>(requerido)</strong> mês de competência do ICMS-SP, repesentado por 2 dígitos</td>
</tr>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do ICMS-SP, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>state_registration</td>
<td>string</td>
<td><strong>(requerido)</strong> registro estadual</td>
</tr>
<tr>
<td>active_debt_registration</td>
<td>string</td>
<td><strong>(requerido)</strong> registro de dívida ativa</td>
</tr>
<tr>
<td>installment_number</td>
<td>string</td>
<td><strong>(requerido)</strong> número da prestação</td>
</tr>
<tr>
<td>mulct_amount</td>
<td>decimal</td>
<td>(opcional) valor da multa</td>
</tr>
<tr>
<td>interest_amount</td>
<td>decimal</td>
<td>(opcional) valor do juros</td>
</tr>
</tbody></table>

<p><strong>Parâmetros quando payment_method é &#39;dpvat&rsquo;</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>competency_year</td>
<td>string</td>
<td><strong>(requerido)</strong> ano de competência do DPVAT, repesentado por 4 dígitos</td>
</tr>
<tr>
<td>license_plate</td>
<td>string</td>
<td><strong>(requerido)</strong> placa do carro</td>
</tr>
<tr>
<td>renavam</td>
<td>string</td>
<td><strong>(requerido)</strong> número do Renavam</td>
</tr>
<tr>
<td>uf</td>
<td>string</td>
<td><strong>(requerido)</strong> estado, representado por seu acrônimo (RJ, SC, etc)</td>
</tr>
<tr>
<td>discount_amount</td>
<td>decimal</td>
<td>(opcional) valor do desconto.</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>(opcional) data de vencimento</td>
</tr>
<tr>
<td>city_code</td>
<td>integer</td>
<td>(opcional) código da cidade</td>
</tr>
</tbody></table>

<p><strong>payee</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do beneficiário (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do beneficiário</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do beneficiário</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-pagamento">Exclusão de Pagamento</h2>
<pre class="highlight shell"><code>Excluir Pagamento

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/payment/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/payment/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM PAGAMENTO INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado Pagamento. As mudanças são irreversíveis.</p>

<h2 id="cancelamento-de-pagamento">Cancelamento de Pagamento</h2>
<pre class="highlight shell"><code>Cancelar Pagamento

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payment/:id/cancel

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payment/:id/cancel

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM PAGAMENTO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"registration_status"</span>: <span class="o">[</span><span class="s2">"não permite cancelamento. Somente pagamentos com status 'Pagamento registrado' podem ser cancelados"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Inicia o processo de cancelamento de um determinado Pagamento, retornando JSON contendo as informações do pagamento em caso de sucesso ou os erros, caso haja algum.</p>

<p>Após iniciar o processo de cancelamento será necessário gerar um arquivo de remessa, enviar para o banco e esperar o arquivo de retorno confirmando o cancelamento.</p>

<h2 id="marcar-pagamento-como-n-o-autorizado">Marcar Pagamento como não autorizado</h2>
<pre class="highlight shell"><code>Marcar Pagamento como não autorizado

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payment/:id/unauthorize

  EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payment/:id/unauthorize

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM PAGAMENTO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"registration_status"</span>: <span class="o">[</span><span class="s2">"Não é possível marcar este pagamento como não autorizado. Somente pagamentos com status 'registrado', NÃO efetivados e vencidos podem ser marcados como não autorizados"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Marca um determinado Pagamento como não autorizado, retornando JSON com as informações do pagamento em caso de sucesso ou, caso contrário, os erros.</p>

<h2 id="reagendar-pagamento">Reagendar Pagamento</h2>
<pre class="highlight shell"><code>Reagendar Pagamento

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payments/:id/reschedule

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/payents/:id/reschedule <span class="se">\</span>
    -d <span class="s1">'{
          "date": "2018-10-02"
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM PAGAMENTO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"date"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
        <span class="s2">"registration_status"</span>: <span class="o">[</span><span class="s2">"não permite reagendar pagamento. Somente pagamentos com status 'Pagamento registrado', podem ser reagendados"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Reagenda um determinado Pagamento. Se houverem erros, eles serão informados no corpo da resposta.</p>

<h2 id="marcar-pagamento-com-erro-no-registro">Marcar pagamento com Erro no Registro</h2>
<pre class="highlight shell"><code>Marcar pagamento com Erro no Registro

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payment/:id/register_error

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/payment/:id/register_error

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM PAGAMENTO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:
      <span class="o">{</span>
        <span class="s2">"registration_status"</span>: <span class="o">[</span><span class="s2">"não permite marcar como Erro no Registro"</span><span class="o">]</span>
      <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Marca o pagamento com Erro no registro manualmente.</p>

<p>Importante para pagamentos que tiveram o lote rejeitado pelo sistema do banco. Neste caso o banco não envia nenhum erro no arquivo de retorno e é necessário marcar manualmente.</p>

<h2 id="schema-de-pagamento">Schema de Pagamento</h2>
<pre class="highlight shell"><code>Schema de Pagamento

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payments/schema

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/payments/schema?payment_config_id<span class="o">=</span>1&amp;payment_method<span class="o">=</span>ted_other_ownership

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"schema"</span>: <span class="o">{</span>
      // json schema
    <span class="o">}</span>,
    <span class="s2">"form"</span>: <span class="o">{</span>
      // json schema form
    <span class="o">}</span>
  <span class="o">}</span>

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"payment_method"</span>:[<span class="s2">"ao menos um dos parâmetros deve ser enviado: payment_method e barcode"</span><span class="o">]</span>,
      <span class="s2">"barcode"</span>:[<span class="s2">"ao menos um dos parâmetros deve ser enviado: payment_method e barcode"</span><span class="o">]</span>,
      <span class="s2">"payment_config_id"</span>:[<span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna o <a href="http://json-schema.org/">json schema</a> e o <a href="https://github.com/myfreecomm/nexaas-json-schema-form">json schema form</a> com as informações necessárias para criar um pagamento, baseado nos dados enviados.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payment_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> código de identificação da configuração de pagamento à qual o pagamento irá pertencer</td>
</tr>
<tr>
<td>payment_method</td>
<td>string</td>
<td><strong>(requerido, ou barcode)</strong> forma de pagamento (&#39;credit_other_ownership&rsquo;, &#39;credit_same_ownership&rsquo;, &#39;credit_savings_account&rsquo;, &#39;doc_other_ownership&rsquo;, &#39;doc_same_ownership&rsquo;, &#39;ted_other_ownership&rsquo;, &#39;ted_same_ownership&rsquo;, &#39;gps&rsquo;, &#39;darf&rsquo;, &#39;das&rsquo;, &#39;ipva&rsquo;, icms_sp&rsquo;, &#39;dpvat&rsquo;)</td>
</tr>
<tr>
<td>barcode</td>
<td>string</td>
<td><strong>(requerido, ou payment_method)</strong> código de barras do pagamento</td>
</tr>
</tbody></table>

<h2 id="tabelas">Tabelas</h2>

<h3 id="poss-veis-valores-para-payment_type-tabela-1">Possíveis valores para payment_type (tabela 1)</h3>

<table><thead>
<tr>
<th style="text-align: right">payment_type ⟶ <br> payment_method ↴</th>
<th style="text-align: center">salary <br>&nbsp;</th>
<th style="text-align: center">dividend <br>&nbsp;</th>
<th style="text-align: center">debenture <br>&nbsp;</th>
<th style="text-align: center">traveling_expense <br>&nbsp;</th>
<th style="text-align: center">authorized_representative <br>&nbsp;</th>
<th style="text-align: center">provider <br>&nbsp;</th>
<th style="text-align: center">benefit <br>&nbsp;</th>
<th style="text-align: center">insurance_claim <br>&nbsp;</th>
<th style="text-align: center">investment_fund <br>&nbsp;</th>
<th style="text-align: center">other <br>&nbsp;</th>
<th style="text-align: center">tribute <br>&nbsp;</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: right">credit_other_ownership</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">credit_same_ownership</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">credit_savings_account</td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">doc_other_ownership</td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">doc_same_ownership</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">ted_other_ownership</td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">ted_same_ownership</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">billet_other_bank</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">billet_same_bank</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">dealdership</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
<td style="text-align: center"></td>
</tr>
<tr>
<td style="text-align: right">tribute_with_barcode</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
<tr>
<td style="text-align: right">fgts</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
<tr>
<td style="text-align: right">gps</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
<tr>
<td style="text-align: right">darf</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
<tr>
<td style="text-align: right">das</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
<tr>
<td style="text-align: right">ipva</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
<tr>
<td style="text-align: right">icms_sp</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
<tr>
<td style="text-align: right">dpvat</td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center"></td>
<td style="text-align: center">X</td>
</tr>
</tbody></table>

<h3 id="poss-veis-valores-para-doc_goal-tabela-2">Possíveis valores para doc_goal (tabela 2)</h3>

<p>Quando <em>payment_method</em> for &#39;doc_other_ownership&rsquo; todos os valores são aceitos. Contudo, quando <em>payment_method</em> for &#39;doc_same_ownership&rsquo;, apenas os valores &#39;01&rsquo; e &#39;11&rsquo; são aceitos.</p>

<table><thead>
<tr>
<th>Código</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>01</td>
<td>Crédito em Conta</td>
</tr>
<tr>
<td>02</td>
<td>Pagamento de Aluguel / Condomínio</td>
</tr>
<tr>
<td>03</td>
<td>Pagamento de Duplicata / Títulos</td>
</tr>
<tr>
<td>04</td>
<td>Pagamento de Dividendos</td>
</tr>
<tr>
<td>05</td>
<td>Pagamento de Mensalidade Escolar</td>
</tr>
<tr>
<td>06</td>
<td>Pagamento de Salários</td>
</tr>
<tr>
<td>07</td>
<td>Pagamento de Fornecedores / Honorários</td>
</tr>
<tr>
<td>08</td>
<td>Operações de Câmbio / Fundos</td>
</tr>
<tr>
<td>09</td>
<td>Repasse de Arrecadação / Pagamento de Tributos</td>
</tr>
<tr>
<td>10</td>
<td>Transferência Internacional de Reais</td>
</tr>
<tr>
<td>11</td>
<td>DOC para Poupança</td>
</tr>
<tr>
<td>12</td>
<td>DOC para Depósito Judicial</td>
</tr>
<tr>
<td>13</td>
<td>Pensão Alimentícia</td>
</tr>
<tr>
<td>99</td>
<td>Outros</td>
</tr>
</tbody></table>

<h3 id="poss-veis-valores-para-ted_goal-tabela-3">Possíveis valores para ted_goal (tabela 3)</h3>

<table><thead>
<tr>
<th>Código</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>00001</td>
<td>Pagamento de Impostos, Tributos e Taxas</td>
</tr>
<tr>
<td>00002</td>
<td>Pagamento a Concessionárias de Serviço Público</td>
</tr>
<tr>
<td>00003</td>
<td>Pagamento de Dividendos</td>
</tr>
<tr>
<td>00004</td>
<td>Pagamento de Salários</td>
</tr>
<tr>
<td>00005</td>
<td>Pagamento de Fornecedores</td>
</tr>
<tr>
<td>00006</td>
<td>Pagamento de Honorários</td>
</tr>
<tr>
<td>00007</td>
<td>Pagamento de Aluguéis e Taxas e Condomínio</td>
</tr>
<tr>
<td>00008</td>
<td>Pagamento de Duplicatas e Títulos</td>
</tr>
<tr>
<td>00009</td>
<td>Pagamento de Honorários</td>
</tr>
<tr>
<td>00010</td>
<td>Crédito em Conta</td>
</tr>
<tr>
<td>00011</td>
<td>Pagamento a Corretoras</td>
</tr>
<tr>
<td>00016</td>
<td>Crédito em Conta Investimento</td>
</tr>
<tr>
<td>00100</td>
<td>Depósito Judicial</td>
</tr>
<tr>
<td>00101</td>
<td>Pensão Alimentícia</td>
</tr>
<tr>
<td>00200</td>
<td>Transferência Internacional de Reais</td>
</tr>
<tr>
<td>00201</td>
<td>Ajuste Posição Mercado Futuro</td>
</tr>
<tr>
<td>00204</td>
<td>Compra/Venda de Ações - Bolsas de Valores e Mercado de Balcão</td>
</tr>
<tr>
<td>00205</td>
<td>Contrato referenciado em Ações/Índices de Ações - BV/BMF</td>
</tr>
<tr>
<td>00300</td>
<td>Restituição de Imposto de Renda</td>
</tr>
<tr>
<td>00500</td>
<td>Restituição de Prêmio de Seguros</td>
</tr>
<tr>
<td>00501</td>
<td>Pagamento de indenização de Sinistro de Seguro</td>
</tr>
<tr>
<td>00502</td>
<td>Pagamento de Prêmio de Co-seguro</td>
</tr>
<tr>
<td>00503</td>
<td>Restituição de prêmio de Co-seguro</td>
</tr>
<tr>
<td>00504</td>
<td>Pagamento de indenização de Co-seguro</td>
</tr>
<tr>
<td>00505</td>
<td>Pagamento de prêmio de Resseguro</td>
</tr>
<tr>
<td>00506</td>
<td>Restituição de prêmio de Resseguro</td>
</tr>
<tr>
<td>00507</td>
<td>Pagamento de Indenização de Sinistro de Resseguro</td>
</tr>
<tr>
<td>00508</td>
<td>Restituição de Indenização de Sinistro de Resseguro</td>
</tr>
<tr>
<td>00509</td>
<td>Pagamento de Despesas com Sinistros</td>
</tr>
<tr>
<td>00510</td>
<td>Pagamento de Inspeções/Vistorias Prévias</td>
</tr>
<tr>
<td>00511</td>
<td>Pagamento de Resgate de Título de Capitalização</td>
</tr>
<tr>
<td>00512</td>
<td>Pagamento de Sorteio de Título de Capitalização</td>
</tr>
<tr>
<td>00513</td>
<td>Pagamento de Devolução de Mensalidade de Título de Capitalização</td>
</tr>
<tr>
<td>00514</td>
<td>Restituição de Contribuição de Plano Previdenciário</td>
</tr>
<tr>
<td>00515</td>
<td>Pagamento de Benefício Previdenciário de Pecúlio</td>
</tr>
<tr>
<td>00516</td>
<td>Pagamento de Benefício Previdenciário de Pensão</td>
</tr>
<tr>
<td>00517</td>
<td>Pagamento de Benefício Previdenciário de Aposentadoria</td>
</tr>
<tr>
<td>00518</td>
<td>Pagamento de Resgate Previdenciário</td>
</tr>
<tr>
<td>00519</td>
<td>Pagamento de Comissão de Corretagem</td>
</tr>
<tr>
<td>00520</td>
<td>Pagamento de Transferências/Portabilidade de Reserva de Seguro/Previdência</td>
</tr>
</tbody></table>

<h3 id="poss-veis-valores-para-payment_option-tabela-4">Possíveis valores para payment_option (tabela 4)</h3>

<table><thead>
<tr>
<th>Opção de pagamento</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>single_with_discount</td>
<td>Simples com desconto</td>
</tr>
<tr>
<td>single_without_discount</td>
<td>Simples sem desconto</td>
</tr>
<tr>
<td>installment_1</td>
<td>Primeira prestação</td>
</tr>
<tr>
<td>installment_2</td>
<td>Segunda prestação</td>
</tr>
<tr>
<td>installment_3</td>
<td>Terceira prestação</td>
</tr>
<tr>
<td>installment_4</td>
<td>Quarta prestação</td>
</tr>
<tr>
<td>installment_5</td>
<td>Quinta prestação</td>
</tr>
<tr>
<td>installment_6</td>
<td>Sexta prestação</td>
</tr>
</tbody></table>

          <h1 id="cart-o-de-cr-dito">Cartão de Crédito</h1>
<pre class="highlight shell"><code>Cartão de Crédito

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 8,
    <span class="s2">"number"</span>: <span class="s2">"545301******6167"</span>,
    <span class="s2">"holder_name"</span>: <span class="s2">"John Doe"</span>,
    <span class="s2">"brand"</span>: <span class="s2">"amex"</span>,
    <span class="s2">"expiration"</span>: <span class="s2">"05/18"</span>,
    <span class="s2">"avs_address"</span>: <span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"avs_number"</span>: <span class="s2">"100"</span>,
    <span class="s2">"avs_complement"</span>: <span class="s2">"Apto 103"</span>,
    <span class="s2">"avs_district"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"avs_zipcode"</span>: <span class="s2">"99000-750"</span>,
    <span class="s2">"reusability_status"</span>: <span class="s2">"error"</span>,
    <span class="s2">"reusability_error_message"</span>: <span class="s2">"Código de segurança inválido"</span>,
    <span class="s2">"payer_id"</span>: 1,
    <span class="s2">"charge_config_id"</span>: 12,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/credit_cards/8"</span> <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Os Cartões de Crédito pertencem ao Pagador utilizado no momento de sua criação (primeira utilização em uma Cobrança) e, dessa forma, só pode ser reutilizado em Cobranças onde o Pagador é o mesmo.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>string</td>
<td>números do cartão (incompleto, apenas para identificação)</td>
</tr>
<tr>
<td>expiration</td>
<td>string</td>
<td>expiração do cartão, no formato &ldquo;mm/aa&rdquo;</td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td>nome do dono do cartão</td>
</tr>
<tr>
<td>brand</td>
<td>string</td>
<td>bandeira do cartão (visa, mastercard, amex, elo, diners, discover, jcb, aura)</td>
</tr>
<tr>
<td>avs_address</td>
<td>string</td>
<td>endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_number</td>
<td>string</td>
<td>número do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_complement</td>
<td>string</td>
<td>complemento endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_district</td>
<td>string</td>
<td>bairro do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_zipcode</td>
<td>string</td>
<td>cep do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>reusability_status</td>
<td>string</td>
<td>status da configuração para possibilitar o reuso o cartão em futuras cobranças (pending, ok, error)</td>
</tr>
<tr>
<td>reusability_error_message</td>
<td>string</td>
<td>informa o motivo do erro na configuração de reuso, apenas quando o atributo reusability_status tem o valor &ldquo;error&rdquo;</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td>identificador do Payer ao qual este cartão pertence</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td>identificador da ChargeConfig à qual este cartão pertence</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links do beneficiário</td>
</tr>
</tbody></table>

<p><strong>reusability_status</strong></p>

<p>O atributo <code class="prettyprint">reusability_status</code> pode ter os seguintes valores:</p>

<table><thead>
<tr>
<th>Valor</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>pending</td>
<td>assim que é criado e ainda não foi feita verificação do cartão através de uma cobrança</td>
</tr>
<tr>
<td>error</td>
<td>quando ocorre um erro na utilização do cartão (o erro ficará descrito no atributo <code class="prettyprint">reusability_error_message</code>)</td>
</tr>
<tr>
<td>reusable</td>
<td>quando já foi feita uma cobrança com sucesso utilizando o cartão e ele foi salvo para ser reutilizado em futuras cobranças</td>
</tr>
<tr>
<td>not_reusable</td>
<td>quando o cartão não foi salvo para ser reutilizado</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-cart-o-de-cr-dito">Informações do Cartão de Crédito</h2>
<pre class="highlight shell"><code>Mostrar Cartão de Crédito

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/credit_cards/:credit_card_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/credit_cards/:credit_card_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 8,
    <span class="s2">"number"</span>: <span class="s2">"545301******6167"</span>,
    <span class="s2">"holder_name"</span>: <span class="s2">"John Doe"</span>,
    <span class="s2">"brand"</span>: <span class="s2">"amex"</span>,
    <span class="s2">"expiration"</span>: <span class="s2">"05/18"</span>,
    <span class="s2">"avs_address"</span>: <span class="s2">"Rua Julio de Castilhos"</span>,
    <span class="s2">"avs_number"</span>: <span class="s2">"100"</span>,
    <span class="s2">"avs_complement"</span>: <span class="s2">"Apto 103"</span>,
    <span class="s2">"avs_district"</span>: <span class="s2">"Centro"</span>,
    <span class="s2">"avs_zipcode"</span>: <span class="s2">"99000-750"</span>,
    <span class="s2">"reusability_status"</span>: <span class="s2">"error"</span>,
    <span class="s2">"reusability_error_message"</span>: <span class="s2">"Código de segurança inválido"</span>,
    <span class="s2">"payer_id"</span>: 1,
    <span class="s2">"charge_config_id"</span>: 12,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span> <span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/credit_cards/8"</span> <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna as informações detalhadas do cartão de crédito informado em JSON.</p>

<h2 id="lista-dos-cart-es-de-cr-dito">Lista dos Cartões de crédito</h2>
<pre class="highlight shell"><code>Listar Cartões de Crédito

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/credit_cards

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/credit_cards?charge_config_id<span class="o">=</span>12

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"credit_cards"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações cartão de crédito 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações cartão de crédito 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo os Cartões de Crédito pertencentes à sua Conta de Serviço.</p>

<p>É possível filtrar a lista através dos parâmetros: <code class="prettyprint">payer_id</code>, <code class="prettyprint">charge_config_id</code>, <code class="prettyprint">number</code>, <code class="prettyprint">holder_name</code>, <code class="prettyprint">brand</code>, <code class="prettyprint">reusability_status</code></p>

<h2 id="cria-o-de-cart-o-de-cr-dito">Criação de Cartão de Crédito</h2>
<pre class="highlight shell"><code>Criar Cartão de Crédito

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/credit_cards

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/credit_cards <span class="se">\</span>
    -d <span class="s1">'{
        "number": "5453010000066167",
        "holder_name": "John Doe",
        "brand": "mastercard",
        "expiration": "05/18",
        "cvv": "123",
        "avs_address": "Rua Julio de Castilhos",
        "avs_number": "100",
        "avs_complement": "Apto 103",
        "avs_district": "Centro",
        "avs_zipcode": "99000-750",
        "payer_id": 1,
        "charge_config_id": 12,
        "soft_descriptor": "CompanyName"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"number"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"holder_name"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo Cartão de Crédito com o objetivo de utilizá-lo em futuras cobranças
sem a necessidade de solicitar novamente ao usuário os dados do cartão. Para que
o cartão seja homologado, é feita uma cobrança com o valor entre R$ 1,00 e R$
2,00 que é automaticamente cancelada em seguida.</p>

<p>Se houverem erros a criação o cartão, eles serão informados no corpo da resposta.</p>

<p>Em caso de sucesso, as informações do cartão são retornadas. Contudo, o cartão
ainda não estará apto para re-utilização em novas cobranças. Isto só ocorrerá
quando a cobrança de homologação for concluída com sucesso. Esta informação pode
ser obtida através do atributo <code class="prettyprint">reusability_status</code>. Caso ele tenha o valor
&ldquo;pending&rdquo;, quer dizer que a cobrança ainda não foi feita. Caso tenha o valor
&ldquo;reusable&rdquo; quer dizer que o cartão pode ser reutilizado. Caso tenha o valor
&ldquo;error&rdquo;,  significa que ocorreu um erro na cobrança de homologação, e o motivo
pode ser verificado no atributo <code class="prettyprint">reusability_error_message</code>.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>string</td>
<td><strong>(requerido)</strong> número do cartão</td>
</tr>
<tr>
<td>expiration</td>
<td>string</td>
<td><strong>(requerido)</strong> expiração do cartão, no formato &ldquo;mm/aa&rdquo;</td>
</tr>
<tr>
<td>holder_name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do dono do cartão</td>
</tr>
<tr>
<td>brand</td>
<td>string</td>
<td><strong>(requerido)</strong> bandeira do cartão (visa, mastercard, amex, elo, diners, discover, jcb, aura)</td>
</tr>
<tr>
<td>cvv</td>
<td>string</td>
<td><strong>(requerido)</strong> código de segurança do cartão</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>integer</td>
<td><strong>(requerido)</strong> identificador da ChargeConfig à qual este cartão pertence</td>
</tr>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes )</strong> identificador do pagador ao qual este cartão pertence (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id )</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
<tr>
<td>avs_address</td>
<td>string</td>
<td>(opcional) endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_number</td>
<td>string</td>
<td>(opcional) número do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_complement</td>
<td>string</td>
<td>(opcional) complemento endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_district</td>
<td>string</td>
<td>(opcional) bairro do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>avs_zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço de cobrança do cartão</td>
</tr>
<tr>
<td>soft_descriptor</td>
<td>string</td>
<td>(opcional) descritor que irá aparecer na fatura do cartão referente à cobrança de homologação (no máximo 13 caracteres)</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<aside class="notice">
Caso exista um Pagador (Payer) com o mesmo <code>national_identifier</code>, não será criado um novo, mas sim atualizado o existente.
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-cart-o-de-cr-dito">Atualização de Cartão de Crédito</h2>
<pre class="highlight shell"><code>Atualizar Cartão de Crédito

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/credit_cards/:credit_card_id
  PATCH https://app.cobrato.com/api/v1/credit_cards/:credit_card_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/credit_cards/1 <span class="se">\</span>
    -d <span class="s1">'{
        "payer_id": 5
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

    <span class="o">{</span>
      <span class="s2">"errors"</span>: <span class="o">{</span>
        <span class="s2">"payer_id"</span>: <span class="o">[</span><span class="s2">"não existe para a sua conta"</span><span class="o">]</span>
      <span class="o">}</span>
    <span class="o">}</span>

</code></pre>

<p>Atualiza um determinado Cartão de Crédito, retornado as informações do mesmo caso haja sucesso. Se houverem erros, eles serão informados no corpo da resposta.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>payer_id</td>
<td>integer</td>
<td><strong>(requerido, se não enviar payer_attributes )</strong> identificador do pagador ao qual este cartão pertence (caso seja fornecido, o parâmetro payer_attributes será ignorado)</td>
</tr>
<tr>
<td>payer_attributes*</td>
<td>object</td>
<td><strong>(requerido, se não enviar payer_id )</strong> atributos para a criação de um novo pagador ou atualização de um pagador existente com o mesmo documento (national_identifier)</td>
</tr>
</tbody></table>

<p><strong>payer_attributes</strong></p>

<aside class="notice">
Caso exista um Pagador (Payer) com o mesmo <code>national_identifier</code>, não será criado um novo, mas sim atualizado o existente.
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td><strong>(requerido)</strong> tipo do documento do pagador (cpf ou cnpj)</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td><strong>(requerido)</strong> documento do pagador</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td><strong>(requerido)</strong> nome do pagador</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>(opcional) número do endereço do pagador</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td>(opcional) complemento do endereço do pagador</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>(opcional) rua do endereço do pagador</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>(opcional) bairro do endereço do pagador</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>(opcional) cep do endereço do pagador</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>(opcional) cidade do endereço do pagador</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>(opcional) sigla do estado do endereço do pagador (&ldquo;RJ&rdquo; por exemplo)</td>
</tr>
</tbody></table>

<h2 id="lista-de-todas-as-cobran-as-feitas-com-o-cart-o-de-cr-dito">Lista de Todas as cobranças feitas com o cartão de crédito</h2>
<pre class="highlight shell"><code>Listar as Cobranças realizadas com o Cartão de Crédito

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/credit_cards/:id/charges

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/credit_cards/12/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações cobrança 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações cobrança 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista paginada em JSON contendo todos as Cobranças realizadas com o
Cartão de Crédito.</p>

<p>É possível filtrar a lista através dos parâmetros: <code class="prettyprint">total_amount</code>, <code class="prettyprint">received</code>, <code class="prettyprint">payment_gateway_status</code>.</p>

          <h1 id="cnab-de-remessa">CNAB de Remessa</h1>
<pre class="highlight shell"><code>CNAB de Remessa

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"config_id"</span>: 1,
    <span class="s2">"type"</span>: <span class="s2">"charge"</span>,
    <span class="s2">"filename"</span>: <span class="s2">"CI14058A.REM"</span>,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"config"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1/file"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"items"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"http://localhost:3000/api/v1/remittance_cnabs/1/items"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Os Arquivos CNAB de Remessa são arquivos enviados para o banco com o objetivo de registrar novas cobranças/pagamentos, podendo ser gerado a partir de um ou mais items (Cobranças ou Pagamentos). Se forem enviados items de Configurações diferentes, será gerado um CNAB de remessa para cada Configuração.</p>

<aside class="warning">
Se seu plano não der direito a utilização desta API, a resposta com será com o status <strong>403 Forbidden</strong>!
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>identificador do CNAB de remessa</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>indica o tipo de arquivo de remessa (&lsquo;charge&rsquo; ou &#39;payment&rsquo;)</td>
</tr>
<tr>
<td>config_id</td>
<td>string</td>
<td>identificador da configuração no Cobrato relacionada ao arquivo de remessa</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>string</td>
<td>(DEPRECATED: use config_id) identificador da configuração de cobrança no Cobrato</td>
</tr>
<tr>
<td>filename</td>
<td>string</td>
<td>nome do arquivo de remessa</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>situação da remessa, podendo ser &ldquo;processing&rdquo; (processando), &ldquo;processed&rdquo; (processado) e &ldquo;processing_error&rdquo; (erro de processamento)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionado CNAB de remessa</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-cnab-de-remessa">Informações do CNAB de Remessa</h2>
<pre class="highlight shell"><code>Mostrar CNAB de Remessa

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"config_id"</span>: 1,
    <span class="s2">"type"</span>: <span class="s2">"charge"</span>,
    <span class="s2">"filename"</span>: <span class="s2">"CI14058A.REM"</span>,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"config"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1/file"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"items"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"http://localhost:3000/api/v1/remittance_cnabs/1/items"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas em JSON do CNAB de remessa informado.</p>

<h2 id="lista-de-todas-as-cnabs-de-remessa">Lista de Todas as CNABs de Remessa</h2>
<pre class="highlight shell"><code>Listar CNABs de Remessa

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"remittance_cnabs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de remessa 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de remessa 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os CNABs de remessa que pertencem a sua Conta de Serviço.</p>

<h2 id="cria-o-de-arquivo-cnab-de-remessa">Criação de Arquivo CNAB de Remessa</h2>
<pre class="highlight shell"><code>Criar Arquivo CNAB de Remessa

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/remittance_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/remittance_cnabs <span class="se">\</span>
    -D <span class="s1">'{
        "item_ids": [12, 13, 15, 18]
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"remittance_cnabs"</span>: <span class="o">[</span>
      <span class="s2">"id"</span>: 1,
      <span class="s2">"config_id"</span>: 1,
      <span class="s2">"type"</span>: <span class="s2">"charge"</span>,
      <span class="s2">"filename"</span>: <span class="s2">"CI14058A.REM"</span>,
      <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
      <span class="s2">"charge_config_id"</span>: 1,
      <span class="s2">"_links"</span>:
        <span class="o">[</span>
          <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>,
          <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1"</span><span class="o">}</span>,
          <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"config"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
          <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/1/file"</span><span class="o">}</span>,
          <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"items"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"http://localhost:3000/api/v1/remittance_cnabs/1/items"</span><span class="o">}</span>
        <span class="o">]</span>
    <span class="o">}]</span>
  <span class="o">}</span>

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"item_ids"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria novo(s) Arquivo(s) CNAB de Remessa, retornando as informações do(s) mesmo(s) caso haja sucesso. Se houverem erros, eles serão informados no corpo da resposta.</p>

<p>Um Arquivo de remessa sempre está associado à uma Configuração. Sendo assim, será gerado um CNAB de remessa para cada Configuração envolvida na solicitação de criação, e esse arquivo irá incluir todos os items passíveis de remessa, seja para registrar a inclusão, cancelamento ou alteração.</p>

<p><strong>Parâmetros</strong></p>

<aside class="warning">
  Com exceção do parâmetro <i>type</i>, o menos um dos parâmetros abaixo é requerido. Se mais de um for enviado, será considerado apenas um deles, sendo a ordem de precedência a mesma em que aparecem na lista abaixo.
</aside>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>(optional) Define o tipo de arquivo(s) CNAB de Remessa a ser(em) criado(s). Os possíveis valores são &#39;charge&rsquo; para Cobrança e &#39;payment&rsquo; para Pagamento, sendo que o padrão é &#39;charge&rsquo;</td>
</tr>
<tr>
<td>item_ids</td>
<td>array of integers</td>
<td><strong>(requerido, veja a nota acima)</strong> Lista com os ids dos itens (cobranças ou pagamentos) que devem estar incluídos no(s) arquivo(s) CNAB de Remessa</td>
</tr>
<tr>
<td>charge_ids</td>
<td>array of integers</td>
<td>(DEPRECATED: use item_ids) <strong>(requerido, veja a nota acima)</strong> Lista com os ids das cobranças que devem estar incluídas no(s) arquivo(s) CNAB de Remessa</td>
</tr>
<tr>
<td>config_ids</td>
<td>array of integers</td>
<td><strong>(requerido, veja a nota acima)</strong> Lista com os ids das configurações para as quais devem ser criados os Arquivos CNAB de Remessa</td>
</tr>
<tr>
<td>charge_config_ids</td>
<td>array of integers</td>
<td>(DEPRECATED: use config_ids) <strong>(requerido, veja a nota acima)</strong> Lista com os ids das configurações de cobranças para as quais devem ser criados os Arquivos CNAB de Remessa</td>
</tr>
<tr>
<td>payee_ids</td>
<td>array of integers</td>
<td><strong>(requerido, veja a nota acima)</strong> Lista com os ids dos beneficiários das configurações para as quais devem ser criados os Arquivos CNAB de Remessa</td>
</tr>
<tr>
<td>payee_national_identifiers</td>
<td>array of strings</td>
<td><strong>(requerido, veja a nota acima)</strong> Lista com os números de documento dos beneficiários das configurações para as quais devem ser criados os Arquivos CNAB de Remessa</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-cnab-de-remessa">Exclusão de CNAB de Remessa</h2>
<pre class="highlight shell"><code>Excluir CNAB de Remessa

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/remittance_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CNAB DE REMESSA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado CNAB de remessa. A exclusão é irreversível.</p>

<h2 id="arquivo-do-cnab-de-remessa">Arquivo do CNAB de Remessa</h2>
<pre class="highlight shell"><code>Mostrar Arquivo <span class="k">do </span>CNAB de Remessa <span class="o">(</span>URL<span class="o">)</span>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/file

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/file

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CNAB DE REMESSA INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/remittance_cnabs/cnabs/1/B425065A.RET?AWSAccessKeyId=AKIAIRJFH3YRXV5YRVTQ&amp;Expires=1452277155&amp;Signature=IJ1P%2Bc%2F9vC%2FKlBWuHGIBEl%2BAHKk%3D"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do arquivo de determinado CNAB de remessa.</p>

<aside class="warning">
As URLs disponibilizadas são válidas por apenas 60 minutos. Sendo assim, não armazene o remessa e sempre que for necessário realize uma nova chamada à API.
</aside>

<h2 id="lista-de-todas-as-cobran-a-do-arquivo-de-remessa">Lista de Todas as Cobrança do Arquivo de Remessa</h2>

<aside class="warning">
<b>DEPRECATED</b>: usar o endpoint <i>/api/v1/remittance_cnabs/:id/items</i> para listar os <b>items</b>
</aside>
<pre class="highlight shell"><code>DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/charges

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações cobrança 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações cobrança 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos as cobranças que pertencem ao CNAB de remessa informado.</p>

<h2 id="lista-de-todos-os-items-do-arquivo-de-remessa">Lista de Todos os items do Arquivo de Remessa</h2>
<pre class="highlight shell"><code>DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/items

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/remittance_cnabs/:id/items

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA <span class="o">(</span>COBRANÇAS<span class="o">)</span>

  <span class="o">{</span>
    <span class="s2">"charges"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações <span class="k">do </span>item 1 <span class="o">(</span>charge<span class="o">)</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações <span class="k">do </span>item 2 <span class="o">(</span>charge<span class="o">)</span>
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

EXEMPLO DE CORPO DA RESPOSTA <span class="o">(</span>PAGAMENTOS<span class="o">)</span>

  <span class="o">{</span>
    <span class="s2">"payments"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações <span class="k">do </span>item 1 <span class="o">(</span>payment<span class="o">)</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações <span class="k">do </span>item 2 <span class="o">(</span>payment<span class="o">)</span>
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os items que pertencem ao CNAB de remessa informado.</p>

          <h1 id="cnab-de-retorno">CNAB de Retorno</h1>
<pre class="highlight shell"><code>CNAB de Retorno

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_config_id"</span>: 9, <span class="c"># DEPRECATED</span>
    <span class="s2">"config_id"</span>: 9,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"type"</span>: <span class="s2">"charge"</span>,
    <span class="s2">"filename"</span>: <span class="s2">"CI14058A.RET"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"config"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_config/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1/file"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Os Arquivos CNAB de retorno são arquivos disponibilizados pelo banco com as informações de ocorrências relacionadas às cobranças/pagamentos. Os arquivos CNABs de retorno é relacionado à uma determinada Configuração e o cobrato tentará encontrar os itens relacionados e aplicar as informações enviadas pelo banco.</p>

<aside class="warning">
Se seu plano não der direito a utilização desta API, a resposta com será com o status <strong>403 Forbidden</strong>!
</aside>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>identificador do CNAB de retorno</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>indica o tipo de arquivo de remessa (&lsquo;charge&rsquo; ou &#39;payment&rsquo;)</td>
</tr>
<tr>
<td>config_id</td>
<td>string</td>
<td>identificador da configuração no Cobrato relacionada ao arquivo de remessa</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>string</td>
<td>(DEPRECATED: use config_id) identificador da configuração de cobrança no Cobrato</td>
</tr>
<tr>
<td>filename</td>
<td>string</td>
<td>nome do arquivo de retorno</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>situação do arquivo CNAB, podendo ser &ldquo;processing&rdquo; (processando), &ldquo;processed&rdquo; (processado) e &ldquo;processing_error&rdquo; (erro de processamento)</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links relacionado CNAB de retorno</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-cnab-de-retorno">Informações do CNAB de Retorno</h2>
<pre class="highlight shell"><code>Mostrar CNAB de Retorno

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"charge_config_id"</span>: 9, <span class="c"># DEPRECATED</span>
    <span class="s2">"config_id"</span>: 9,
    <span class="s2">"status"</span>: <span class="s2">"processed"</span>,
    <span class="s2">"type"</span>: <span class="s2">"charge"</span>,
    <span class="s2">"filename"</span>: <span class="s2">"CI14058A.RET"</span>,
    <span class="s2">"_links"</span>:
      <span class="o">[</span>
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"self"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"destroy"</span>, <span class="s2">"method"</span>: <span class="s2">"DELETE"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"charge_config"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/charge_configs/1"</span><span class="o">}</span>,
        <span class="o">{</span><span class="s2">"rel"</span>: <span class="s2">"file"</span>, <span class="s2">"method"</span>: <span class="s2">"GET"</span>, <span class="s2">"href"</span>: <span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/1/file"</span><span class="o">}</span>
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas em JSON do CNAB de retorno informado.</p>

<h2 id="lista-de-todos-os-cnabs-de-retorno">Lista de Todos os CNABs de Retorno</h2>
<pre class="highlight shell"><code>Listar CNABs de Retorno

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"regress_cnabs"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de retorno 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações <span class="k">do </span>CNAB de retorno 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna uma lista em JSON contendo todos os CNABs de retorno que pertencem a sua Conta de Serviço.</p>

<p>É possível filtrar a lista através dos seguintes parâmetros:</p>

<ul>
<li><code class="prettyprint">type</code>: Filtra pelo tipo de arquivo de retorno. O valor a ser informado é string com um dos tipos existentes de arquivo de retorno (&ldquo;charge&rdquo; ou &ldquo;payment&rdquo;).</li>
<li><code class="prettyprint">config_id</code>: Filtra pela configuração informada. O valor informado deve ser o id de uma configuração, seja de cobrança ou de pagamento. É <strong>fortemente recomendado</strong> usar sempre o filtro <code class="prettyprint">type</code> em conjunto com esse para ter os resultados esperados.</li>
</ul>

<h2 id="cria-o-de-cnab-de-retorno">Criação de CNAB de Retorno</h2>
<pre class="highlight shell"><code>Criar CNAB de Retorno

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/regress_cnabs

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/regress_cnabs <span class="se">\</span>
    -d <span class="s1">'{
          "config_id": 1,
          "type": "charge",
          "cnabs": {
            "content":      "MDJSRVRPUk5PMDFDT0JSQU5DQSAgICAgICAzMTMwMDAyMjY5OTAgICA...",
            "content_type": "text/plain"
            "filename":     "example.RET"
          }
        }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    202 Accepted

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>:<span class="o">{</span>
      <span class="s2">"config_id"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>,
      <span class="s2">"cnabs"</span>: <span class="o">[</span><span class="s2">"não pode ficar em branco"</span><span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um CNAB de retorno inicia o processamento do arquivo.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>(optional) Define o tipo de arquivo CNAB de Retorno a ser criado. Os possíveis valores são &#39;charge&rsquo; para Cobrança e &#39;payment&rsquo; para Pagamento, sendo que o padrão é &#39;charge&rsquo;</td>
</tr>
<tr>
<td>config_id</td>
<td>string</td>
<td><strong>(requerido)</strong> identificador da configuração à qual o arquivo CNAB de retorno pertence</td>
</tr>
<tr>
<td>charge_config_id</td>
<td>string</td>
<td>(DEPRECATED: use config_id) <strong>(requerido)</strong> identificador da configuração de cobrança à qual o arquivo CNAB de retorno pertence</td>
</tr>
<tr>
<td>cnabs</td>
<td>object</td>
<td><strong>(requerido)</strong> dados do arquivo CNAB de retorno. O &ldquo;content&rdquo; deve ser uma string com o conteúdo do arquivo codificado em Base64</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-cnab-de-retorno">Exclusão de CNAB de retorno</h2>
<pre class="highlight shell"><code>Excluir CNAB de retorno

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/regress_cnabs/:id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM ARQUIVO DE RETORNO INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado CNAB de retorno. A exclusão é irreversível.</p>

<h2 id="arquivo-do-cnab-de-retorno">Arquivo do CNAB de Retorno</h2>
<pre class="highlight shell"><code>Mostrar Arquivo <span class="k">do </span>CNAB de Retorno <span class="o">(</span>URL<span class="o">)</span>

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/regress_cnabs/:id/file

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/regress_cnabs/:id/file

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM ARQUIVO DE RETORNO INEXISTENTE

    404 Not Found

EXEMPLO DE CORPO DA RESPOSTA COM SUCESSO

  <span class="o">{</span>
    <span class="s2">"url"</span>:<span class="s2">"https://cobrato-uploads.s3.amazonaws.com/regress_cnabs/cnabs/1/B425065A.RET?AWSAccessKeyId=AKIAIRJFH3YRXV5YRVTQ&amp;Expires=1452277155&amp;Signature=IJ1P%2Bc%2F9vC%2FKlBWuHGIBEl%2BAHKk%3D"</span>
  <span class="o">}</span>
</code></pre>

<p>Mostra o link da url do arquivo de determinado CNAB de retorno.</p>

<aside class="warning">
As URLs disponibilizadas são válidas por apenas 60 minutos. Sendo assim, não armazene o retorno e sempre que for necessário realize uma nova chamada à API.
</aside>

          <h1 id="webhook">Webhook</h1>
<pre class="highlight shell"><code>Webhook

EXEMPLO

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"url"</span>: <span class="s2">"http://www.seusitema.com/cobrato"</span>,
    <span class="s2">"description"</span>: <span class="s2">"teste"</span>,
    <span class="s2">"secret"</span>: <span class="s2">"my-secret-token"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>É possível ter indeterminados webhooks, que enviarão requisições para uma determinada URL quando certas ações ocorrem no Cobrato (<a href="#payloads">Payloads</a>).</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td><strong>(requerido)</strong> URL na qual serão feitas as requisições GET e POST, esperando HTTP 200 como retorno</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição opcional do Webhook</td>
</tr>
<tr>
<td>secret</td>
<td>string</td>
<td><strong>(requerido)</strong> Segredo pra ser adicionado no header de todas as requisições</td>
</tr>
</tbody></table>

<h2 id="informa-es-do-webhook">Informações do Webhook</h2>
<pre class="highlight shell"><code>Mostra Webhook

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"id"</span>: 1,
    <span class="s2">"url"</span>: <span class="s2">"http://www.seusitema.com/cobrato"</span>,
    <span class="s2">"description"</span>: <span class="s2">"teste"</span>,
    <span class="s2">"secret"</span>: <span class="s2">"my-secret-token"</span>,
    <span class="s2">"_links"</span>: <span class="o">[</span>
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"self"</span>,<span class="s2">"method"</span>:<span class="s2">"GET"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"update"</span>,<span class="s2">"method"</span>:<span class="s2">"PUT"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>,
      <span class="o">{</span><span class="s2">"rel"</span>:<span class="s2">"destroy"</span>,<span class="s2">"method"</span>:<span class="s2">"DELETE"</span>,<span class="s2">"href"</span>:<span class="s2">"https://app.cobrato.com/api/v1/webhooks/1"</span><span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>

</code></pre>

<p>Retorna as informações detalhadas do webhook em formato JSON.</p>

<h2 id="lista-de-todos-os-webhooks">Lista de Todos os Webhooks</h2>
<pre class="highlight shell"><code>
Listar Webhooks

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"webhooks"</span>:
      <span class="o">[</span>
        <span class="o">{</span>
          // informações webhook 1
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações webhook 2
        <span class="o">}</span>,
        ...
      <span class="o">]</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna uma lista em JSON contendo todos os webhooks pertencentes a sua Conta de Serviço.</p>

<h2 id="cria-o-de-webhook">Criação de Webhook</h2>
<pre class="highlight shell"><code>Criar Webhook

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X POST https://app.cobrato.com/api/v1/webhooks <span class="se">\</span>
    -d <span class="s1">'{
        "url": "http://www.seusitema.com/cobrato",
        "description": "Webhook teste",
        "secret": "my-secret-token"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  <span class="o">{</span>
    <span class="s2">"errors"</span>: <span class="o">{</span>
      <span class="s2">"url"</span>: <span class="o">[</span>
        <span class="s2">"não é válida"</span>,
        <span class="s2">"não pode ficar em branco"</span>
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>

</code></pre>

<p>Cria um novo webhook, retornando as informações do mesmo caso haja sucesso. Para realizar o cadastro é necessária que a URL informa aceite requisições POST, respondendo sempre com HTTP 200. No momento da criação, afim verificar a URL informada, o Cobrato fará uma requisição de teste à mesma. A requisição de teste será um <a href="#payloads">payload</a> com o corpo <code class="prettyprint">{&quot;test&quot;: true}</code>.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td><strong>(requerido)</strong> URL na qual serão feitas as requisições GET e POST, esperando HTTP 200 como retorno</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição opcional do Webhook</td>
</tr>
</tbody></table>

<h2 id="atualiza-o-de-webhook">Atualização de Webhook</h2>
<pre class="highlight shell"><code>Atualizar Webhook

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/webhooks/:webhook_id
  PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id <span class="se">\</span>
    -d <span class="s1">'{
        "descripction": "Webhook teste",
        "secret": "my-secret-token"
      }'</span>

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM BENEFICIÁRIO INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Atualiza a descrição do webhook. Não é possível alterar a URL de um Webhook. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p><strong>Parâmetros</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>description</td>
<td>string</td>
<td>(opcional) descrição opcional do Webhook</td>
</tr>
<tr>
<td>secret</td>
<td>string</td>
<td>(requerido) segredo à ser adicionado aos readers</td>
</tr>
</tbody></table>

<h2 id="exclus-o-de-webhook">Exclusão de Webhook</h2>
<pre class="highlight shell"><code>Excluir Webhook

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i -u <span class="nv">$API_TOKEN</span>:X <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM WEBHOOK INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado webhook. A exclusão é irreversível.</p>

          <h1 id="payloads">Payloads</h1>

<p>São as requisições enviadas pelo webhook do Cobrato para uma determinada URL notificando a ocorrência de <a href="#eventos-notificados">certos eventos</a>.</p>

<p>Quando um destes eventos ocorre, o webhook envia o payload (para a URL definida na criação do Webhook) em uma requisição HTTP do tipo POST com os seguintes <em>headers</em>:</p>

<ul>
<li><strong>Accept</strong>: application/json</li>
<li><strong>Content-Type</strong>: application/json</li>
<li><strong>User-Agent</strong>: Cobrato v1</li>
<li><strong>X-Cobrato-Signature</strong>: &lt;some-signature&gt;</li>
<li><strong>X-Cobrato-Requestid</strong>: &lt;some-request-id&gt;</li>
</ul>

<p>Os dois últimos fazem parte da assinatura do payload, detalhada a seguir.</p>

<aside class="notice">
  A URL definida na criação do Webhook deve estar disponível e respondendo com HTTP 200 ok aos payloads. O Cobrato fará 5 tentativas de notificação. Após a 5ª tentativa sem sucesso, os administradores da conta serão notificados via e-mail e o endpoint deste webhook será marcado como &ldquo;Com erro&rdquo;. O Cobrato fará então mais 5 tentativas no intervalo de 48 horas até não tentar mais.
</aside>

<h3 id="assinatura-do-payload">Assinatura do Payload</h3>

<p>Por medidas de segurança, você pode verificar a assinatura do payload antes de tomar qualquer ação em relação ao payload recebido. Isso pode evitar que alguém se passe pelo Cobrato e enviei payloads falsos de eventos que não ocorreram de fato.</p>
<pre class="highlight ruby"><code><span class="c1"># EXEMPLO DE CÁCULO PARA VERIFICAÇÃO DA SIGNATURE (ruby)</span>

<span class="n">secret</span> <span class="o">=</span> <span class="s1">'segredo definido na criação do Webhook'</span>
<span class="n">content</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">request</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'X-Cobrato-RequestId'</span><span class="p">]</span><span class="si">}#{</span><span class="n">request</span><span class="p">.</span><span class="nf">body</span><span class="si">}</span><span class="s2">"</span>
<span class="n">cobrato_signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha1'</span><span class="p">),</span> <span class="n">secret</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>

<span class="n">cobrato_signature</span> <span class="o">==</span> <span class="n">request</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s1">'X-Cobrato-Signature'</span><span class="p">]</span>
<span class="c1"># =&gt; true</span>
</code></pre>

<p><strong>X-Cobrato-RequestId</strong></p>

<p>Este header é único para cada requisição e é utilizado no cálculo do <code class="prettyprint">X-Cobrato-Signature</code>.</p>

<p><strong>X-Cobrato-Signature</strong></p>

<p>Este header é a assinatura do webhook. Este valor pode ser calculado com o HMAC hex digest do <code class="prettyprint">X-Cobrato-RequestId</code> concatenado ao corpo do payload, utilizando o <strong>Segredo</strong> (definido na criação do Webhook) como a chave.</p>

<h3 id="eventos-notificados">Eventos notificados</h3>

<p>Os eventos notificados são os seguintes:</p>

<table><thead>
<tr>
<th>Objeto</th>
<th>Evento</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>charge</td>
<td>created</td>
<td>quando a cobrança é criada</td>
</tr>
<tr>
<td>charge</td>
<td>updated</td>
<td>quando a cobrança é atualizada</td>
</tr>
<tr>
<td>charge</td>
<td>destroyed</td>
<td>quando a cobrança é excluída</td>
</tr>
<tr>
<td>charge</td>
<td>received</td>
<td>quando a cobrança é recebida</td>
</tr>
<tr>
<td>charge</td>
<td>undone_receivement</td>
<td>quando a cobrança tem seu recebimento desfeito</td>
</tr>
<tr>
<td>charge_config</td>
<td>created</td>
<td>quando a configuração de cobrança é criada</td>
</tr>
<tr>
<td>charge_config</td>
<td>updated</td>
<td>quando a configuração de cobrança é atualizada</td>
</tr>
<tr>
<td>charge_config</td>
<td>destroyed</td>
<td>quando a configuração de cobrança é excluída</td>
</tr>
<tr>
<td>charge_config</td>
<td>deactivated</td>
<td>quando a configuração de cobrança é desativada</td>
</tr>
<tr>
<td>credit_card</td>
<td>created</td>
<td>quando o cartão de crédito é criado</td>
</tr>
<tr>
<td>credit_card</td>
<td>updated</td>
<td>quando o cartão de crédito é atualizado</td>
</tr>
<tr>
<td>charge_template</td>
<td>created</td>
<td>quando o modelo de cobrança é criado</td>
</tr>
<tr>
<td>charge_template</td>
<td>updated</td>
<td>quando o modelo de cobrança é atualizado</td>
</tr>
<tr>
<td>charge_template</td>
<td>destroyed</td>
<td>quando o modelo de cobrança é excluído</td>
</tr>
<tr>
<td>payer</td>
<td>created</td>
<td>quando o pagador é criado</td>
</tr>
<tr>
<td>payer</td>
<td>updated</td>
<td>quando o pagador é atualizado</td>
</tr>
<tr>
<td>payer</td>
<td>destroyed</td>
<td>quando o pagador é excluído</td>
</tr>
<tr>
<td>payment</td>
<td>created</td>
<td>quando o pagamento é criado</td>
</tr>
<tr>
<td>payment</td>
<td>updated</td>
<td>quando o pagamento é atualizado</td>
</tr>
<tr>
<td>payment</td>
<td>canceled</td>
<td>quando o pagamento é cancelado</td>
</tr>
<tr>
<td>payment</td>
<td>destroyed</td>
<td>quando o pagamento é excluído</td>
</tr>
<tr>
<td>payment</td>
<td>unauthorized</td>
<td>quando o pagamento é marcado como não autorizado</td>
</tr>
<tr>
<td>payment</td>
<td>registered_with_error</td>
<td>quando o pagamento é marcado com Erro no registro</td>
</tr>
<tr>
<td>payment</td>
<td>rescheduled</td>
<td>quando o pagamento é reagendado</td>
</tr>
<tr>
<td>remittance_cnab</td>
<td>updated</td>
<td>quando o arquivo de remessa é atualizado</td>
</tr>
<tr>
<td>regress_cnab</td>
<td>updated</td>
<td>quando o arquivo de retorno é atualizado</td>
</tr>
</tbody></table>

<h2 id="cobran-a-criada">Cobrança criada</h2>
<pre class="highlight shell"><code>Cobrança Criada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança é criada.</p>

<h2 id="cobran-a-atualizada">Cobrança Atualizada</h2>
<pre class="highlight shell"><code>Cobrança Atualizada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança é atualizada.</p>

<h2 id="cobran-a-exclu-da">Cobrança Excluída</h2>
<pre class="highlight shell"><code>Cobrança Excluída

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Cobrança é excluída.</p>

<h2 id="cobran-a-recebida">Cobrança Recebida</h2>
<pre class="highlight shell"><code>Cobrança Recebida

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"received"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Este payload é enviado para todos os tipos de Cobrança e indica que uma Cobrança foi recebida. De acordo com seu tipo uma cobrança é dita recebida quando:</p>

<ul>
<li>Boleto: o usuário indica o recebimento de forma manual ou através de arquivo de retorno.</li>
<li>Gateway de pagamento: o gateway de pagamento informa o recebimento.</li>
</ul>

<h2 id="recebimento-de-cobran-a-desfeito">Recebimento de Cobrança desfeito</h2>
<pre class="highlight shell"><code>Recebimento de Cobrança desfeito

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"undone_receivement"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Este payload é disparado quando o recebimento da Cobrança é desfeito. No caso da
cobrança do tipo <strong>boleto</strong>, ele indica apenas que no Cobrato o recebimento da
Cobrança foi desfeito, mas não tem qualquer relação com o estado do boleto no
banco. Já no caso da cobrança do tipo <strong>gateway de pagamento</strong>, está cobrança
foi cancelada.</p>

<h2 id="cobran-a-cancelada">Cobrança Cancelada</h2>
<pre class="highlight shell"><code>Cobrança Cancelada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"canceled"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Este payload é enviado <strong>apenas para cobranças do tipo gateway de pagamento</strong> e
é disparado quando o gateway de pagamento informa sobre o cancelamento de uma
Cobrança, que pode ter sido pedido pelo próprio usuário ou não. Ele indica que a
Cobrança teve seu pagamento cancelado, ou seja, estornado.</p>

<h2 id="erro-no-recebimento-de-uma-cobran-a">Erro no recebimento de uma cobrança</h2>
<pre class="highlight shell"><code>Erro no recebimento de uma cobrança

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"receivement_error"</span>,
    <span class="s2">"retryable"</span>:false,
    <span class="s2">"card_error"</span>:true,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Este payload é enviado <strong>apenas para cobranças do tipo gateway de pagamento</strong> e
é disparado quando o gateway de pagamento informa sobre um erro na tentativa de
recebimnto de uma Cobrança. O parâmetro <em>retryable</em> indica se é passível ou não
de retentativa. Já o parâmetro <em>card_error</em> indica se o erro foi oriundo de um
problema no cartão ou não.</p>

<h2 id="erro-no-cancelamento-de-uma-cobran-a">Erro no cancelamento de uma cobrança</h2>
<pre class="highlight shell"><code>Erro no cancelamento de uma cobrança

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"cancellation_error"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Este payload é enviado <strong>apenas para cobranças do tipo gateway de pagamento</strong> e
é disparado quando o gateway de pagamento informa sobre um erro na tentativa de
cancelamento de uma Cobrança.</p>

<h2 id="configura-o-de-cobran-a-criada">Configuração de Cobrança criada</h2>
<pre class="highlight shell"><code>Configuração de Cobrança Criada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_config"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charges_configs/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Configuração de Cobrança é Criada.</p>

<h2 id="configura-o-de-cobran-a-atualizada">Configuração de Cobrança Atualizada</h2>
<pre class="highlight shell"><code>Configuração de Cobrança Atualizada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_config"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>
</code></pre>

<p>Informações enviadas quando uma Configuração de Cobrança é atualizada.</p>

<h2 id="configura-o-de-cobran-a-exclu-da">Configuração de Cobrança Excluída</h2>
<pre class="highlight shell"><code>Configuração de Cobrança Excluída

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_config"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Configuração de Cobrança é excluída.</p>

<h2 id="configura-o-de-cobran-a-desativada">Configuração de Cobrança desativada</h2>
<pre class="highlight shell"><code>Configuração de Cobrança Desativada

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"deactivated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_config"</span>,
    <span class="s2">"object_id"</span>:7,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_configs/7"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Configuração de Cobrança é Desativada.</p>

<h2 id="cart-o-de-cr-dito-criado">Cartão de crédito criado</h2>
<pre class="highlight shell"><code>Cartão de crédito Criado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"credit_card"</span>,
    <span class="s2">"object_id"</span>:23,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/credit_card/23"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Cartão de crédito é criado.</p>

<h2 id="cart-o-de-cr-dito-atualizado">Cartão de crédito Atualizado</h2>
<pre class="highlight shell"><code>Cartão de crédito Atualizado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"credit_card"</span>,
    <span class="s2">"object_id"</span>:23,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/credit_card/23"</span>
    <span class="o">}]</span>
  <span class="o">}</span>
</code></pre>

<p>Informações enviadas quando um Cartão de crédito é atualizado.</p>

<h2 id="modelo-de-cobran-a-criado">Modelo de Cobrança Criado</h2>
<pre class="highlight shell"><code>
Modelo de Cobrança Criado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_template"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Modelo de cobraça é criado.</p>

<h2 id="modelo-de-cobran-a-atualizado">Modelo de cobrança Atualizado</h2>
<pre class="highlight shell"><code>Modelo de cobrança Atualizado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_template"</span>,
    <span class="s2">"object_id"</span>:13,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/13"</span>
    <span class="o">}]</span>
  <span class="o">}</span>
</code></pre>

<p>Informações enviadas quando um Modelo de cobrança é atualizado.</p>

<h2 id="modelo-de-cobran-a-exclu-do">Modelo de cobrança Excluído</h2>
<pre class="highlight shell"><code>Modelo de cobrança Excluído

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"charge_template"</span>,
    <span class="s2">"object_id"</span>:14,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/charge_templates/14"</span>
    <span class="o">}]</span>
  <span class="o">}</span>
</code></pre>

<p>Informações enviadas quando um Modelo de cobrança é excluído.</p>

<h2 id="pagador-criado">Pagador criado</h2>
<pre class="highlight shell"><code>Pagador Criado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payer"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payers/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Pagador é criado.</p>

<h2 id="pagador-atualizado">Pagador Atualizado</h2>
<pre class="highlight shell"><code>Pagador Atualizado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payer"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payers/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Pagador é atualizado.</p>

<h2 id="pagador-exclu-do">Pagador Excluído</h2>
<pre class="highlight shell"><code>Pagador Excluído

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payer"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payers/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando uma Pagador é excluído.</p>

<h2 id="pagamento-criado">Pagamento criado</h2>
<pre class="highlight shell"><code>Pagamento Criado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"created"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payment"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payments/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Pagamento é criado.</p>

<h2 id="pagamento-atualizado">Pagamento Atualizado</h2>
<pre class="highlight shell"><code>Pagamento Atualizado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payment"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payments/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Pagamento é atualizado.</p>

<h2 id="pagamento-exclu-do">Pagamento Excluído</h2>
<pre class="highlight shell"><code>Pagamento Excluído

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"destroyed"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payment"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payments/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Pagamento é excluído.</p>

<h2 id="pagamento-marcado-como-n-o-autorizado">Pagamento Marcado como Não Autorizado</h2>
<pre class="highlight shell"><code>Pagamento Marcado como Não Autorizado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"unauthorized"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payment"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payments/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Pagamento é marcado como Não Autorizado.</p>

<h2 id="pagamento-marcado-com-erro-no-registro">Pagamento Marcado com Erro no Registro</h2>
<pre class="highlight shell"><code>Pagamento Marcado com Erro no Registro

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"registered_with_error"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"payment"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/payments/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Pagamento é marcado com Erro no Registro.</p>

<h2 id="arquivo-de-remessa-atualizado">Arquivo de remessa Atualizado</h2>
<pre class="highlight shell"><code>Arquivo de remessa Atualizadao

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"remittance_cnab"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/remittance_cnabs/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Arquivo de remessa é atualizado.</p>

<h2 id="arquivo-de-retorno-atualizado">Arquivo de retorno Atualizado</h2>
<pre class="highlight shell"><code>Arquivo de retorno Atualizado

EXEMPLO DE PAYLOAD

  <span class="o">{</span>
    <span class="s2">"created_at"</span>:<span class="s2">"2015-05-21T16:13:33Z"</span>,
    <span class="s2">"event"</span>:<span class="s2">"updated"</span>,
    <span class="s2">"object_type"</span>:<span class="s2">"regress_cnab"</span>,
    <span class="s2">"object_id"</span>:12,
    <span class="s2">"_links"</span>:[<span class="o">{</span>
      <span class="s2">"rel"</span>:<span class="s2">"self"</span>,
      <span class="s2">"method"</span>:<span class="s2">"GET"</span>,
      <span class="s2">"url"</span>:<span class="s2">"https://app.cobrato.com/api/v1/regress_cnabs/12"</span>
    <span class="o">}]</span>
  <span class="o">}</span>

</code></pre>

<p>Informações enviadas quando um Arquivo de retorno é atualizado.</p>

          <h1 id="tipos-de-cobran-a">Tipos de cobrança</h1>

<p>Os tipos de cobrança implementados pelo Cobrato.</p>

<aside class="notice">Não é necessária autenticação.</aside>

<p><strong>bank_billets (Boletos bancários)</strong></p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>bank_code</td>
<td>string</td>
<td>código do banco</td>
</tr>
<tr>
<td>bank_name</td>
<td>string</td>
<td>nome do banco</td>
</tr>
<tr>
<td>portfolio_codes</td>
<td>array</td>
<td>lista de códigos de portfólio do banco</td>
</tr>
<tr>
<td>regress</td>
<td>array</td>
<td>indica quais layouts CNAB de retorno são suportados para o banco</td>
</tr>
<tr>
<td>remittance</td>
<td>array</td>
<td>indica quais layouts CNAB de remessa são suportados para o banco</td>
</tr>
</tbody></table>

<h2 id="lista-de-todos-os-tipos-de-cobran-a">Lista de Todos os Tipos de Cobrança</h2>
<pre class="highlight shell"><code>Listar Tipos de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charging_types

EXEMPLO DE REQUISIÇÃO

  <span class="nv">$ </span>curl -i <span class="se">\</span>
    -H <span class="s1">'User-Agent: My App 1.0'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'Content-type: application/json'</span> <span class="se">\</span>
    -X GET https://app.cobrato.com/api/v1/charging_types

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  <span class="o">{</span>
    <span class="s2">"charging_types"</span>: <span class="o">{</span>
      <span class="s2">"bank_billets"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"bank_code"</span>: <span class="s2">"001"</span>,
          <span class="s2">"bank_name"</span>: <span class="s2">"BancoDoBrasil"</span>,
          <span class="s2">"portfolio_codes"</span>: <span class="o">[</span> <span class="s2">"11"</span>, <span class="s2">"12"</span>, <span class="s2">"16"</span>, <span class="s2">"17"</span>, <span class="s2">"18"</span>, <span class="s2">"31"</span>, <span class="s2">"51"</span> <span class="o">]</span>,
          <span class="s2">"regress"</span>: <span class="o">[</span>240],
          <span class="s2">"remittance"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          // informações de outro banco
        <span class="o">}</span>
        ...
      <span class="o">]</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre>

<p>Retorna um objeto JSON contendo todos os tipos de cobraça implementados pelo Cobrato.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="Shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
